{"ast":null,"code":"import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createVNode as _createVNode, createElementBlock as _createElementBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-4 bg-white shadow-sm rounded\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-content-between align-items-center mb-3\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"d-flex gap-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_b_alert = _resolveComponent(\"b-alert\");\n  const _component_b_button = _resolveComponent(\"b-button\");\n  const _component_vue_good_table = _resolveComponent(\"vue-good-table\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_ctx.notification.message ? (_openBlock(), _createBlock(_component_b_alert, {\n    key: 0,\n    variant: _ctx.notification.variant,\n    dismissible: \"\",\n    onDismissed: _cache[0] || (_cache[0] = $event => _ctx.notification.message = ''),\n    class: \"mb-3\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.notification.message), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"variant\"])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", {\n    class: \"h4\"\n  }, \"Book List\", -1 /* HOISTED */)), _createVNode(_component_b_button, {\n    variant: \"primary\",\n    onClick: $options.addBook\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"Add Book\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])]), _createVNode(_component_vue_good_table, {\n    columns: $data.columns,\n    rows: $data.books,\n    \"pagination-options\": {\n      enabled: true,\n      perPage: 5\n    },\n    \"search-options\": {\n      enabled: true,\n      placeholder: 'Search books...'\n    },\n    \"sort-options\": {\n      enabled: true\n    }\n  }, {\n    \"table-row\": _withCtx(props => [props.column.field === 'actions' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_b_button, {\n      size: \"sm\",\n      variant: \"warning\",\n      onClick: $event => $options.editBook(props.row)\n    }, {\n      default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"Edit\")])),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_b_button, {\n      size: \"sm\",\n      variant: \"danger\",\n      onClick: $event => $options.deleteBook(props.row)\n    }, {\n      default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"Delete\")])),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])])) : (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_createTextVNode(_toDisplayString(props.formattedRow[props.column.field]), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"columns\", \"rows\"])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_ctx","notification","message","_createBlock","_component_b_alert","variant","dismissible","onDismissed","_cache","$event","default","_withCtx","_createTextVNode","_toDisplayString","_","_createCommentVNode","_createElementVNode","_hoisted_2","_createVNode","_component_b_button","onClick","$options","addBook","_component_vue_good_table","columns","$data","rows","books","enabled","perPage","placeholder","props","column","field","_hoisted_3","size","editBook","row","deleteBook","_Fragment","formattedRow"],"sources":["/home/tymoteusz/Projects/StudiesProjects/Semestr_6/AdvancedWebSystems/Books/books-vue/src/components/BooksTable.vue"],"sourcesContent":["<template>\n  <div class=\"p-4 bg-white shadow-sm rounded\">\n    <b-alert\n        v-if=\"notification.message\"\n        :variant=\"notification.variant\"\n        dismissible\n        @dismissed=\"notification.message = ''\"\n        class=\"mb-3\"\n    >\n      {{ notification.message }}\n    </b-alert>\n\n    <div class=\"d-flex justify-content-between align-items-center mb-3\">\n      <h2 class=\"h4\">Book List</h2>\n      <b-button variant=\"primary\" @click=\"addBook\">Add Book</b-button>\n    </div>\n\n    <vue-good-table\n        :columns=\"columns\"\n        :rows=\"books\"\n        :pagination-options=\"{ enabled: true, perPage: 5 }\"\n        :search-options=\"{ enabled: true, placeholder: 'Search books...' }\"\n        :sort-options=\"{ enabled: true }\"\n    >\n      <template #table-row=\"props\">\n        <template v-if=\"props.column.field === 'actions'\">\n          <div class=\"d-flex gap-2\">\n            <b-button size=\"sm\" variant=\"warning\" @click=\"editBook(props.row)\">Edit</b-button>\n            <b-button size=\"sm\" variant=\"danger\" @click=\"deleteBook(props.row)\">Delete</b-button>\n          </div>\n        </template>\n        <template v-else>\n          {{ props.formattedRow[props.column.field] }}\n        </template>\n      </template>\n    </vue-good-table>\n  </div>\n</template>\n\n<script>\nimport Api from '../Api.js';\nimport {BAlert, BButton} from \"bootstrap-vue-next\";\nimport alert from \"bootstrap/js/src/alert\";\n\nexport default {\n  name: 'BooksTable',\n  computed: {\n    alert() {\n      return alert\n    }\n  },\n  components: {BAlert, BButton},\n  data() {\n    return {\n      books: [],\n      columns: [\n        { label: 'ID', field: 'id', type: 'number', sortable: true },\n        { label: 'Title', field: 'title', sortable: true },\n        { label: 'Author', field: 'authorFullName', sortable: true },\n        { label: 'Pages', field: 'pages', type: 'number', sortable: true },\n        { label: 'Actions', field: 'actions' },\n      ],\n    };\n  },\n  mounted() {\n    this.fetchBooks();\n  },\n  methods: {\n    fetchBooks() {\n      Api.getBooks()\n          .then((response) => {\n            this.books = response.data.data.map((book) => ({\n              ...book,\n              authorFullName: `${book.author.name} ${book.author.surname}`,\n            }));\n          })\n          .catch((error) => {\n            console.error('Failed to fetch books:', error);\n          });\n    },\n    addBook() {\n      console.log('Add Book clicked');\n      // Open Bootstrap modal to add\n    },\n    editBook(book) {\n      console.log('Edit Book:', book);\n      // Open Bootstrap modal to edit\n    },\n    deleteBook(book) {\n      if (window.confirm(`Are you sure you want to delete the book: ${book.title}?`)) {\n        Api.deleteBook(book.id)\n            .then(() => {\n              this.fetchBooks();\n              this.showNotification('Book deleted successfully!', 'success');\n            })\n            .catch((error) => {\n              console.error('Error deleting book:', error);\n              this.showNotification('Failed to delete the book.', 'danger');\n            });\n      }\n    },\n    showNotification(message, variant) {\n      this.notifiation.message = message;\n      this.notification.variant = variant;\n    },\n  },\n};\n</script>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAgC;;EAWpCA,KAAK,EAAC;AAAwD;;EAZvEC,GAAA;EA0BeD,KAAK,EAAC;;;;;;uBAzBnBE,mBAAA,CAmCM,OAnCNC,UAmCM,GAjCMC,IAAA,CAAAC,YAAY,CAACC,OAAO,I,cAD9BC,YAAA,CAQUC,kBAAA;IAVdP,GAAA;IAISQ,OAAO,EAAEL,IAAA,CAAAC,YAAY,CAACI,OAAO;IAC9BC,WAAW,EAAX,EAAW;IACVC,WAAS,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAET,IAAA,CAAAC,YAAY,CAACC,OAAO;IAChCN,KAAK,EAAC;;IAPdc,OAAA,EAAAC,QAAA,CASM,MAA0B,CAThCC,gBAAA,CAAAC,gBAAA,CASSb,IAAA,CAAAC,YAAY,CAACC,OAAO,iB;IAT7BY,CAAA;oCAAAC,mBAAA,gBAYIC,mBAAA,CAGM,OAHNC,UAGM,G,0BAFJD,mBAAA,CAA6B;IAAzBpB,KAAK,EAAC;EAAI,GAAC,WAAS,sBACxBsB,YAAA,CAAgEC,mBAAA;IAAtDd,OAAO,EAAC,SAAS;IAAEe,OAAK,EAAEC,QAAA,CAAAC;;IAd1CZ,OAAA,EAAAC,QAAA,CAcmD,MAAQH,MAAA,QAAAA,MAAA,OAd3DI,gBAAA,CAcmD,UAAQ,E;IAd3DE,CAAA;oCAiBII,YAAA,CAkBiBK,yBAAA;IAjBZC,OAAO,EAAEC,KAAA,CAAAD,OAAO;IAChBE,IAAI,EAAED,KAAA,CAAAE,KAAK;IACX,oBAAkB,EAAE;MAAAC,OAAA;MAAAC,OAAA;IAAA,CAA6B;IACjD,gBAAc,EAAE;MAAAD,OAAA;MAAAE,WAAA;IAAA,CAAiD;IACjE,cAAY,EAAE;MAAAF,OAAA;IAAA;;IAEN,WAAS,EAAAjB,QAAA,CAMPoB,KANc,KACTA,KAAK,CAACC,MAAM,CAACC,KAAK,kB,cAChCnC,mBAAA,CAGM,OAHNoC,UAGM,GAFJhB,YAAA,CAAkFC,mBAAA;MAAxEgB,IAAI,EAAC,IAAI;MAAC9B,OAAO,EAAC,SAAS;MAAEe,OAAK,EAAAX,MAAA,IAAEY,QAAA,CAAAe,QAAQ,CAACL,KAAK,CAACM,GAAG;;MA3B5E3B,OAAA,EAAAC,QAAA,CA2B+E,MAAIH,MAAA,QAAAA,MAAA,OA3BnFI,gBAAA,CA2B+E,MAAI,E;MA3BnFE,CAAA;sDA4BYI,YAAA,CAAqFC,mBAAA;MAA3EgB,IAAI,EAAC,IAAI;MAAC9B,OAAO,EAAC,QAAQ;MAAEe,OAAK,EAAAX,MAAA,IAAEY,QAAA,CAAAiB,UAAU,CAACP,KAAK,CAACM,GAAG;;MA5B7E3B,OAAA,EAAAC,QAAA,CA4BgF,MAAMH,MAAA,QAAAA,MAAA,OA5BtFI,gBAAA,CA4BgF,QAAM,E;MA5BtFE,CAAA;yEA+BQhB,mBAAA,CAEWyC,SAAA;MAjCnB1C,GAAA;IAAA,IAAAe,gBAAA,CAAAC,gBAAA,CAgCakB,KAAK,CAACS,YAAY,CAACT,KAAK,CAACC,MAAM,CAACC,KAAK,kB;IAhClDnB,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}