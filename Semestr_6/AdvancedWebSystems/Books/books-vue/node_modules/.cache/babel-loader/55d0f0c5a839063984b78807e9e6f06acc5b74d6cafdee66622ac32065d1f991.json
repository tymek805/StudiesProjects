{"ast":null,"code":"import { defineComponent, mergeModels, useSlots, useModel, useTemplateRef, computed, watch, createElementBlock, openBlock, Fragment, createCommentVNode, createElementVNode, unref, normalizeClass, renderSlot, createTextVNode, toDisplayString, mergeProps } from \"vue\";\nimport { u as useFocus } from \"./index-cC189kCW.mjs\";\nimport { u as useDefaults } from \"./useDefaults-DANje4tM.mjs\";\nimport { u as useId } from \"./useId-BzCLXIGF.mjs\";\nimport { u as useStateClass } from \"./useStateClass-BGbSLWFN.mjs\";\nimport { i as isEmptySlot } from \"./dom-BK2w00Ec.mjs\";\nconst _hoisted_1 = [\"for\"];\nconst _hoisted_2 = [\"id\", \"form\", \"name\", \"multiple\", \"disabled\", \"capture\", \"accept\", \"required\", \"aria-label\", \"aria-labelledby\", \"aria-required\", \"directory\", \"webkitdirectory\"];\nconst _sfc_main = /* @__PURE__ */defineComponent({\n  ...{\n    inheritAttrs: false\n  },\n  __name: \"BFormFile\",\n  props: /* @__PURE__ */mergeModels({\n    ariaLabel: {\n      default: void 0\n    },\n    ariaLabelledby: {\n      default: void 0\n    },\n    accept: {\n      default: \"\"\n    },\n    autofocus: {\n      type: Boolean,\n      default: false\n    },\n    capture: {\n      type: [Boolean, String],\n      default: void 0\n    },\n    directory: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    form: {\n      default: void 0\n    },\n    id: {\n      default: void 0\n    },\n    label: {\n      default: \"\"\n    },\n    labelClass: {\n      default: void 0\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    name: {\n      default: void 0\n    },\n    noButton: {\n      type: Boolean,\n      default: false\n    },\n    noDrop: {\n      type: Boolean,\n      default: false\n    },\n    noTraverse: {\n      type: Boolean,\n      default: false\n    },\n    plain: {\n      type: Boolean,\n      default: false\n    },\n    required: {\n      type: Boolean,\n      default: false\n    },\n    size: {\n      default: void 0\n    },\n    state: {\n      type: [Boolean, null],\n      default: null\n    }\n  }, {\n    \"modelValue\": {\n      default: null\n    },\n    \"modelModifiers\": {}\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props, {\n    expose: __expose\n  }) {\n    const slots = useSlots();\n    const _props = __props;\n    const props = useDefaults(_props, \"BFormFile\");\n    const modelValue = useModel(__props, \"modelValue\");\n    const computedId = useId(() => props.id);\n    const stateClass = useStateClass(() => props.state);\n    const input = useTemplateRef(\"_input\");\n    const {\n      focused\n    } = useFocus(input, {\n      initialValue: props.autofocus\n    });\n    const hasLabelSlot = computed(() => !isEmptySlot(slots[\"label\"]));\n    const computedAccept = computed(() => typeof props.accept === \"string\" ? props.accept : props.accept.join(\",\"));\n    const computedClasses = computed(() => [stateClass.value, {\n      [`form-control-${props.size}`]: props.size !== void 0,\n      \"form-control\": !props.plain,\n      \"form-control-input-file-hide-button\": props.noButton\n    }]);\n    const onChange = () => {\n      var _a, _b;\n      const value = ((_a = input.value) == null ? void 0 : _a.files) === null || ((_b = input.value) == null ? void 0 : _b.files) === void 0 ? null : [...input.value.files];\n      modelValue.value = value === null ? null : props.multiple === true ? value : value[0];\n    };\n    const onDrop = e => {\n      if (props.noDrop === true) {\n        e.preventDefault();\n      }\n    };\n    const reset = () => {\n      modelValue.value = null;\n    };\n    watch(modelValue, newValue => {\n      if (newValue === null && input.value !== null) {\n        input.value.value = \"\";\n      }\n    });\n    __expose({\n      blur: () => {\n        focused.value = false;\n      },\n      element: input,\n      focus: () => {\n        focused.value = true;\n      },\n      reset\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(Fragment, null, [hasLabelSlot.value || unref(props).label ? (openBlock(), createElementBlock(\"label\", {\n        key: 0,\n        class: normalizeClass([\"form-label\", unref(props).labelClass]),\n        for: unref(computedId)\n      }, [renderSlot(_ctx.$slots, \"label\", {}, () => [createTextVNode(toDisplayString(unref(props).label), 1)])], 10, _hoisted_1)) : createCommentVNode(\"\", true), createElementVNode(\"input\", mergeProps({\n        id: unref(computedId)\n      }, _ctx.$attrs, {\n        ref: \"_input\",\n        type: \"file\",\n        class: computedClasses.value,\n        form: unref(props).form,\n        name: unref(props).name,\n        multiple: unref(props).multiple,\n        disabled: unref(props).disabled,\n        capture: unref(props).capture,\n        accept: computedAccept.value || void 0,\n        required: unref(props).required || void 0,\n        \"aria-label\": unref(props).ariaLabel,\n        \"aria-labelledby\": unref(props).ariaLabelledby,\n        \"aria-required\": unref(props).required || void 0,\n        directory: unref(props).directory,\n        webkitdirectory: unref(props).directory,\n        onChange,\n        onDrop\n      }), null, 16, _hoisted_2)], 64);\n    };\n  }\n});\nexport { _sfc_main as _ };","map":{"version":3,"names":["slots","useSlots","_props","__props","props","useDefaults","modelValue","useModel","computedId","useId","id","stateClass","useStateClass","state","input","useTemplateRef","focused","useFocus","initialValue","autofocus","hasLabelSlot","computed","isEmptySlot","computedAccept","accept","join","computedClasses","value","size","plain","noButton","onChange","_a","files","_b","multiple","onDrop","e","noDrop","preventDefault","reset","watch","newValue","__expose","blur","element","focus"],"sources":["../src/components/BFormFile/BFormFile.vue"],"sourcesContent":["<template>\n  <label\n    v-if=\"hasLabelSlot || props.label\"\n    class=\"form-label\"\n    :class=\"props.labelClass\"\n    :for=\"computedId\"\n  >\n    <slot name=\"label\">\n      {{ props.label }}\n    </slot>\n  </label>\n\n  <input\n    :id=\"computedId\"\n    v-bind=\"$attrs\"\n    ref=\"_input\"\n    type=\"file\"\n    :class=\"computedClasses\"\n    :form=\"props.form\"\n    :name=\"props.name\"\n    :multiple=\"props.multiple\"\n    :disabled=\"props.disabled\"\n    :capture=\"props.capture\"\n    :accept=\"computedAccept || undefined\"\n    :required=\"props.required || undefined\"\n    :aria-label=\"props.ariaLabel\"\n    :aria-labelledby=\"props.ariaLabelledby\"\n    :aria-required=\"props.required || undefined\"\n    :directory=\"props.directory\"\n    :webkitdirectory=\"props.directory\"\n    @change=\"onChange\"\n    @drop=\"onDrop\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport {useFocus} from '@vueuse/core'\nimport {computed, useTemplateRef, watch} from 'vue'\nimport type {BFormFileProps} from '../../types/ComponentProps'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport {useStateClass} from '../../composables/useStateClass'\nimport {isEmptySlot} from '../../utils/dom'\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst slots = defineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  label?: (props: Record<string, never>) => any\n}>()\n\nconst _props = withDefaults(defineProps<Omit<BFormFileProps, 'modelValue'>>(), {\n  ariaLabel: undefined,\n  ariaLabelledby: undefined,\n  accept: '',\n  autofocus: false,\n  capture: undefined,\n  directory: false,\n  disabled: false,\n  form: undefined,\n  id: undefined,\n  label: '',\n  labelClass: undefined,\n  multiple: false,\n  name: undefined,\n  noButton: false,\n  noDrop: false,\n  noTraverse: false,\n  plain: false,\n  required: false,\n  size: undefined,\n  state: null,\n})\nconst props = useDefaults(_props, 'BFormFile')\n\nconst modelValue = defineModel<Exclude<BFormFileProps['modelValue'], undefined>>({\n  default: null,\n})\n\nconst computedId = useId(() => props.id)\n\n// TODO noTraverse is not implemented yet\n\nconst stateClass = useStateClass(() => props.state)\n\nconst input = useTemplateRef<HTMLInputElement>('_input')\n\nconst {focused} = useFocus(input, {initialValue: props.autofocus})\n\nconst hasLabelSlot = computed(() => !isEmptySlot(slots['label']))\n\nconst computedAccept = computed(() =>\n  typeof props.accept === 'string' ? props.accept : props.accept.join(',')\n)\n\nconst computedClasses = computed(() => [\n  stateClass.value,\n  {\n    [`form-control-${props.size}`]: props.size !== undefined,\n    'form-control': !props.plain,\n    'form-control-input-file-hide-button': props.noButton,\n  },\n])\n\nconst onChange = () => {\n  const value =\n    input.value?.files === null || input.value?.files === undefined ? null : [...input.value.files]\n  modelValue.value = value === null ? null : props.multiple === true ? value : value[0]\n}\n\nconst onDrop = (e: Readonly<Event>) => {\n  if (props.noDrop === true) {\n    e.preventDefault()\n  }\n}\n\n/**\n * Reset the form input\n */\nconst reset = () => {\n  modelValue.value = null\n}\n\nwatch(modelValue, (newValue) => {\n  if (newValue === null && input.value !== null) {\n    input.value.value = ''\n  }\n})\n\ndefineExpose({\n  blur: () => {\n    focused.value = false\n  },\n  element: input,\n  focus: () => {\n    focused.value = true\n  },\n  reset,\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA+CA,MAAMA,KAAA,GAAQC,QAAA;IAKd,MAAMC,MAAA,GAASC,OAAA;IAsBT,MAAAC,KAAA,GAAQC,WAAA,CAAYH,MAAA,EAAQ,WAAW;IAEvC,MAAAI,UAAA,GAAaC,QAAA,CAElBJ,OAAA;IAED,MAAMK,UAAA,GAAaC,KAAA,CAAM,MAAML,KAAA,CAAMM,EAAE;IAIvC,MAAMC,UAAA,GAAaC,aAAA,CAAc,MAAMR,KAAA,CAAMS,KAAK;IAE5C,MAAAC,KAAA,GAAQC,cAAA,CAAiC,QAAQ;IAEjD;MAACC;IAAW,IAAAC,QAAA,CAASH,KAAA,EAAO;MAACI,YAAA,EAAcd,KAAA,CAAMe;IAAA,CAAU;IAE3D,MAAAC,YAAA,GAAeC,QAAA,CAAS,MAAM,CAACC,WAAA,CAAYtB,KAAA,CAAM,OAAO,CAAC,CAAC;IAEhE,MAAMuB,cAAA,GAAiBF,QAAA,CAAS,MAC9B,OAAOjB,KAAA,CAAMoB,MAAA,KAAW,WAAWpB,KAAA,CAAMoB,MAAA,GAASpB,KAAA,CAAMoB,MAAA,CAAOC,IAAA,CAAK,GAAG,CACzE;IAEM,MAAAC,eAAA,GAAkBL,QAAA,CAAS,MAAM,CACrCV,UAAA,CAAWgB,KAAA,EACX;MACE,CAAC,gBAAgBvB,KAAA,CAAMwB,IAAI,EAAE,GAAGxB,KAAA,CAAMwB,IAAA,KAAS;MAC/C,gBAAgB,CAACxB,KAAA,CAAMyB,KAAA;MACvB,uCAAuCzB,KAAA,CAAM0B;IAAA,EAEhD;IAED,MAAMC,QAAA,GAAWA,CAAA,KAAM;;MACrB,MAAMJ,KAAA,KACJK,EAAA,GAAAlB,KAAA,CAAMa,KAAA,KAAN,gBAAAK,EAAA,CAAaC,KAAA,MAAU,UAAQC,EAAA,GAAApB,KAAA,CAAMa,KAAA,KAAN,gBAAAO,EAAA,CAAaD,KAAA,MAAU,SAAY,OAAO,CAAC,GAAGnB,KAAA,CAAMa,KAAA,CAAMM,KAAK;MACrF3B,UAAA,CAAAqB,KAAA,GAAQA,KAAA,KAAU,OAAO,OAAOvB,KAAA,CAAM+B,QAAA,KAAa,OAAOR,KAAA,GAAQA,KAAA,CAAM,CAAC;IACtF;IAEM,MAAAS,MAAA,GAAUC,CAAA,IAAuB;MACjC,IAAAjC,KAAA,CAAMkC,MAAA,KAAW,MAAM;QACzBD,CAAA,CAAEE,cAAA,CAAe;MAAA;IAErB;IAKA,MAAMC,KAAA,GAAQA,CAAA,KAAM;MAClBlC,UAAA,CAAWqB,KAAA,GAAQ;IACrB;IAEMc,KAAA,CAAAnC,UAAA,EAAaoC,QAAA,IAAa;MAC9B,IAAIA,QAAA,KAAa,QAAQ5B,KAAA,CAAMa,KAAA,KAAU,MAAM;QAC7Cb,KAAA,CAAMa,KAAA,CAAMA,KAAA,GAAQ;MAAA;IACtB,CACD;IAEYgB,QAAA;MACXC,IAAA,EAAMA,CAAA,KAAM;QACV5B,OAAA,CAAQW,KAAA,GAAQ;MAClB;MACAkB,OAAA,EAAS/B,KAAA;MACTgC,KAAA,EAAOA,CAAA,KAAM;QACX9B,OAAA,CAAQW,KAAA,GAAQ;MAClB;MACAa;IAAA,CACD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}