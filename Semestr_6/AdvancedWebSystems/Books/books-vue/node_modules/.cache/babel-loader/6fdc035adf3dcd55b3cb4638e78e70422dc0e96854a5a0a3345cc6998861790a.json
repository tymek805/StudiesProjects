{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, markRaw, toRef, watch } from \"vue\";\nimport { t as toastPluginKey } from \"../../../keys-D3gOZjD-.mjs\";\nconst posDefault = \"top-end\";\nconst toastPlugin = {\n  install(app) {\n    const toasts = ref([]);\n    const _isAppend = ref(false);\n    const _setIsAppend = value => {\n      _isAppend.value = value;\n    };\n    const show = (obj = {}) => {\n      var _a, _b, _c, _d;\n      const resolvedProps = toRef(obj.props);\n      const _self = ((_a = resolvedProps.value) == null ? void 0 : _a.id) || Symbol(\"Toast controller\");\n      const toastToAdd = {\n        component: !obj.component ? void 0 : markRaw(obj.component),\n        props: {\n          ...resolvedProps.value,\n          pos: ((_b = resolvedProps.value) == null ? void 0 : _b.pos) || posDefault,\n          _modelValue: ((_c = resolvedProps.value) == null ? void 0 : _c.value) || 5e3,\n          _self\n        }\n      };\n      if (((_d = resolvedProps.value) == null ? void 0 : _d.appendToast) !== void 0 ? resolvedProps.value.appendToast : _isAppend.value) {\n        toasts.value.push(toastToAdd);\n      } else {\n        toasts.value.unshift(toastToAdd);\n      }\n      watch(resolvedProps, newValue => {\n        const previousIndex = toasts.value.findIndex(el => el.props._self === _self);\n        if (previousIndex === -1) return;\n        toasts.value.splice(previousIndex, 1, {\n          component: !obj.component ? void 0 : markRaw(obj.component),\n          props: {\n            ...toasts.value[previousIndex].props,\n            ...newValue,\n            _modelValue: (newValue == null ? void 0 : newValue.value) || toasts.value[previousIndex].props._modelValue || 5e3\n          }\n        });\n      });\n      return _self;\n    };\n    const remove = self => {\n      toasts.value = toasts.value.filter(el => el.props._self !== self);\n    };\n    const leave = self => {\n      const toastIndex = toasts.value.findIndex(el => el.props._self === self);\n      if (toastIndex === -1) return;\n      toasts.value.splice(toastIndex, 1, {\n        component: !toasts.value[toastIndex].component ? void 0 : markRaw(toasts.value[toastIndex].component),\n        props: {\n          ...toasts.value[toastIndex].props,\n          _modelValue: false\n        }\n      });\n    };\n    app.provide(toastPluginKey, {\n      _setIsAppend,\n      toasts,\n      show,\n      remove,\n      leave\n    });\n  }\n};\nexport { toastPlugin };","map":{"version":3,"names":["posDefault","toastPlugin","install","app","toasts","ref","_isAppend","_setIsAppend","value","show","obj","resolvedProps","toRef","props","_self","_a","id","Symbol","toastToAdd","component","markRaw","pos","_b","_modelValue","_c","_d","appendToast","push","unshift","watch","newValue","previousIndex","findIndex","el","splice","remove","self","filter","leave","toastIndex","provide","toastPluginKey"],"sources":["../../../../src/plugins/toastController/index.ts"],"sourcesContent":["import {markRaw, type Plugin, ref, toRef, watch} from 'vue'\nimport {toastPluginKey} from '../../utils/keys'\nimport type {ContainerPosition} from '../../types/Alignment'\nimport type {\n  ControllerKey,\n  ToastOrchestratorArrayValue,\n  ToastOrchestratorShowParam,\n} from '../../types/ComponentOrchestratorTypes'\n\nconst posDefault: ContainerPosition = 'top-end'\n\nexport const toastPlugin: Plugin = {\n  install(app) {\n    const toasts = ref<ToastOrchestratorArrayValue[]>([])\n\n    const _isAppend = ref(false)\n\n    const _setIsAppend = (value: boolean) => {\n      _isAppend.value = value\n    }\n\n    /**\n     * @returns {ControllerKey} If `id` is passed to props, it will use that id, otherwise, a symbol will be created that corresponds to its unique id.\n     * You can pass this id to the hide function to force a Toast to hide\n     */\n    const show = (obj: ToastOrchestratorShowParam = {}): ControllerKey => {\n      const resolvedProps = toRef(obj.props)\n\n      const _self = resolvedProps.value?.id || Symbol('Toast controller')\n\n      const toastToAdd: ToastOrchestratorArrayValue = {\n        component: !obj.component ? undefined : markRaw(obj.component),\n        props: {\n          ...resolvedProps.value,\n          pos: resolvedProps.value?.pos || posDefault,\n          _modelValue: resolvedProps.value?.value || 5000,\n          _self,\n        },\n      }\n\n      if (\n        resolvedProps.value?.appendToast !== undefined\n          ? resolvedProps.value.appendToast\n          : _isAppend.value\n      ) {\n        toasts.value.push(toastToAdd)\n      } else {\n        toasts.value.unshift(toastToAdd)\n      }\n\n      watch(resolvedProps, (newValue) => {\n        const previousIndex = toasts.value.findIndex((el) => el.props._self === _self)\n        if (previousIndex === -1) return\n        toasts.value.splice(previousIndex, 1, {\n          component: !obj.component ? undefined : markRaw(obj.component),\n          props: {\n            ...toasts.value[previousIndex].props,\n            ...newValue,\n            _modelValue: newValue?.value || toasts.value[previousIndex].props._modelValue || 5000,\n          },\n        })\n      })\n\n      return _self\n    }\n\n    /**\n     * You can get the symbol param from the return value from the show method, or use props.id\n     */\n    const remove = (self: ControllerKey) => {\n      toasts.value = toasts.value.filter((el) => el.props._self !== self)\n    }\n\n    /**\n     * You can get the symbol param from the return value from the show method, or use props.id\n     */\n    const leave = (self: ControllerKey) => {\n      const toastIndex = toasts.value.findIndex((el) => el.props._self === self)\n      if (toastIndex === -1) return\n      toasts.value.splice(toastIndex, 1, {\n        component: !toasts.value[toastIndex].component\n          ? undefined\n          : markRaw(toasts.value[toastIndex].component as object),\n        props: {\n          ...toasts.value[toastIndex].props,\n          _modelValue: false,\n        },\n      })\n    }\n\n    app.provide(toastPluginKey, {\n      _setIsAppend,\n      toasts,\n      show,\n      remove,\n      leave,\n    })\n  },\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}