{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, withModifiers as _withModifiers, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-4 bg-white shadow-sm rounded vh-100\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-content-between align-items-center mb-3\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"d-flex gap-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_b_form_input = _resolveComponent(\"b-form-input\");\n  const _component_b_form_group = _resolveComponent(\"b-form-group\");\n  const _component_b_button = _resolveComponent(\"b-button\");\n  const _component_b_form = _resolveComponent(\"b-form\");\n  const _component_b_card = _resolveComponent(\"b-card\");\n  const _component_vue_good_table = _resolveComponent(\"vue-good-table\");\n  const _component_b_alert = _resolveComponent(\"b-alert\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_b_card, {\n    title: \"Add a New Book\",\n    class: \"mb-4\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_b_form, {\n      onSubmit: _withModifiers($options.handleSubmit, [\"prevent\"])\n    }, {\n      default: _withCtx(() => [_createVNode(_component_b_form_group, {\n        label: \"Title\",\n        \"label-for\": \"title\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_b_form_input, {\n          id: \"title\",\n          modelValue: $data.form.title,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.title = $event),\n          required: \"\",\n          placeholder: \"Enter book title\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_b_form_group, {\n        label: \"Author\",\n        \"label-for\": \"author\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_b_form_input, {\n          id: \"author\",\n          modelValue: $data.form.author,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.author = $event),\n          required: \"\",\n          placeholder: \"Enter author's name\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_b_form_group, {\n        label: \"Year\",\n        \"label-for\": \"year\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_b_form_input, {\n          id: \"year\",\n          modelValue: $data.form.year,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.year = $event),\n          modelModifiers: {\n            number: true\n          },\n          type: \"number\",\n          min: \"0\",\n          required: \"\",\n          placeholder: \"Enter publication year\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_b_form_group, {\n        label: \"Genre\",\n        \"label-for\": \"genre\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_b_form_input, {\n          id: \"genre\",\n          modelValue: $data.form.genre,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.genre = $event),\n          required: \"\",\n          placeholder: \"Enter genre\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_b_form_group, {\n        label: \"Price ($)\",\n        \"label-for\": \"price\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_b_form_input, {\n          id: \"price\",\n          modelValue: $data.form.price,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.form.price = $event),\n          modelModifiers: {\n            number: true\n          },\n          type: \"number\",\n          step: \"0.01\",\n          min: \"0\",\n          required: \"\",\n          placeholder: \"Enter price\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_b_button, {\n        type: \"submit\",\n        variant: \"primary\"\n      }, {\n        default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"Add Book\")])),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onSubmit\"])]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", _hoisted_2, [_cache[9] || (_cache[9] = _createElementVNode(\"h2\", {\n    class: \"h4\"\n  }, \"Book List\", -1 /* HOISTED */)), _createVNode(_component_b_button, {\n    variant: \"primary\",\n    onClick: $options.addBook\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"Add Book\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])]), _createVNode(_component_vue_good_table, {\n    columns: $data.columns,\n    rows: $data.books,\n    \"pagination-options\": {\n      enabled: true,\n      perPage: 5\n    },\n    \"search-options\": {\n      enabled: true,\n      placeholder: 'Search books...'\n    },\n    \"sort-options\": {\n      enabled: true\n    }\n  }, {\n    \"table-row\": _withCtx(props => [props.column.field === 'actions' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_b_button, {\n      size: \"sm\",\n      variant: \"warning\",\n      onClick: $event => $options.editBook(props.row)\n    }, {\n      default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"Edit\")])),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_b_button, {\n      size: \"sm\",\n      variant: \"danger\",\n      onClick: $event => $options.deleteBook(props.row)\n    }, {\n      default: _withCtx(() => _cache[11] || (_cache[11] = [_createTextVNode(\"Delete\")])),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])])) : (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_createTextVNode(_toDisplayString(props.formattedRow[props.column.field]), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"columns\", \"rows\"]), _createVNode(_component_b_alert, {\n    modelValue: _ctx.show,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => _ctx.show = $event),\n    variant: \"success\",\n    dismissible: \"\",\n    onDismissed: _cache[6] || (_cache[6] = $event => $data.notification.message = ''),\n    class: \"mb-3 bottom-alert\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($data.notification.message), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_b_card","title","default","_withCtx","_component_b_form","onSubmit","_withModifiers","$options","handleSubmit","_component_b_form_group","label","_component_b_form_input","id","modelValue","$data","form","_cache","$event","required","placeholder","_","author","year","modelModifiers","number","type","min","genre","price","step","_component_b_button","variant","_createTextVNode","_createElementVNode","_hoisted_2","onClick","addBook","_component_vue_good_table","columns","rows","books","enabled","perPage","props","column","field","_hoisted_3","size","editBook","row","deleteBook","_Fragment","_toDisplayString","formattedRow","_component_b_alert","_ctx","show","dismissible","onDismissed","notification","message"],"sources":["/home/tymoteusz/Projects/StudiesProjects/Semestr_6/AdvancedWebSystems/Books/books-vue/src/components/BooksTable.vue"],"sourcesContent":["<template>\n  <div class=\"p-4 bg-white shadow-sm rounded vh-100\">\n    <b-card title=\"Add a New Book\" class=\"mb-4\">\n      <b-form @submit.prevent=\"handleSubmit\">\n        <b-form-group label=\"Title\" label-for=\"title\">\n          <b-form-input\n              id=\"title\"\n              v-model=\"form.title\"\n              required\n              placeholder=\"Enter book title\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group label=\"Author\" label-for=\"author\">\n          <b-form-input\n              id=\"author\"\n              v-model=\"form.author\"\n              required\n              placeholder=\"Enter author's name\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group label=\"Year\" label-for=\"year\">\n          <b-form-input\n              id=\"year\"\n              v-model.number=\"form.year\"\n              type=\"number\"\n              min=\"0\"\n              required\n              placeholder=\"Enter publication year\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group label=\"Genre\" label-for=\"genre\">\n          <b-form-input\n              id=\"genre\"\n              v-model=\"form.genre\"\n              required\n              placeholder=\"Enter genre\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group label=\"Price ($)\" label-for=\"price\">\n          <b-form-input\n              id=\"price\"\n              v-model.number=\"form.price\"\n              type=\"number\"\n              step=\"0.01\"\n              min=\"0\"\n              required\n              placeholder=\"Enter price\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-button type=\"submit\" variant=\"primary\">Add Book</b-button>\n      </b-form>\n    </b-card>\n\n    <div class=\"d-flex justify-content-between align-items-center mb-3\">\n      <h2 class=\"h4\">Book List</h2>\n      <b-button variant=\"primary\" @click=\"addBook\">Add Book</b-button>\n    </div>\n\n    <vue-good-table\n        :columns=\"columns\"\n        :rows=\"books\"\n        :pagination-options=\"{ enabled: true, perPage: 5 }\"\n        :search-options=\"{ enabled: true, placeholder: 'Search books...' }\"\n        :sort-options=\"{ enabled: true }\"\n    >\n      <template #table-row=\"props\">\n        <template v-if=\"props.column.field === 'actions'\">\n          <div class=\"d-flex gap-2\">\n            <b-button size=\"sm\" variant=\"warning\" @click=\"editBook(props.row)\">Edit</b-button>\n            <b-button size=\"sm\" variant=\"danger\" @click=\"deleteBook(props.row)\">Delete</b-button>\n          </div>\n        </template>\n        <template v-else>\n          {{ props.formattedRow[props.column.field] }}\n        </template>\n      </template>\n    </vue-good-table>\n    <b-alert\n        v-model=\"show\"\n        :variant='\"success\"'\n        dismissible\n        @dismissed=\"notification.message = ''\"\n        class=\"mb-3 bottom-alert\"\n    >\n      {{ notification.message }}\n    </b-alert>\n  </div>\n</template>\n\n<script>\nimport Api from '../Api.js';\nimport {BAlert, BButton, BCard, BForm, BFormGroup, BFormInput} from \"bootstrap-vue-next\";\n\nexport default {\n  name: 'BooksTable',\n  components: {BCard, BForm, BFormInput, BFormGroup, BAlert, BButton},\n  data() {\n    return {\n      books: [],\n      notification: {\n        show: false,\n        message: '',\n        variant: null, // success | danger | info | warning\n      },\n      columns: [\n        { label: 'ID', field: 'id', type: 'number', sortable: true },\n        { label: 'Title', field: 'title', sortable: true },\n        { label: 'Author', field: 'authorFullName', sortable: true },\n        { label: 'Pages', field: 'pages', type: 'number', sortable: true },\n        { label: 'Actions', field: 'actions' },\n      ],\n      form: {\n        title: '',\n        author: '',\n        year: '',\n        genre: '',\n        price: '',\n      },\n    };\n  },\n  mounted() {\n    this.fetchBooks();\n  },\n  methods: {\n    fetchBooks() {\n      Api.getBooks()\n          .then((response) => {\n            this.books = response.data.data.map((book) => ({\n              ...book,\n              authorFullName: `${book.author.name} ${book.author.surname}`,\n            }));\n          })\n          .catch((error) => {\n            console.error('Failed to fetch books:', error);\n          });\n    },\n    addBook() {\n      console.log('Add Book clicked');\n      // Open Bootstrap modal to add\n    },\n    editBook(book) {\n      console.log('Edit Book:', book);\n      // Open Bootstrap modal to edit\n    },\n    deleteBook(book) {\n      if (window.confirm(`Are you sure you want to delete the book: ${book.title}?`)) {\n        Api.deleteBook(book.id)\n            .then(() => {\n              this.fetchBooks();\n              this.showNotification('Book deleted successfully!', \"success\");\n            })\n            .catch((error) => {\n              console.error('Error deleting book:', error);\n              this.showNotification('Failed to delete the book.', \"danger\");\n            });\n      }\n    },\n    showNotification(message, variant) {\n      this.notification.message = message;\n      this.notification.variant = variant;\n      this.show = true;\n      setTimeout(() => {\n        this.show = false;\n      }, 2000);\n    },\n    handleSubmit() {\n      const newBook = { ...this.form };\n      this.books.push(newBook);\n\n      // Reset form\n      this.form = {\n        title: '',\n        author: '',\n        year: '',\n        genre: '',\n        price: '',\n      };\n    },\n  },\n};\n</script>\n<style>\n.bottom-alert {\n  position: absolute !important;\n  bottom: 0;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}