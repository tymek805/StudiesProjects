{"version":3,"file":"BLink.vue_vue_type_script_setup_true_lang-DebW5NY9.js","sources":["../src/composables/useLinkClasses.ts","../src/components/BLink/BLink.vue","../src/composables/useBLinkHelper.ts","../src/utils/isLink.ts"],"sourcesContent":["import {computed, type MaybeRefOrGetter, toValue} from 'vue'\nimport type {\n  LinkIconProps,\n  LinkOpacityProps,\n  LinkUnderlineProps,\n  LinkVariantProps,\n} from '../types/ComponentProps'\n\nexport const useLinkClasses = (\n  linkProps: MaybeRefOrGetter<\n    LinkUnderlineProps & LinkOpacityProps & LinkIconProps & LinkVariantProps\n  >\n) =>\n  computed(() => {\n    const props = toValue(linkProps)\n    return {\n      [`link-${props.variant}`]: props.variant !== null,\n      [`link-opacity-${props.opacity}`]: props.opacity !== undefined,\n      [`link-opacity-${props.opacityHover}-hover`]: props.opacityHover !== undefined,\n      [`link-underline-${props.underlineVariant}`]: props.underlineVariant !== null,\n      [`link-offset-${props.underlineOffset}`]: props.underlineOffset !== undefined,\n      [`link-offset-${props.underlineOffsetHover}-hover`]: props.underlineOffsetHover !== undefined,\n      ['link-underline']:\n        props.underlineVariant === null &&\n        (props.underlineOpacity !== undefined || props.underlineOpacityHover !== undefined),\n      [`link-underline-opacity-${props.underlineOpacity}`]: props.underlineOpacity !== undefined,\n      [`link-underline-opacity-${props.underlineOpacityHover}-hover`]:\n        props.underlineOpacityHover !== undefined,\n      'icon-link': props.icon === true,\n    }\n  })\n","<template>\n  <component\n    :is=\"tag\"\n    :class=\"computedClasses\"\n    :target=\"props.target\"\n    :href=\"computedHref\"\n    :rel=\"computedRel\"\n    :tabindex=\"computedTabIndex\"\n    :aria-disabled=\"props.disabled ? true : null\"\n    v-bind=\"computedSpecificProps\"\n    @click=\"\n      (e: MouseEvent) => {\n        clicked(e)\n        link?.navigate(e)\n      }\n    \"\n  >\n    <slot />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useLinkClasses} from '../../composables/useLinkClasses'\nimport type {BLinkProps} from '../../types/ComponentProps'\nimport {collapseInjectionKey, navbarInjectionKey} from '../../utils/keys'\nimport {computed, inject, useAttrs} from 'vue'\nimport {useBLinkTagResolver} from '../../composables/useBLinkHelper'\n\nconst defaultActiveClass = 'active'\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst _props = withDefaults(defineProps<BLinkProps>(), {\n  active: undefined,\n  activeClass: 'router-link-active',\n  disabled: false,\n  exactActiveClass: 'router-link-exact-active',\n  href: undefined,\n  icon: false,\n  opacity: undefined,\n  opacityHover: undefined,\n  noPrefetch: undefined,\n  prefetchOn: undefined,\n  noRel: false,\n  prefetchedClass: undefined,\n  prefetch: undefined,\n  rel: undefined,\n  replace: false,\n  routerComponentName: 'router-link',\n  routerTag: 'a',\n  stretched: false,\n  target: undefined,\n  to: undefined,\n  underlineOffset: undefined,\n  underlineOffsetHover: undefined,\n  underlineOpacity: undefined,\n  underlineOpacityHover: undefined,\n  underlineVariant: null,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BLink')\n\nconst emit = defineEmits<{\n  click: [value: MouseEvent]\n}>()\n\nconst attrs = useAttrs()\nconst {computedHref, tag, link, isNuxtLink, isRouterLink, linkProps, isNonStandardTag} =\n  useBLinkTagResolver(\n    computed(() => ({\n      routerComponentName: props.routerComponentName,\n      disabled: props.disabled,\n      to: props.to,\n      replace: props.replace,\n      href: props.href,\n    }))\n  )\n\nconst collapseData = inject(collapseInjectionKey, null)\nconst navbarData = inject(navbarInjectionKey, null)\n\n/**\n * Not to be confused with computedLinkClasses\n */\nconst linkValueClasses = useLinkClasses(props)\nconst computedClasses = computed(() => [\n  linkValueClasses.value,\n  attrs.class,\n  computedLinkClasses.value,\n  {\n    [defaultActiveClass]: props.active,\n    [props.activeClass]: link.value?.isActive.value || false,\n    [props.exactActiveClass]: link.value?.isExactActive.value || false,\n    'stretched-link': props.stretched === true,\n  },\n])\nconst computedLinkClasses = computed(() => ({\n  [defaultActiveClass]: props.active,\n  disabled: props.disabled,\n}))\n\nconst clicked = (e: Readonly<MouseEvent>): void => {\n  if (props.disabled) {\n    e.preventDefault()\n    e.stopImmediatePropagation()\n    return\n  }\n\n  if (\n    (collapseData?.isNav?.value === true && navbarData === null) ||\n    (navbarData !== null && navbarData.autoClose?.value === true)\n  ) {\n    collapseData?.hide?.()\n  }\n\n  emit('click', e)\n}\n\nconst computedRel = computed(() =>\n  props.target === '_blank' ? (!props.rel && props.noRel ? 'noopener' : props.rel) : undefined\n)\nconst computedTabIndex = computed(() =>\n  props.disabled ? '-1' : typeof attrs.tabindex === 'undefined' ? null : attrs.tabindex\n)\n\nconst nuxtSpecificProps = computed(() => ({\n  prefetch: props.prefetch,\n  noPrefetch: props.noPrefetch,\n  prefetchOn: props.prefetchOn,\n  prefetchedClass: props.prefetchedClass,\n  ...linkProps.value,\n}))\nconst computedSpecificProps = computed(() => ({\n  ...(isRouterLink.value ? linkProps.value : undefined),\n  // In addition to being Nuxt specific, we add these values if it's some non-standard tag. We don't know what it is,\n  // So we just add it anyways. It will be made as an attr if it's unused so it's fine\n  ...(isNuxtLink.value || isNonStandardTag.value ? nuxtSpecificProps.value : undefined),\n}))\n</script>\n","import {\n  computed,\n  getCurrentInstance,\n  type MaybeRefOrGetter,\n  readonly,\n  resolveDynamicComponent,\n  toRef,\n} from 'vue'\nimport {isLink} from '../utils/isLink'\nimport {pick} from '../utils/object'\nimport type {RouteLocationRaw, RouterLink} from 'vue-router'\nimport {toPascalCase} from '../utils/stringUtils'\n\nexport const useBLinkHelper = <\n  T extends Record<string, unknown>,\n  const B extends ReadonlyArray<PropertyKey>,\n>(\n  props: MaybeRefOrGetter<T>,\n  pickProps?: MaybeRefOrGetter<B | (keyof T)[]>\n) => {\n  const pickPropsResolved = readonly(toRef(pickProps))\n  const resolvedProps = readonly(toRef(props))\n\n  const computedLink = computed(() => isLink(resolvedProps.value))\n  const computedLinkProps = computed(() =>\n    computedLink.value\n      ? pick(\n          resolvedProps.value,\n          pickPropsResolved.value ?? [\n            'active',\n            'activeClass',\n            'append',\n            'href',\n            'rel',\n            'replace',\n            'routerComponentName',\n            'target',\n            'to',\n            'variant',\n            'opacity',\n            'opacityHover',\n            'underlineVariant',\n            'underlineOffset',\n            'underlineOffsetHover',\n            'underlineOpacity',\n            'underlineOpacityHover',\n          ]\n        )\n      : {}\n  )\n\n  return {computedLink, computedLinkProps}\n}\n\nexport const useBLinkTagResolver = (\n  props: MaybeRefOrGetter<{\n    routerComponentName: string\n    disabled: boolean\n    to: RouteLocationRaw | undefined\n    href: string | undefined\n    replace: boolean\n  }>\n) => {\n  // Getting instance\n  const instance = getCurrentInstance()\n  const router = instance?.appContext.app.config.globalProperties.$router\n  const route = instance?.appContext.app.config.globalProperties.$route\n  const RouterLinkComponent = resolveDynamicComponent('RouterLink') as typeof RouterLink | string\n  const useLink = typeof RouterLinkComponent === 'string' ? null : RouterLinkComponent.useLink\n\n  // Resolving props\n  const resolvedProps = toRef(props)\n  const resolvedTo = toRef(() => resolvedProps.value.to || '')\n  const resolvedReplace = toRef(() => resolvedProps.value.replace)\n\n  const routerName = computed(() => toPascalCase(resolvedProps.value.routerComponentName))\n\n  const tag = computed(() => {\n    const hasRouter = instance?.appContext.app.component(routerName.value) !== undefined\n    if (!hasRouter || resolvedProps.value.disabled || !resolvedProps.value.to) {\n      return 'a'\n    }\n    return routerName.value\n  })\n\n  const isRouterLink = computed(() => tag.value === 'RouterLink')\n  const isNuxtLink = computed(\n    // @ts-expect-error we're doing an explicit check for Nuxt, so we can safely ignore this\n    () => isRouterLink.value && typeof instance?.appContext.app.$nuxt !== 'undefined'\n  )\n  const isNonStandardTag = computed(\n    () => tag.value !== 'a' && !isRouterLink.value && !isNuxtLink.value\n  )\n  const isOfRouterType = computed(() => isRouterLink.value || isNuxtLink.value)\n  const linkProps = computed(() => ({\n    to: resolvedTo.value,\n    replace: resolvedReplace.value,\n  }))\n\n  const _link = useLink?.({\n    to: resolvedTo,\n    replace: resolvedReplace,\n  })\n  const link = computed(() => (isOfRouterType.value ? _link : null))\n\n  const computedHref = computed(() => {\n    if (link.value?.href.value) return link.value.href.value\n\n    const toFallback = '#'\n    if (resolvedProps.value.href) return resolvedProps.value.href\n\n    if (typeof resolvedProps.value.to === 'string') return resolvedProps.value.to || toFallback\n\n    // Stabilize the `to` prop for the callback functions\n    const {to: stableTo} = resolvedProps.value\n\n    if (stableTo !== undefined && 'path' in stableTo) {\n      const path = stableTo.path || ''\n      const query = stableTo.query\n        ? `?${Object.keys(stableTo.query)\n            .map((e) => `${e}=${stableTo.query?.[e]}`)\n            .join('=')}`\n        : ''\n      const hash =\n        !stableTo.hash || stableTo.hash.charAt(0) === '#'\n          ? stableTo.hash || ''\n          : `#${stableTo.hash}`\n      return `${path}${query}${hash}` || toFallback\n    }\n    // There is no resolver for `RouteLocationNamedRaw`. Which, I'm not sure there can be one in this context.\n\n    return toFallback\n  })\n\n  return {\n    isNonStandardTag,\n    tag,\n    isRouterLink,\n    isNuxtLink,\n    computedHref,\n    routerName,\n    router,\n    route,\n    link,\n    linkProps,\n  }\n}\n","import type {RouteLocationRaw} from 'vue-router'\n\nexport const isLink = (props: Readonly<{href?: string; to?: RouteLocationRaw}>): boolean =>\n  !!(props.href || props.to)\n"],"names":["useLinkClasses","linkProps","computed","props","toValue","variant","opacity","opacityHover","underlineVariant","underlineOffset","underlineOffsetHover","underlineOpacity","underlineOpacityHover","icon","defaultActiveClass","_props","__props","useDefaults","emit","__emit","attrs","useAttrs","computedHref","tag","link","isNuxtLink","isRouterLink","isNonStandardTag","instance","getCurrentInstance","router","appContext","app","config","globalProperties","$router","route","$route","RouterLinkComponent","resolveDynamicComponent","useLink","resolvedProps","toRef","resolvedTo","value","to","resolvedReplace","replace","routerName","toPascalCase","routerComponentName","component","disabled","$nuxt","isOfRouterType","_link","_a","href","stableTo","path","query","Object","keys","map","e","join","hash","charAt","useBLinkTagResolver","collapseData","inject","collapseInjectionKey","navbarData","navbarInjectionKey","linkValueClasses","computedClasses","class","computedLinkClasses","active","activeClass","isActive","exactActiveClass","_b","isExactActive","stretched","computedRel","target","rel","noRel","computedTabIndex","tabindex","nuxtSpecificProps","prefetch","noPrefetch","prefetchOn","prefetchedClass","computedSpecificProps","preventDefault","stopImmediatePropagation","isNav","autoClose","_c","hide","call","pickProps","pickPropsResolved","readonly","computedLink","isLink","computedLinkProps","pick"],"mappings":"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"}