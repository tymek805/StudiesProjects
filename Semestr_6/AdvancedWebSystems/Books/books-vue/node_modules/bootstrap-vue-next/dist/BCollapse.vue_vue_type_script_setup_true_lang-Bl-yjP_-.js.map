{"version":3,"file":"BCollapse.vue_vue_type_script_setup_true_lang-Bl-yjP_-.js","sources":["../src/components/BCollapse/BCollapse.vue"],"sourcesContent":["<template>\n  <slot name=\"header\" v-bind=\"sharedSlots\" />\n  <Transition\n    v-if=\"renderRef || contentShowing\"\n    v-bind=\"transitionProps\"\n    :enter-active-class=\"computedNoAnimation ? '' : 'collapsing'\"\n    :leave-active-class=\"computedNoAnimation ? '' : 'collapsing'\"\n    :appear=\"modelValue || props.visible\"\n  >\n    <component\n      :is=\"props.tag\"\n      v-show=\"showRef\"\n      :id=\"computedId\"\n      ref=\"_element\"\n      class=\"collapse\"\n      :class=\"computedClasses\"\n      :is-nav=\"props.isNav\"\n      v-bind=\"$attrs\"\n    >\n      <slot v-if=\"contentShowing\" v-bind=\"sharedSlots\" />\n    </component>\n  </Transition>\n  <slot name=\"footer\" v-bind=\"sharedSlots\" />\n</template>\n\n<script setup lang=\"ts\">\nimport {computed, type EmitFn, provide, readonly, toRef, useTemplateRef} from 'vue'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport {collapseInjectionKey} from '../../utils/keys'\nimport type {BCollapseProps} from '../../types/ComponentProps'\nimport {type showHideEmits, useShowHide} from '../../composables/useShowHide'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst _props = withDefaults(defineProps<Omit<BCollapseProps, 'modelValue'>>(), {\n  horizontal: false,\n  id: undefined,\n  initialAnimation: false,\n  isNav: false,\n  lazy: false,\n  noAnimation: false,\n  unmountLazy: false,\n  tag: 'div',\n  show: false,\n  visible: false,\n})\n\nconst props = useDefaults(_props, 'BCollapse')\n\nconst emit = defineEmits<showHideEmits>()\n\ntype SharedSlotsData = {\n  hide: () => void\n  id: string\n  show: () => void\n  toggle: () => void\n  visible: boolean\n}\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: SharedSlotsData) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  footer?: (props: SharedSlotsData) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  header?: (props: SharedSlotsData) => any\n}>()\n\nconst modelValue = defineModel<Exclude<BCollapseProps['modelValue'], undefined>>({\n  default: false,\n})\n\nconst computedId = useId(() => props.id, 'collapse')\n\nconst element = useTemplateRef<HTMLElement>('_element')\n\nlet inCollapse = false\nconst onEnter = (el: Element) => {\n  inCollapse = true\n  requestAnimationFrame(() => {\n    if (props.horizontal) {\n      ;(el as HTMLElement).style.width = `${(el as HTMLElement).scrollWidth}px`\n    } else {\n      ;(el as HTMLElement).style.height = `${(el as HTMLElement).scrollHeight}px`\n    }\n  })\n}\nconst onBeforeLeave = (el: Element) => {\n  if (inCollapse) {\n    return\n  }\n  if (props.horizontal) {\n    ;(el as HTMLElement).style.width = `${el.scrollWidth}px`\n  } else {\n    ;(el as HTMLElement).style.height = `${el.scrollHeight}px`\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  ;(el as HTMLElement).offsetHeight // force reflow\n}\nconst onLeave = (el: Element) => {\n  requestAnimationFrame(() => {\n    if (props.horizontal) {\n      ;(el as HTMLElement).style.width = ``\n    } else {\n      ;(el as HTMLElement).style.height = ``\n    }\n  })\n}\n\nconst onAfterEnter = (el: Element) => {\n  ;(el as HTMLElement).style.height = ``\n  ;(el as HTMLElement).style.width = ``\n  inCollapse = false\n}\n\nconst onAfterLeave = (el: Element) => {\n  ;(el as HTMLElement).style.height = ``\n  ;(el as HTMLElement).style.width = ``\n  inCollapse = false\n}\n\nconst {\n  showRef,\n  renderRef,\n  hide,\n  show,\n  toggle,\n  isActive,\n  computedNoAnimation,\n  contentShowing,\n  transitionProps,\n} = useShowHide(modelValue, props, emit as EmitFn, element, computedId, {\n  // addShowClass: false,\n  transitionProps: {\n    onBeforeLeave,\n    onEnter,\n    onLeave,\n    onAfterEnter,\n    onAfterLeave,\n    enterToClass: '',\n    leaveToClass: '',\n    enterFromClass: '',\n    leaveFromClass: '',\n    enterActiveClass: '',\n    leaveActiveClass: '',\n  },\n})\n\nconst computedClasses = computed(() => ({\n  'show': isActive.value,\n  'navbar-collapse': props.isNav,\n  'collapse-horizontal': props.horizontal,\n}))\n\nconst sharedSlots = computed<SharedSlotsData>(() => ({\n  toggle,\n  show,\n  hide,\n  id: computedId.value,\n  visible: showRef.value,\n}))\n\ndefineExpose({\n  hide,\n  isNav: props.isNav,\n  show,\n  toggle,\n  visible: readonly(showRef),\n})\n\nprovide(collapseInjectionKey, {\n  id: computedId,\n  hide,\n  show,\n  toggle,\n  visible: readonly(showRef),\n  isNav: toRef(() => props.isNav),\n})\n</script>\n"],"names":["_props","__props","props","useDefaults","emit","__emit","modelValue","_useModel","computedId","useId","id","element","useTemplateRef","inCollapse","showRef","renderRef","hide","show","toggle","isActive","computedNoAnimation","contentShowing","transitionProps","useShowHide","onBeforeLeave","el","horizontal","style","width","scrollWidth","height","scrollHeight","offsetHeight","onEnter","requestAnimationFrame","onLeave","onAfterEnter","onAfterLeave","enterToClass","leaveToClass","enterFromClass","leaveFromClass","enterActiveClass","leaveActiveClass","computedClasses","computed","value","isNav","sharedSlots","visible","__expose","readonly","provide","collapseInjectionKey","toRef"],"mappings":"w0BAqCA,MAAMA,EAASC,EAaTC,EAAQC,EAAAA,YAAYH,EAAQ,aAE5BI,EAAOC,EAmBPC,EAAaC,EAAAA,SAElBN,EAAA,cAEKO,EAAaC,EAAAA,OAAM,IAAMP,EAAMQ,IAAI,YAEnCC,EAAUC,iBAA4B,YAE5C,IAAIC,GAAa,EACX,MA4CAC,QACJA,EAAAC,UACAA,EAAAC,KACAA,EAAAC,KACAA,EAAAC,OACAA,EAAAC,SACAA,EAAAC,oBACAA,EAAAC,eACAA,EAAAC,gBACAA,GACEC,EAAAA,YAAYjB,EAAYJ,EAAOE,EAAgBO,EAASH,EAAY,CAEtEc,gBAAiB,CACfE,cA/CmBC,IACjBZ,IAGAX,EAAMwB,WACND,EAAmBE,MAAMC,MAAQ,GAAGH,EAAGI,gBAEvCJ,EAAmBE,MAAMG,OAAS,GAAGL,EAAGM,iBAGvBN,EAAAO,aAAA,EAsCnBC,QA1DaR,IACFZ,GAAA,EACbqB,uBAAsB,KAChBhC,EAAMwB,WACND,EAAmBE,MAAMC,MAAQ,GAAIH,EAAmBI,gBAExDJ,EAAmBE,MAAMG,OAAS,GAAIL,EAAmBM,gBAAY,GAE1E,EAmDCI,QArCaV,IACfS,uBAAsB,KAChBhC,EAAMwB,WACND,EAAmBE,MAAMC,MAAQ,GAEjCH,EAAmBE,MAAMG,OAAS,EAAA,GAEvC,EA+BCM,aA5BkBX,IAClBA,EAAmBE,MAAMG,OAAS,GAClCL,EAAmBE,MAAMC,MAAQ,GACtBf,GAAA,CAAA,EA0BXwB,aAvBkBZ,IAClBA,EAAmBE,MAAMG,OAAS,GAClCL,EAAmBE,MAAMC,MAAQ,GACtBf,GAAA,CAAA,EAqBXyB,aAAc,GACdC,aAAc,GACdC,eAAgB,GAChBC,eAAgB,GAChBC,iBAAkB,GAClBC,iBAAkB,MAIhBC,EAAkBC,EAAAA,UAAS,KAAO,CACtC5B,KAAQE,EAAS2B,MACjB,kBAAmB5C,EAAM6C,MACzB,sBAAuB7C,EAAMwB,eAGzBsB,EAAcH,EAAAA,UAA0B,KAAO,CACnD3B,SACAD,OACAD,OACAN,GAAIF,EAAWsC,MACfG,QAASnC,EAAQgC,iBAGNI,EAAA,CACXlC,OACA+B,MAAO7C,EAAM6C,MACb9B,OACAC,SACA+B,QAASE,WAASrC,KAGpBsC,EAAAA,QAAQC,EAAAA,qBAAsB,CAC5B3C,GAAIF,EACJQ,OACAC,OACAC,SACA+B,QAASE,WAASrC,GAClBiC,MAAOO,EAAAA,OAAM,IAAMpD,EAAM6C"}