{"version":3,"file":"BTable.vue_vue_type_script_setup_true_lang-nGoIqGi9.js","sources":["../src/utils/formatItem.ts","../src/types/TableTypes.ts","../src/components/BTable/BTbody.vue","../src/components/BTable/BTd.vue","../src/components/BTable/BTfoot.vue","../src/components/BTable/BTh.vue","../src/components/BTable/BThead.vue","../src/components/BTable/BTr.vue","../src/utils/tableUtils.ts","../src/utils/filterEvent.ts","../src/components/BTable/BTableLite.vue","../src/components/BTable/BTable.vue"],"sourcesContent":["import type {TableFieldFormatter} from '../types/TableTypes'\nimport {get} from './object'\n\nexport const formatItem = <T>(\n  item: T,\n  // Weakly type fieldKey because it can be a nested string, such as 'foo.bar.baz'\n  fieldKey: string,\n  formatter?: TableFieldFormatter<T>\n) => {\n  const val = get(item, fieldKey)\n  return formatter && typeof formatter === 'function' ? formatter(val, fieldKey, item) : val\n}\n","import type {StyleValue} from 'vue'\nimport type {ColorVariant} from './ColorTypes'\nimport type {MaybePromise} from './MaybePromise'\nimport type {LiteralUnion} from './LiteralUnion'\nimport type {AttrsValue, ClassValue} from './AnyValuedAttributes'\n\nexport type TableRowEvent<T> = [item: T, index: number, event: MouseEvent]\n\nexport type TableItem<T = Record<string, unknown>> = T & {\n  _rowVariant?: ColorVariant | null\n  _cellVariants?: Partial<Record<keyof T, ColorVariant>>\n  _showDetails?: boolean\n}\n\nexport const isTableItem = (value: unknown): value is TableItem =>\n  typeof value === 'object' && value !== null\n\n/**\n * `undefined` means it's not sorting this column. It is set to undefined rather than removed from the array because\n * we don't want to make updates that remove the comparer function from the value.\n */\nexport type BTableSortByOrder = 'desc' | 'asc' | undefined\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type BTableSortByComparerFunction<T = any> = (a: T, b: T, key: string) => number\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type BTableSortBy<T = any> = {\n  order: BTableSortByOrder\n  key: string\n  comparer?: BTableSortByComparerFunction<T>\n}\n\nexport type BTableProviderContext<T = unknown> = {\n  sortBy: BTableSortBy<T>[] | undefined\n  filter: string | undefined\n  currentPage: number\n  perPage: number\n}\n\nexport type BTableProvider<T> = (\n  context: Readonly<BTableProviderContext<T>>\n) => MaybePromise<T[] | undefined>\n\nexport type TableFieldFormatter<T> = (value: unknown, key: string, item: T) => string\n\nexport type TableRowType = 'row' | 'row-details' | 'row-top' | 'row-bottom' | 'table-busy'\nexport type TableRowThead = 'top' | 'bottom'\n\nexport type TableStrictClassValue = string | unknown[] | Record<string, boolean>\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type TableField<T = any> = {\n  key: LiteralUnion<keyof T>\n  label?: string\n  headerTitle?: string\n  headerAbbr?: string\n  class?: ClassValue\n  formatter?: TableFieldFormatter<T>\n  sortable?: boolean\n  sortDirection?: string\n  sortByFormatted?: boolean | TableFieldFormatter<T>\n  filterByFormatted?: boolean | TableFieldFormatter<T>\n  tdClass?:\n    | TableStrictClassValue\n    | ((value: unknown, key: string, item: T) => TableStrictClassValue)\n  thClass?: ClassValue\n  thStyle?: StyleValue\n  variant?: ColorVariant | null\n  tdAttr?: AttrsValue | ((value: unknown, key: string, item: T) => AttrsValue)\n  thAttr?:\n    | AttrsValue\n    | ((value: unknown, key: string, item: T | null, type: TableRowThead) => AttrsValue)\n  isRowHeader?: boolean\n  stickyColumn?: boolean\n}\n\nexport type TableFieldRaw<T = unknown> = T extends object\n  ? LiteralUnion<keyof T> | TableField<T>\n  : string | TableField\n\nexport const isTableField = <T>(value: unknown): value is TableField<T> =>\n  typeof value === 'object' && value !== null && 'key' in value\n\nexport const isTableFieldRaw = <T>(value: unknown): value is TableFieldRaw<T> =>\n  typeof value === 'string' || isTableField(value)\n\nexport type NoProviderTypes = 'paging' | 'sorting' | 'filtering'\n","<template>\n  <tbody :class=\"computedClasses\">\n    <slot />\n  </tbody>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTbodyProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BTbodyProps>(), {\n  variant: null,\n})\nconst props = useDefaults(_props, 'BTbody')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`thead-${props.variant}`]: props.variant !== null,\n}))\n</script>\n","<template>\n  <td\n    :scope=\"scope\"\n    :class=\"computedClasses\"\n    :colspan=\"props.colspan\"\n    :rowspan=\"props.rowspan\"\n    :data-label=\"props.stackedHeading\"\n  >\n    <div v-if=\"props.stackedHeading\">\n      <slot />\n    </div>\n    <slot v-else />\n  </td>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTdProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BTdProps>(), {\n  colspan: undefined,\n  rowspan: undefined,\n  stackedHeading: undefined,\n  stickyColumn: false,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BTd')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`table-${props.variant}`]: props.variant !== null,\n  'b-table-sticky-column': props.stickyColumn,\n  'table-b-table-default': props.stickyColumn && props.variant === null,\n}))\n\nconst scope = computed(() => (props.colspan ? 'colspan' : props.rowspan ? 'rowspan' : 'col'))\n</script>\n","<template>\n  <tfoot :class=\"computedClasses\">\n    <slot />\n  </tfoot>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTfootProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BTfootProps>(), {\n  variant: null,\n})\nconst props = useDefaults(_props, 'BTfoot')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`table-${props.variant}`]: props.variant !== null,\n}))\n</script>\n","<template>\n  <th\n    :scope=\"scope\"\n    :class=\"computedClasses\"\n    :colspan=\"props.colspan\"\n    :rowspan=\"props.rowspan\"\n    :data-label=\"props.stackedHeading\"\n  >\n    <div v-if=\"props.stackedHeading !== undefined\">\n      <slot />\n    </div>\n    <slot v-else />\n  </th>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BThProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BThProps>(), {\n  colspan: undefined,\n  rowspan: undefined,\n  stackedHeading: undefined,\n  stickyColumn: false,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BTh')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`table-${props.variant}`]: props.variant !== null,\n  'b-table-sticky-column': props.stickyColumn,\n  'table-b-table-default': props.stickyColumn && props.variant === null,\n}))\n\nconst scope = computed(() => (props.colspan ? 'colspan' : props.rowspan ? 'rowspan' : 'col'))\n</script>\n","<template>\n  <thead :class=\"computedClasses\">\n    <slot />\n  </thead>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTheadProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BTheadProps>(), {\n  variant: null,\n})\nconst props = useDefaults(_props, 'BThead')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`table-${props.variant}`]: props.variant !== null,\n}))\n</script>\n","<template>\n  <tr :class=\"computedClasses\">\n    <slot />\n  </tr>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTrProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BTrProps>(), {\n  variant: null,\n})\nconst props = useDefaults(_props, 'BTr')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`table-${props.variant}`]: props.variant !== null,\n}))\n</script>\n","import {titleCase} from './stringUtils'\nimport type {TableFieldRaw} from '../types/TableTypes'\nimport type {Breakpoint, BTableLiteProps, BTableSimpleProps} from '../types'\n\nexport const getTableFieldHeadLabel = (field: Readonly<TableFieldRaw<unknown>>) =>\n  typeof field === 'string'\n    ? titleCase(field)\n    : field.label !== undefined\n      ? field.label\n      : typeof field.key === 'string'\n        ? titleCase(field.key)\n        : field.key\n\nexport const btableSimpleProps = Object.freeze(\n  Object.keys({\n    bordered: 0,\n    borderless: 0,\n    borderVariant: 0,\n    captionTop: 0,\n    dark: 0,\n    fixed: 0,\n    hover: 0,\n    id: 0,\n    noBorderCollapse: 0,\n    outlined: 0,\n    responsive: 0,\n    small: 0,\n    stacked: 0,\n    stickyHeader: 0,\n    striped: 0,\n    stripedColumns: 0,\n    variant: 0,\n    tableAttrs: 0,\n    tableClass: 0,\n  } satisfies Record<keyof BTableSimpleProps, 0>)\n) as readonly (keyof BTableSimpleProps)[]\n\nexport const btableLiteProps = Object.freeze(\n  Object.keys({\n    align: 0,\n    caption: 0,\n    detailsTdClass: 0,\n    fieldColumnClass: 0,\n    fields: 0,\n    footClone: 0,\n    footRowVariant: 0,\n    footVariant: 0,\n    headRowVariant: 0,\n    headVariant: 0,\n    items: 0,\n    labelStacked: 0,\n    modelValue: 0,\n    primaryKey: 0,\n    tbodyClass: 0,\n    tbodyTrAttrs: 0,\n    tbodyTrClass: 0,\n    tfootClass: 0,\n    tfootTrClass: 0,\n    theadClass: 0,\n    theadTrClass: 0,\n  } satisfies Record<keyof Omit<BTableLiteProps<unknown>, keyof BTableSimpleProps>, 0>)\n) as readonly (keyof Omit<BTableLiteProps<unknown>, keyof BTableSimpleProps>)[]\n\nexport const getDataLabelAttr = (\n  props: {stacked: boolean | Breakpoint | undefined; labelStacked: boolean | undefined},\n  label: string\n) => (props.stacked && props.labelStacked !== true ? {'data-label': label} : undefined)\n","const TABLE_TAG_NAMES = ['TD', 'TH', 'TR']\n\n// Filter CSS selector for click/dblclick/etc. events\n// If any of these selectors match the clicked element, we ignore the event\nconst eventFilter = [\n  'a',\n  'a *', // Include content inside links\n  'button',\n  'button *', // Include content inside buttons\n  'input:not(.disabled):not([disabled])',\n  'select:not(.disabled):not([disabled])',\n  'textarea:not(.disabled):not([disabled])',\n  '[role=\"link\"]',\n  '[role=\"link\"] *',\n  '[role=\"button\"]',\n  '[role=\"button\"] *',\n  '[tabindex]:not(.disabled):not([disabled])',\n].join(',')\n\n// Returns `true` if we should ignore the click/double-click/keypress event\n// Avoids having the user need to use `@click.stop` on the form control\nexport const filterEvent = (event: Readonly<Event>) => {\n  // Exit early when we don't have a target element\n  if (!event || !event.target) {\n    return false\n  }\n  const el = event.target as HTMLElement\n  // Exit early when element is disabled or a table element\n  if (('disabled' in el && el.disabled) || TABLE_TAG_NAMES.indexOf(el.tagName) !== -1) {\n    return false\n  }\n  // Ignore the click when it was inside a dropdown menu\n  if (el.closest('.dropdown-menu')) return true\n\n  const label = el.tagName === 'LABEL' ? el : el.closest('label')\n  // If the label's form control is not disabled then we don't propagate event\n  // Modern browsers have `label.control` that references the associated input, but IE 11\n  // does not have this property on the label element, so we resort to DOM lookups\n  if (label) {\n    const labelFor = label.getAttribute('for')\n    const input = labelFor\n      ? document.getElementById(labelFor)\n      : label.querySelector('input, select, textarea')\n    if (input && !(input as HTMLInputElement).disabled) {\n      return true\n    }\n  }\n  // Otherwise check if the event target matches one of the selectors in the\n  // event filter (i.e. anchors, non disabled inputs, etc.)\n  // Return `true` if we should ignore the event\n  return el.matches(eventFilter)\n}\n","<template>\n  <BTableSimple v-bind=\"computedSimpleProps\">\n    <BThead v-show=\"showComputedHeaders\" :variant=\"props.headVariant\" :class=\"props.theadClass\">\n      <slot name=\"thead-top\" :columns=\"computedFieldsTotal\" :fields=\"computedFields\" />\n      <BTr :variant=\"props.headRowVariant\" :class=\"props.theadTrClass\">\n        <BTh\n          v-for=\"field in computedFields\"\n          :key=\"field.key\"\n          scope=\"col\"\n          :class=\"getFieldColumnClasses(field)\"\n          :title=\"field.headerTitle\"\n          :variant=\"field.variant\"\n          :abbr=\"field.headerAbbr\"\n          :style=\"field.thStyle\"\n          v-bind=\"callThAttr(null, field, 'top')\"\n          @click=\"headerClicked(field, $event)\"\n        >\n          <!-- eslint-disable prettier/prettier -->\n          <slot\n            :name=\"\n              slots[`head(${String(field.key)})`]\n                ? (`head(${String(field.key)})` as 'head()')\n                : 'head()'\n            \"\n            :label=\"field.label\"\n            :column=\"field.key as LiteralUnion<keyof Items>\"\n            :field\n            :is-foot=\"false\"\n          >\n            <!-- eslint-enable prettier/prettier -->\n            {{ getTableFieldHeadLabel(field) }}\n          </slot>\n        </BTh>\n      </BTr>\n      <BTr v-if=\"slots['thead-sub']\">\n        <BTd\n          v-for=\"field in computedFields\"\n          :key=\"field.key\"\n          scope=\"col\"\n          :variant=\"field.variant\"\n          :class=\"[field.class, field.thClass]\"\n        >\n          <slot name=\"thead-sub\" :items=\"props.items\" :fields=\"computedFields\" :field>\n            {{ field.label }}\n          </slot>\n        </BTd>\n      </BTr>\n    </BThead>\n    <BTbody :class=\"props.tbodyClass\">\n      <slot\n        name=\"custom-body\"\n        :fields=\"computedFields\"\n        :items=\"props.items\"\n        :columns=\"computedFieldsTotal\"\n      >\n        <BTr\n          v-if=\"!props.stacked && slots['top-row']\"\n          :class=\"getRowClasses(null, 'row-top')\"\n          v-bind=\"callTbodyTrAttrs(null, 'row-top')\"\n        >\n          <slot name=\"top-row\" :columns=\"computedFieldsTotal\" :fields=\"computedFields\" />\n        </BTr>\n\n        <template\n          v-for=\"(item, itemIndex) in props.items\"\n          :key=\"\n            props.primaryKey && get(item, props.primaryKey)\n              ? get(item, props.primaryKey)\n              : itemIndex\n          \"\n        >\n          <BTr\n            :id=\"\n              props.primaryKey && get(item, props.primaryKey)\n                ? generateTableRowId(get(item, props.primaryKey))\n                : undefined\n            \"\n            :class=\"getRowClasses(item, 'row')\"\n            :variant=\"isTableItem(item) ? item._rowVariant : undefined\"\n            v-bind=\"callTbodyTrAttrs(item, 'row')\"\n            @click=\"!filterEvent($event) && emit('row-clicked', item, itemIndex, $event)\"\n            @dblclick=\"!filterEvent($event) && emit('row-dblclicked', item, itemIndex, $event)\"\n            @contextmenu=\"!filterEvent($event) && emit('row-contextmenu', item, itemIndex, $event)\"\n            @mouseenter=\"!filterEvent($event) && emit('row-hovered', item, itemIndex, $event)\"\n            @mouseleave=\"!filterEvent($event) && emit('row-unhovered', item, itemIndex, $event)\"\n            @mousedown=\"handleMiddleClick(item, itemIndex, $event)\"\n          >\n            <BTd\n              v-for=\"field in computedFields\"\n              :key=\"field.key\"\n              :variant=\"\n                (isTableItem(item) ? item._cellVariants?.[field.key as string] : false)\n                  ? null\n                  : field.variant\n              \"\n              :class=\"getFieldRowClasses(field, item)\"\n              v-bind=\"itemAttributes(item, String(field.key), field.tdAttr)\"\n            >\n              <label v-if=\"props.stacked && props.labelStacked\" class=\"b-table-stacked-label\">\n                {{ getTableFieldHeadLabel(field) }}\n              </label>\n              <slot\n                :name=\"\n                  slots[`cell(${String(field.key)})`]\n                    ? (`cell(${String(field.key)})` as 'cell()')\n                    : 'cell()'\n                \"\n                :value=\"formatItem(item, String(field.key), field.formatter)\"\n                :unformatted=\"get(item, String(field.key))\"\n                :index=\"itemIndex\"\n                :item=\"item\"\n                :field=\"field\"\n                :items=\"items\"\n                :toggle-details=\"() => toggleRowDetails(item)\"\n                :details-showing=\"isTableItem(item) ? (detailsMap.get(item) ?? false) : false\"\n              >\n                <template v-if=\"!slots[`cell(${String(field.key)})`] && !slots['cell()']\">\n                  {{ formatItem(item, String(field.key), field.formatter) }}\n                </template>\n              </slot>\n            </BTd>\n          </BTr>\n\n          <template\n            v-if=\"isTableItem(item) && detailsMap.get(item) === true && slots['row-details']\"\n          >\n            <BTr aria-hidden=\"true\" role=\"presentation\" class=\"d-none\" />\n            <BTr\n              :class=\"getRowClasses(item, 'row-details')\"\n              :variant=\"item._rowVariant\"\n              v-bind=\"callTbodyTrAttrs(item, 'row-details')\"\n            >\n              <BTd :colspan=\"computedFieldsTotal\" :class=\"detailsTdClass\">\n                <slot\n                  name=\"row-details\"\n                  :item=\"item\"\n                  :toggle-details=\"() => toggleRowDetails(item)\"\n                  :fields=\"computedFields\"\n                  :index=\"itemIndex\"\n                />\n              </BTd>\n            </BTr>\n          </template>\n        </template>\n        <!-- This class is for specific targetting of this slot element -->\n        <BTr\n          v-if=\"!props.stacked && slots['bottom-row']\"\n          class=\"bottom-row\"\n          :class=\"getRowClasses(null, 'row-bottom')\"\n          v-bind=\"callTbodyTrAttrs(null, 'row-bottom')\"\n        >\n          <slot name=\"bottom-row\" :columns=\"computedFieldsTotal\" :fields=\"computedFields\" />\n        </BTr>\n      </slot>\n    </BTbody>\n    <BTfoot v-if=\"props.footClone\" v-bind=\"footerProps\">\n      <BTr :variant=\"props.footRowVariant\" :class=\"props.tfootTrClass\">\n        <BTh\n          v-for=\"field in computedFields\"\n          :key=\"field.key\"\n          scope=\"col\"\n          :class=\"getFieldColumnClasses(field)\"\n          :title=\"field.headerTitle\"\n          :abbr=\"field.headerAbbr\"\n          :style=\"field.thStyle\"\n          :variant=\"field.variant\"\n          v-bind=\"callThAttr(null, field, 'bottom')\"\n          @click=\"headerClicked(field, $event, true)\"\n        >\n          <div class=\"d-inline-flex flex-nowrap align-items-center gap-1\">\n            <div>\n              <!-- eslint-disable prettier/prettier -->\n              <slot\n                :name=\"\n                  slots[`foot(${String(field.key)})`]\n                    ? (`foot(${String(field.key)})` as 'foot()')\n                    : 'foot()'\n                \"\n                :label=\"field.label\"\n                :column=\"field.key as LiteralUnion<keyof Items>\"\n                :field=\"field\"\n                :is-foot=\"true\"\n              >\n                <!-- eslint-enable prettier/prettier -->\n                {{ getTableFieldHeadLabel(field) }}\n              </slot>\n            </div>\n          </div>\n        </BTh>\n      </BTr>\n    </BTfoot>\n    <BTfoot v-else-if=\"slots['custom-foot']\" v-bind=\"footerProps\">\n      <slot\n        name=\"custom-foot\"\n        :fields=\"computedFields\"\n        :items=\"props.items\"\n        :columns=\"computedFieldsTotal\"\n      />\n    </BTfoot>\n    <caption v-if=\"slots['table-caption'] || props.caption\">\n      <slot name=\"table-caption\">\n        {{ props.caption }}\n      </slot>\n    </caption>\n  </BTableSimple>\n</template>\n\n<script setup lang=\"ts\" generic=\"Items\">\nimport {computed, ref, watch} from 'vue'\nimport type {BTableLiteProps} from '../../types/ComponentProps'\nimport {\n  isTableField,\n  isTableItem,\n  type TableField,\n  type TableItem,\n  type TableRowEvent,\n  type TableRowThead,\n  type TableRowType,\n} from '../../types/TableTypes'\nimport BTableSimple from './BTableSimple.vue'\nimport BTbody from './BTbody.vue'\nimport BTd from './BTd.vue'\nimport BTfoot from './BTfoot.vue'\nimport BTh from './BTh.vue'\nimport BThead from './BThead.vue'\nimport BTr from './BTr.vue'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {get, pick} from '../../utils/object'\nimport {btableSimpleProps, getDataLabelAttr, getTableFieldHeadLabel} from '../../utils/tableUtils'\nimport {formatItem} from '../../utils/formatItem'\nimport {filterEvent} from '../../utils/filterEvent'\nimport {startCase} from '../../utils/stringUtils'\nimport type {LiteralUnion} from '../../types/LiteralUnion'\nimport {useId} from '../../composables/useId'\n\nconst _props = withDefaults(defineProps<BTableLiteProps<Items>>(), {\n  caption: undefined,\n  align: undefined,\n  fields: () => [],\n  footClone: false,\n  items: () => [],\n  labelStacked: false,\n  fieldColumnClass: undefined,\n  tbodyTrClass: undefined,\n  detailsTdClass: undefined,\n  headVariant: undefined,\n  headRowVariant: undefined,\n  footRowVariant: undefined,\n  footVariant: undefined,\n  modelValue: undefined,\n  primaryKey: undefined,\n  tbodyClass: undefined,\n  tbodyTrAttrs: undefined,\n  tfootClass: undefined,\n  tfootTrClass: undefined,\n  theadClass: undefined,\n  theadTrClass: undefined,\n  // BTableSimpleProps props\n  borderVariant: undefined,\n  tableClass: undefined,\n  variant: undefined,\n  bordered: undefined,\n  borderless: undefined,\n  captionTop: undefined,\n  dark: undefined,\n  hover: undefined,\n  id: undefined,\n  noBorderCollapse: undefined,\n  outlined: undefined,\n  fixed: undefined,\n  responsive: undefined,\n  stacked: undefined,\n  striped: undefined,\n  stripedColumns: undefined,\n  small: undefined,\n  stickyHeader: undefined,\n  // End BTableSimpleProps props\n})\nconst props = useDefaults(_props, 'BTableLite')\n\nconst emit = defineEmits<{\n  'head-clicked': [\n    key: string,\n    field: (typeof computedFields.value)[0],\n    event: MouseEvent,\n    isFooter: boolean,\n  ]\n  'row-clicked': TableRowEvent<Items>\n  'row-dblclicked': TableRowEvent<Items>\n  'row-contextmenu': TableRowEvent<Items>\n  'row-hovered': TableRowEvent<Items>\n  'row-unhovered': TableRowEvent<Items>\n  'row-middle-clicked': TableRowEvent<Items>\n}>()\n\nconst slots = defineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'thead-top'?: (props: {columns: number; fields: typeof computedFields.value}) => any\n  [key: `head(${string})`]: (props: {\n    label: string | undefined\n    column: LiteralUnion<keyof Items>\n    field: (typeof computedFields.value)[0]\n    isFoot: false\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  'thead-sub'?: (\n    props: {\n      items: readonly Items[]\n      fields: typeof computedFields.value\n      field: (typeof computedFields.value)[0]\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ) => any\n  'custom-body'?: (props: {\n    fields: typeof computedFields.value\n    items: readonly Items[]\n    columns: number\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'top-row'?: (props: {columns: number; fields: typeof computedFields.value}) => any\n  [key: `cell(${string})`]: (props: {\n    value: unknown\n    unformatted: unknown\n    index: number\n    item: Items\n    field: (typeof computedFields.value)[0]\n    items: readonly Items[]\n    toggleDetails: () => void\n    detailsShowing: boolean\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  'row-details'?: (props: {\n    item: Items\n    toggleDetails: () => void\n    fields: typeof computedFields.value\n    index: number\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'bottom-row'?: (props: {columns: number; fields: typeof computedFields.value}) => any\n  [key: `foot(${string})`]: (props: {\n    label: string | undefined\n    column: LiteralUnion<keyof Items>\n    field: (typeof computedFields.value)[0]\n    isFoot: true\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  'custom-foot'?: (props: {\n    fields: typeof computedFields.value\n    items: readonly Items[]\n    columns: number\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'table-caption'?: (props: Record<string, never>) => any\n}>()\n\nconst computedId = useId(() => props.id)\n\nconst generateDetailsItem = (item: TableItem): [object, boolean | undefined] => [\n  item,\n  item._showDetails,\n]\nconst detailsMap = ref(new WeakMap<object, boolean | undefined>())\nwatch(\n  () => props.items,\n  (items) => {\n    items.forEach((item) => {\n      if (!isTableItem(item)) return\n      detailsMap.value.set(...generateDetailsItem(item))\n    })\n  },\n  {deep: true, immediate: true}\n)\n\nconst computedTableClasses = computed(() => [\n  props.tableClass,\n  {\n    [`align-${props.align}`]: props.align !== undefined,\n  },\n])\n\nconst computedFields = computed<(TableField<Items> & {_noHeader?: true})[]>(() => {\n  if (!props.fields.length && props.items.length) {\n    const [firstItem] = props.items\n    if (firstItem && (isTableItem(firstItem) || Array.isArray(firstItem))) {\n      return Object.keys(firstItem).map((k) => {\n        const label = startCase(k)\n        return {\n          key: k,\n          label,\n          tdAttr: getDataLabelAttr(props, label),\n        }\n      })\n    }\n    // The items are primitives, so we just return a single empty field\n    // No header will be shown, as we don't know what to show\n    return [{key: '', _noHeader: true}]\n  }\n\n  return props.fields.map((f) => {\n    if (isTableField(f)) {\n      const label = f.label ?? startCase(f.key as string)\n      return {\n        ...(f as TableField<Items>),\n        tdAttr: {...getDataLabelAttr(props, label), ...f.tdAttr},\n      }\n    }\n    const label = startCase(f as string)\n    return {\n      key: f as string,\n      label,\n      tdAttr: getDataLabelAttr(props, label),\n    }\n  })\n})\nconst computedFieldsTotal = computed(() => computedFields.value.length)\nconst showComputedHeaders = computed(() => {\n  // We only hide the header if all fields have _noHeader set to true. Which would be our doing\n  // This usually happens under a circumstance of displaying an array of primitives\n  // Under any other circumstance, I'm not sure how this would apply\n  if (computedFieldsTotal.value > 0 && computedFields.value.every((el) => el._noHeader === true))\n    return false\n  return true\n})\n\nconst footerProps = computed(() => ({\n  variant: props.footVariant,\n  class: props.tfootClass,\n}))\n\nconst itemAttributes = (item: Items, fieldKey: string, attr?: unknown) => {\n  const val = get(item, fieldKey)\n  return attr && typeof attr === 'function' ? attr(val, fieldKey, item) : attr\n}\n\nconst callThAttr = (item: Items | null, field: TableField<Items>, type: TableRowThead) => {\n  const fieldKey = String(field.key)\n  const val = get(item, fieldKey)\n  return field.thAttr && typeof field.thAttr === 'function'\n    ? field.thAttr(val, fieldKey, item, type)\n    : field.thAttr\n}\n\nconst headerClicked = (field: TableField<Items>, event: Readonly<MouseEvent>, isFooter = false) => {\n  emit('head-clicked', field.key as string, field, event, isFooter)\n}\n\nconst toggleRowDetails = (tr: Items) => {\n  if (isTableItem(tr)) {\n    const prevValue = detailsMap.value.get(tr)\n    detailsMap.value.set(tr, !prevValue)\n    tr._showDetails = !prevValue\n  }\n}\n\nconst getFieldColumnClasses = (field: TableField) => [\n  field.class,\n  field.thClass,\n  {\n    'b-table-sticky-column': field.stickyColumn,\n  },\n  props.fieldColumnClass\n    ? typeof props.fieldColumnClass === 'function'\n      ? props.fieldColumnClass(field)\n      : props.fieldColumnClass\n    : null,\n]\n\nconst getFieldRowClasses = (field: Readonly<TableField>, tr: Items) => {\n  const val = get(tr, String(field.key))\n  return [\n    field.class,\n    typeof field.tdClass === 'function' ? field.tdClass(val, String(field.key), tr) : field.tdClass,\n    (isTableItem(tr) ? tr._cellVariants?.[field.key as string] : false)\n      ? `table-${(tr as TableItem)._cellVariants?.[field.key as string]}`\n      : null,\n    {\n      'b-table-sticky-column': field.stickyColumn,\n    },\n  ]\n}\n\nconst handleMiddleClick = (item: Items, itemIndex: number, event: MouseEvent) => {\n  if (event.button === 1 && !filterEvent(event)) {\n    emit('row-middle-clicked', item, itemIndex, event)\n  }\n}\nconst callTbodyTrAttrs = (item: Items | null, type: TableRowType) =>\n  props.tbodyTrAttrs\n    ? typeof props.tbodyTrAttrs === 'function'\n      ? props.tbodyTrAttrs(item, type)\n      : props.tbodyTrAttrs\n    : null\n\nconst getRowClasses = (item: Items | null, type: TableRowType) =>\n  props.tbodyTrClass\n    ? typeof props.tbodyTrClass === 'function'\n      ? props.tbodyTrClass(item, type)\n      : props.tbodyTrClass\n    : null\n\nconst generateTableRowId = (primaryKeyValue: string) =>\n  `${computedId.value}__row_${primaryKeyValue}`\n\nconst computedSimpleProps = computed(() => ({\n  ...pick(props, btableSimpleProps),\n  tableClass: computedTableClasses.value,\n  id: computedId.value,\n}))\n</script>\n","<template>\n  <!-- eslint-disable prettier/prettier -->\n  <BTableLite\n    v-bind=\"computedLiteProps\"\n    @head-clicked=\"onFieldHeadClick\"\n    @row-clicked=\"onRowClick\"\n    @row-dblclicked=\"\n      (row: Items, index: number, e: MouseEvent) => {\n        emit('row-dblclicked', row, index, e)\n      }\n    \"\n    @row-contextmenu=\"\n      (row: Items, index: number, e: MouseEvent) => {\n        emit('row-contextmenu', row, index, e)\n      }\n    \"\n    @row-hovered=\"\n      (row: Items, index: number, e: MouseEvent) => {\n        emit('row-hovered', row, index, e)\n      }\n    \"\n    @row-unhovered=\"\n      (row: Items, index: number, e: MouseEvent) => {\n        emit('row-unhovered', row, index, e)\n      }\n    \"\n    @row-middle-clicked=\"\n      (row: Items, index: number, e: MouseEvent) => {\n        emit('row-middle-clicked', row, index, e)\n      }\n    \"\n  >\n    <!-- eslint-enable prettier/prettier -->\n    <template v-if=\"slots['thead-top']\" #thead-top=\"scope\">\n      <slot\n        name=\"thead-top\"\n        v-bind=\"scope\"\n        :clear-selected=\"exposedSelectableUtilities.clearSelected\"\n        :select-all-rows=\"exposedSelectableUtilities.selectAllRows\"\n        :fields=\"computedFields\"\n      />\n    </template>\n    <template v-if=\"slots['thead-sub']\" #thead-sub=\"scope\">\n      <slot name=\"thead-sub\" v-bind=\"scope\" :fields=\"computedFields\" />\n    </template>\n    <template v-if=\"slots['top-row']\" #top-row=\"scope\">\n      <slot name=\"top-row\" v-bind=\"scope\" :fields=\"computedFields\" />\n    </template>\n    <template v-if=\"slots['row-details']\" #row-details=\"scope\">\n      <slot\n        name=\"row-details\"\n        v-bind=\"scope\"\n        :fields=\"computedFields\"\n        :select-row=\"(index = scope.index) => exposedSelectableUtilities.selectRow(index)\"\n        :unselect-row=\"(index = scope.index) => exposedSelectableUtilities.unselectRow(index)\"\n        :row-selected=\"exposedSelectableUtilities.isRowSelected(scope.index)\"\n      />\n    </template>\n    <template v-if=\"slots['bottom-row']\" #bottom-row=\"scope\">\n      <slot name=\"bottom-row\" v-bind=\"scope\" :fields=\"computedFields\" />\n    </template>\n    <template v-if=\"slots['custom-foot']\" #custom-foot=\"scope\">\n      <slot name=\"custom-foot\" v-bind=\"scope\" :fields=\"computedFields\" />\n    </template>\n    <template v-if=\"slots['table-caption']\" #table-caption>\n      <slot name=\"table-caption\" />\n    </template>\n    <template v-for=\"name in dynamicCellSlots\" #[name]=\"scope\">\n      <slot\n        :name\n        v-bind=\"scope\"\n        :select-row=\"(index = scope.index) => exposedSelectableUtilities.selectRow(index)\"\n        :unselect-row=\"(index = scope.index) => exposedSelectableUtilities.unselectRow(index)\"\n        :row-selected=\"exposedSelectableUtilities.isRowSelected(scope.index)\"\n      />\n    </template>\n    <template v-for=\"name in dynamicFootSlots\" #[name]=\"scope\">\n      <slot\n        :name\n        v-bind=\"scope\"\n        :select-all-rows=\"exposedSelectableUtilities.selectAllRows\"\n        :clear-selected=\"exposedSelectableUtilities.clearSelected\"\n      />\n    </template>\n\n    <template\n      v-for=\"field in computedFields\"\n      :key=\"field.key\"\n      #[`head(${String(field.key)})`]=\"scope\"\n    >\n      <slot\n        :name=\"\n          slots[`head(${String(field.key)})`]\n            ? (`head(${String(field.key)})` as 'head()')\n            : 'head()'\n        \"\n        v-bind=\"scope\"\n        :select-all-rows=\"exposedSelectableUtilities.selectAllRows\"\n        :clear-selected=\"exposedSelectableUtilities.clearSelected\"\n      >\n        {{ getTableFieldHeadLabel(field) }}\n      </slot>\n      <template v-if=\"isSortable && !!scope.field.sortable && props.noSortableIcon === false\">\n        <slot\n          v-if=\"sortByModel?.find((el) => el.key === scope.field.key)?.order === 'asc'\"\n          v-bind=\"scope\"\n          :name=\"\n            slots[`sortAsc(${String(scope.field.key)})`]\n              ? (`sortAsc(${String(scope.field.key)})` as 'sortAsc()')\n              : 'sortAsc()'\n          \"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            fill=\"currentColor\"\n            class=\"bi bi-arrow-up-short\"\n            viewBox=\"0 0 16 16\"\n            aria-hidden\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z\"\n            />\n          </svg>\n        </slot>\n        <slot\n          v-else-if=\"sortByModel?.find((el) => el.key === scope.field.key)?.order === 'desc'\"\n          v-bind=\"scope\"\n          :name=\"\n            slots[`sortDesc(${String(scope.field.key)})`]\n              ? (`sortDesc(${String(scope.field.key)})` as 'sortDesc()')\n              : 'sortDesc()'\n          \"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            fill=\"currentColor\"\n            class=\"bi bi-arrow-down-short\"\n            viewBox=\"0 0 16 16\"\n            aria-hidden\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4z\"\n            />\n          </svg>\n        </slot>\n        <slot\n          v-else\n          v-bind=\"scope\"\n          :name=\"\n            slots[`sortDefault(${String(scope.field.key)})`]\n              ? (`sortDefault(${String(scope.field.key)})` as 'sortDefault()')\n              : 'sortDefault()'\n          \"\n        >\n          <svg\n            :style=\"{opacity: 0.4}\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            fill=\"currentColor\"\n            class=\"bi bi-arrow-up-short\"\n            viewBox=\"0 0 16 16\"\n            aria-hidden\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z\"\n            />\n          </svg>\n        </slot>\n      </template>\n    </template>\n    <template #custom-body=\"scope\">\n      <BTr\n        v-if=\"busyModel && slots['table-busy']\"\n        class=\"b-table-busy-slot\"\n        :class=\"getBusyRowClasses\"\n      >\n        <BTd :colspan=\"scope.fields.length\">\n          <slot name=\"table-busy\" />\n        </BTd>\n      </BTr>\n\n      <BTr\n        v-else-if=\"props.showEmpty === true && computedItems.length === 0\"\n        class=\"b-table-empty-row\"\n      >\n        <BTd :colspan=\"computedFields.length\">\n          <div role=\"alert\" aria-live=\"polite\">\n            <div class=\"text-center my-2\">\n              <slot v-if=\"isFilterableTable\" name=\"empty-filtered\" v-bind=\"emptySlotScope\">\n                {{ props.emptyFilteredText }}\n              </slot>\n              <slot v-else name=\"empty\" v-bind=\"emptySlotScope\">\n                {{ props.emptyText }}\n              </slot>\n            </div>\n          </div>\n        </BTd>\n      </BTr>\n    </template>\n  </BTableLite>\n</template>\n\n<script setup lang=\"ts\" generic=\"Items\">\nimport {useToNumber} from '@vueuse/core'\nimport {computed, onMounted, type Ref, ref, watch} from 'vue'\nimport {formatItem} from '../../utils/formatItem'\nimport BTableLite from './BTableLite.vue'\nimport BTd from './BTd.vue'\nimport BTr from './BTr.vue'\nimport {\n  type BTableSortBy,\n  type BTableSortByOrder,\n  isTableField,\n  isTableItem,\n  type NoProviderTypes,\n  type TableField,\n  type TableFieldFormatter,\n  type TableFieldRaw,\n  type TableItem,\n  type TableRowEvent,\n  type TableRowType,\n  type TableStrictClassValue,\n} from '../../types/TableTypes'\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTableProps} from '../../types/ComponentProps'\nimport {get, pick, set} from '../../utils/object'\nimport {startCase} from '../../utils/stringUtils'\nimport type {LiteralUnion} from '../../types/LiteralUnion'\nimport {\n  btableLiteProps,\n  btableSimpleProps,\n  getDataLabelAttr,\n  getTableFieldHeadLabel,\n} from '../../utils/tableUtils'\nimport {useId} from '../../composables/useId'\n\nconst _props = withDefaults(\n  defineProps<Omit<BTableProps<Items>, 'sortBy' | 'busy' | 'selectedItems'>>(),\n  {\n    noSortableIcon: false,\n    perPage: Number.POSITIVE_INFINITY,\n    filter: undefined,\n    filterFunction: undefined,\n    mustSort: false,\n    filterable: undefined,\n    provider: undefined,\n    noProvider: undefined,\n    noProviderPaging: false,\n    noProviderSorting: false,\n    multisort: false,\n    noProviderFiltering: false,\n    noLocalSorting: false,\n    noSelectOnClick: false,\n    selectable: false,\n    stickySelect: false,\n    selectHead: true,\n    selectMode: 'multi',\n    selectionVariant: 'primary',\n    busyLoadingText: 'Loading...',\n    currentPage: 1,\n    // BTableLite props\n    items: () => [],\n    fields: () => [],\n    // All others use defaults\n    caption: undefined,\n    align: undefined,\n    footClone: undefined,\n    labelStacked: undefined,\n    showEmpty: false,\n    emptyText: 'There are no records to show',\n    emptyFilteredText: 'There are no records matching your request',\n    fieldColumnClass: undefined,\n    tbodyTrClass: undefined,\n    detailsTdClass: undefined,\n    headVariant: undefined,\n    headRowVariant: undefined,\n    footRowVariant: undefined,\n    footVariant: undefined,\n    modelValue: undefined,\n    primaryKey: undefined,\n    tbodyClass: undefined,\n    tfootClass: undefined,\n    tfootTrClass: undefined,\n    theadClass: undefined,\n    theadTrClass: undefined,\n    // End BTableLite props\n    // BTableSimple props\n    borderVariant: undefined,\n    variant: undefined,\n    bordered: undefined,\n    borderless: undefined,\n    captionTop: undefined,\n    dark: undefined,\n    hover: undefined,\n    id: undefined,\n    noBorderCollapse: undefined,\n    outlined: undefined,\n    fixed: undefined,\n    responsive: undefined,\n    stacked: undefined,\n    striped: undefined,\n    stripedColumns: undefined,\n    small: undefined,\n    stickyHeader: undefined,\n    // End BTableSimple props\n  }\n)\nconst props = useDefaults(_props, 'BTable')\n\nconst emit = defineEmits<{\n  'filtered': [value: Items[]]\n  'head-clicked': [\n    key: string,\n    field: (typeof computedFields.value)[0],\n    event: MouseEvent,\n    isFooter: boolean,\n  ]\n  'row-clicked': TableRowEvent<Items>\n  'row-dblclicked': TableRowEvent<Items>\n  'row-contextmenu': TableRowEvent<Items>\n  'row-hovered': TableRowEvent<Items>\n  'row-unhovered': TableRowEvent<Items>\n  'row-middle-clicked': TableRowEvent<Items>\n  'row-selected': [value: Items]\n  'row-unselected': [value: Items]\n  'sorted': [value: BTableSortBy<Items>]\n  'change': [value: Items[]]\n}>()\n\ntype SortSlotScope = {\n  label: string | undefined\n  column: LiteralUnion<keyof Items>\n  field: (typeof computedFields.value)[0]\n  isFoot: false\n}\n\nconst slots = defineSlots<{\n  // BTableLite\n  'thead-top'?: (props: {\n    columns: number\n    fields: typeof computedFields.value\n    selectAllRows: () => void\n    clearSelected: () => void\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  [key: `head(${string})`]: (props: {\n    label: string | undefined\n    column: LiteralUnion<keyof Items>\n    field: (typeof computedFields.value)[0]\n    isFoot: false\n    selectAllRows: () => void\n    clearSelected: () => void\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  'thead-sub'?: (\n    props: {\n      items: readonly Items[]\n      fields: typeof computedFields.value\n      field: (typeof computedFields.value)[0]\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'top-row'?: (props: {columns: number; fields: typeof computedFields.value}) => any\n  [key: `cell(${string})`]: (props: {\n    value: unknown\n    unformatted: unknown\n    index: number\n    item: Items\n    field: (typeof computedFields.value)[0]\n    items: readonly Items[]\n    toggleDetails: () => void\n    detailsShowing: boolean\n    rowSelected: boolean\n    selectRow: (index?: number) => void\n    unselectRow: (index?: number) => void\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  'row-details'?: (props: {\n    item: Items\n    toggleDetails: () => void\n    fields: typeof computedFields.value\n    index: number\n    rowSelected: boolean\n    selectRow: (index?: number) => void\n    unselectRow: (index?: number) => void\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'bottom-row'?: (props: {columns: number; fields: typeof computedFields.value}) => any\n\n  [key: `foot(${string})`]: (props: {\n    label: string | undefined\n    column: LiteralUnion<keyof Items>\n    field: (typeof computedFields.value)[0]\n    isFoot: true\n    selectAllRows: () => void\n    clearSelected: () => void\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  'custom-foot'?: (props: {\n    fields: typeof computedFields.value\n    items: readonly Items[]\n    columns: number\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  }) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'table-caption'?: (props: Record<string, never>) => any\n\n  // end btable slots\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: `sortAsc(${string})`]: (props: SortSlotScope) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: `sortDesc(${string})`]: (props: SortSlotScope) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: `sortDefault(${string})`]: (props: SortSlotScope) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'table-busy'?: (props: Record<string, never>) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'empty-filtered'?: (props: typeof emptySlotScope.value) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'empty'?: (props: typeof emptySlotScope.value) => any\n}>()\n\nconst dynamicCellSlots = computed(\n  () => Object.keys(slots).filter((key) => key.startsWith('cell(')) as 'cell()'[]\n)\nconst dynamicFootSlots = computed(\n  () => Object.keys(slots).filter((key) => key.startsWith('foot(')) as 'foot()'[]\n)\n\nconst sortByModel = defineModel<BTableProps<Items>['sortBy']>('sortBy', {\n  default: undefined,\n})\nconst busyModel = defineModel<Exclude<BTableProps<Items>['busy'], undefined>>('busy', {\n  default: false,\n})\nconst selectedItemsModel = defineModel<Exclude<BTableProps<Items>['selectedItems'], undefined>>(\n  'selectedItems',\n  {\n    default: () => [],\n  }\n)\n\nconst computedId = useId(() => props.id)\n\nconst selectedItemsToSet = computed({\n  get: () => new Set(selectedItemsModel.value),\n  set: (val) => {\n    selectedItemsModel.value = [...val]\n  },\n})\n\nwatch(selectedItemsToSet, (newValue, oldValue) => {\n  Array.from(oldValue)\n    .filter((item) => !newValue.has(item))\n    .forEach((item) => {\n      emit('row-unselected', item)\n    })\n  Array.from(newValue)\n    .filter((item) => !oldValue.has(item))\n    .forEach((item) => {\n      emit('row-selected', item)\n    })\n})\n/**\n * This is to avoid the issue of directly mutating the array structure and to properly trigger the computed setter.\n * The utils also conveniently emit the proper events after\n */\nconst selectedItemsSetUtilities = {\n  add: (item: Items) => {\n    const value = new Set(selectedItemsToSet.value)\n    value.add(item)\n    selectedItemsToSet.value = value\n  },\n  clear: () => {\n    selectedItemsToSet.value.forEach((item) => {\n      selectedItemsSetUtilities.delete(item)\n    })\n  },\n  delete: (item: Items) => {\n    const value = new Set(selectedItemsToSet.value)\n    if (props.primaryKey) {\n      const pkey: string = props.primaryKey\n      selectedItemsModel.value.forEach((v, i) => {\n        const selectedKey = get(v, pkey)\n        const itemKey = get(item, pkey)\n\n        if (!!selectedKey && !!itemKey && selectedKey === itemKey) {\n          value.delete(selectedItemsModel.value[i])\n        }\n      })\n    } else {\n      value.delete(item)\n    }\n    selectedItemsToSet.value = value\n  },\n  set: (items: Items[]) => {\n    selectedItemsToSet.value = new Set(items)\n  },\n  has: (item: Items) => {\n    if (!props.primaryKey) return selectedItemsToSet.value.has(item)\n\n    // Resolver for when we are using primary keys\n    const pkey: string = props.primaryKey\n    for (const selected of selectedItemsToSet.value) {\n      const selectedKey = get(selected, pkey)\n      const itemKey = get(item, pkey)\n\n      if (!!selectedKey && !!itemKey && selectedKey === itemKey) return true\n    }\n    return false\n  },\n} as const\n\n/**\n * Only stores data that is fetched when using the provider\n */\nconst internalItems: Ref<Items[]> = ref([])\n\nconst perPageNumber = useToNumber(() => props.perPage, {method: 'parseInt'})\nconst currentPageNumber = useToNumber(() => props.currentPage, {method: 'parseInt'})\n\nconst isFilterableTable = computed(() => !!props.filter)\nconst usesProvider = computed(() => props.provider !== undefined)\nconst isSelecting = computed(() => selectedItemsToSet.value.size > 0)\n\nconst isSortable = computed(\n  () =>\n    sortByModel.value !== undefined ||\n    props.fields.some(\n      (field) => typeof field === 'object' && field !== null && field.sortable === true\n    )\n)\n\nconst computedFields = computed<TableField<Items>[]>(() =>\n  props.fields.map((el) => {\n    if (!isTableField<Items>(el)) {\n      const label = startCase(el as string)\n      return {\n        key: el as string,\n        label,\n        tdAttr: getDataLabelAttr(props, label),\n      }\n    }\n\n    const value = sortByModel.value?.find((sb) => el.key === sb.key)\n    const sortValue =\n      isSortable.value === false\n        ? undefined\n        : value === undefined\n          ? 'none'\n          : value.order === 'desc'\n            ? 'descending'\n            : value.order === 'asc'\n              ? 'ascending'\n              : 'none'\n\n    return {\n      ...(el as TableField<Items>),\n      thAttr: {\n        'aria-sort': sortValue,\n        ...el.thAttr,\n      },\n    }\n  })\n)\n\nconst tableClasses = computed(() => ({\n  'b-table-busy': busyModel.value,\n  'b-table-selectable': props.selectable,\n  'user-select-none': props.selectable && isSelecting.value,\n}))\n\nconst getBusyRowClasses = computed(() => [\n  props.tbodyTrClass\n    ? typeof props.tbodyTrClass === 'function'\n      ? props.tbodyTrClass(null, 'table-busy')\n      : props.tbodyTrClass\n    : null,\n])\nconst getFieldColumnClasses = (field: TableField) => [\n  {\n    'b-table-sortable-column': isSortable.value && field.sortable,\n  },\n]\n// TODO this class has issues if the table has a variant already applied\n// Also the row should technically have aria-selected . Both things could probably just use a function with tbodyTrAttrs\n// But functional tbodyTrAttrs are not supported yet\n// Also the stuff for resolving functions could probably be made a util\nconst getRowClasses = (item: Items | null, type: TableRowType): TableStrictClassValue => [\n  {\n    [`selected table-${props.selectionVariant}`]:\n      props.selectable && !!item && selectedItemsSetUtilities.has(item),\n  },\n  props.tbodyTrClass\n    ? typeof props.tbodyTrClass === 'function'\n      ? props.tbodyTrClass(item, type)\n      : props.tbodyTrClass\n    : null,\n]\n\nconst getFormatter = (value: TableField<Items>): TableFieldFormatter<Items> | undefined =>\n  typeof value.sortByFormatted === 'function' ? value.sortByFormatted : value.formatter\n\nconst computedItems = computed<Items[]>(() => {\n  // \"undefined\" values are set by us, we do this so we dont wipe out the comparer\n  const sortByItems = sortByModel.value?.filter((el) => !!el.order)\n\n  const mapItem = (item: Items): Items => {\n    if (\n      typeof item === 'object' &&\n      item !== null &&\n      Object.keys(item).some((key) => key.includes('.'))\n    ) {\n      let newItem: Partial<Items> = {}\n      for (const key in item) {\n        if (key.includes('.')) {\n          newItem = set(newItem, key, item[key])\n        } else {\n          newItem[key] = item[key]\n        }\n      }\n      return newItem as Items // This should be an items at this point\n    }\n    return item\n  }\n\n  const filterItem = (item: Items): boolean => {\n    if (!isTableItem(item)) return true\n\n    return Object.entries(item).some(([key, val]) => {\n      if (\n        val === null ||\n        val === undefined ||\n        key[0] === '_' ||\n        (!props.filterable?.includes(key) && !!props.filterable?.length)\n      )\n        return false\n\n      if (props.filterFunction && typeof props.filterFunction === 'function') {\n        return props.filterFunction(item, props.filter)\n      }\n\n      const realVal = (): string => {\n        const filterField = computedFields.value.find((el) => {\n          if (isTableField<Items>(el)) return el.key === key\n          return false\n        })\n        if (isTableField<Items>(filterField) && !!filterField.filterByFormatted) {\n          const formatter = getFormatter(filterField)\n          if (formatter) {\n            return String(formatter(val, String(filterField.key), item))\n          }\n        }\n        return typeof val === 'object' ? JSON.stringify(Object.values(val)) : val.toString()\n      }\n      const itemValue: string = realVal()\n      return itemValue.toLowerCase().includes(props.filter?.toLowerCase() ?? '')\n    })\n  }\n\n  const mappedItems = (usesProvider.value ? internalItems.value : props.items).reduce(\n    (acc, val) => {\n      const item = mapItem(val)\n      const shouldFilter =\n        isFilterableTable.value && (!usesProvider.value || props.noProviderFiltering)\n\n      if (!shouldFilter || filterItem(item)) acc.push(item)\n\n      return acc\n    },\n    [] as Items[]\n  )\n\n  if (\n    sortByItems?.length &&\n    ((isSortable.value === true && !usesProvider.value && !props.noLocalSorting) ||\n      (isSortable.value === true && usesProvider.value && props.noProviderSorting))\n  ) {\n    // Multi-sort\n    return mappedItems.sort((a, b) => {\n      for (let i = 0; i < sortByItems.length; i++) {\n        const {key, comparer, order} = sortByItems[i]\n        const getStringValue = (ob: Items): string => {\n          if (!isTableItem(ob)) return String(ob)\n\n          const sortField = computedFields.value.find((el) => {\n            if (isTableField<Items>(el)) return el.key === key\n\n            return false\n          })\n          const val = get(ob, key as keyof TableItem)\n          if (isTableField<Items>(sortField) && !!sortField.sortByFormatted) {\n            const formatter = getFormatter(sortField)\n            if (formatter) {\n              return String(formatItem(ob, String(sortField.key), formatter))\n            }\n          }\n          return typeof val === 'object' && val !== null\n            ? JSON.stringify(val)\n            : (val?.toString() ?? '')\n        }\n\n        const comparison = comparer\n          ? comparer(a, b, key)\n          : getStringValue(a).localeCompare(getStringValue(b), undefined, {numeric: true})\n\n        if (comparison !== 0) {\n          return order === 'asc' ? comparison : -comparison\n        }\n      }\n      return 0 // items are equal\n    })\n  }\n\n  return mappedItems\n})\n\nconst emptySlotScope = computed(() => ({\n  emptyFilteredText: props.emptyFilteredText,\n  emptyText: props.emptyText,\n  fields: computedFields.value,\n  items: computedItems.value,\n}))\n\nconst computedDisplayItems = computed<Items[]>(() => {\n  if (Number.isNaN(perPageNumber.value) || (usesProvider.value && !props.noProviderPaging)) {\n    return computedItems.value\n  }\n\n  return computedItems.value.slice(\n    (currentPageNumber.value - 1) * (perPageNumber.value || Number.POSITIVE_INFINITY),\n    currentPageNumber.value * (perPageNumber.value || Number.POSITIVE_INFINITY)\n  )\n})\n\nwatch(computedDisplayItems, (v) => {\n  emit('change', v)\n})\n\nconst handleRowSelection = (\n  row: Items,\n  index: number,\n  shiftClicked = false,\n  ctrlClicked = false,\n  metaClicked = false\n) => {\n  if (!props.selectable) return\n\n  if (props.selectMode === 'single' || props.selectMode === 'multi') {\n    // Do nothing when these items are held\n    if (shiftClicked || ctrlClicked) return\n    // Delete if item is in\n    if (selectedItemsSetUtilities.has(row)) {\n      selectedItemsSetUtilities.delete(row)\n    } else {\n      if (props.selectMode === 'single') {\n        selectedItemsSetUtilities.set([row])\n      } else {\n        selectedItemsSetUtilities.add(row)\n      }\n    }\n  } else {\n    if (ctrlClicked || metaClicked) {\n      // Delete if in the object\n      if (selectedItemsSetUtilities.has(row)) {\n        selectedItemsSetUtilities.delete(row)\n        // Otherwise add. Functions similarly to 'multi' at this point\n      } else {\n        selectedItemsSetUtilities.add(row)\n      }\n      // This is where range is different, due to the difference in shift\n    } else if (shiftClicked) {\n      const lastSelectedItem = [...selectedItemsToSet.value].pop()\n      const lastSelectedIndex = computedItems.value.findIndex((i) => i === lastSelectedItem)\n      const selectStartIndex = Math.min(lastSelectedIndex, index)\n      const selectEndIndex = Math.max(lastSelectedIndex, index)\n      const items = computedItems.value.slice(selectStartIndex, selectEndIndex + 1)\n      selectedItemsSetUtilities.set(items)\n      // If nothing is being held, then we just behave like it's single mode\n    } else {\n      selectedItemsSetUtilities.set([row])\n    }\n  }\n}\n\nconst onRowClick = (row: Items, index: number, e: MouseEvent) => {\n  if (props.noSelectOnClick === false) {\n    handleRowSelection(row, index, e.shiftKey, e.ctrlKey, e.metaKey)\n  }\n  emit('row-clicked', row, index, e)\n}\n\nconst handleFieldSorting = (field: TableField<Items>) => {\n  if (!isSortable.value) return\n\n  const fieldKey = typeof field === 'object' && field !== null ? field.key : field\n  const fieldSortable = typeof field === 'object' && field !== null ? field.sortable : false\n\n  if (!(isSortable.value === true && fieldSortable === true)) return\n\n  const resolveOrder = (val: BTableSortByOrder): BTableSortByOrder | undefined => {\n    if (val === 'asc') return 'desc'\n    if (val === undefined) return 'asc'\n    if (\n      props.mustSort === true ||\n      (Array.isArray(props.mustSort) && props.mustSort.includes(fieldKey as string))\n    )\n      return 'asc'\n    return undefined\n  }\n\n  const index = sortByModel.value?.findIndex((el) => el.key === fieldKey) ?? -1\n  const originalValue = sortByModel.value?.[index]\n  const updatedValue: BTableSortBy<Items> =\n    // If value is new, we default to ascending\n    // Otherwise we make a temp copy of the value\n    index === -1 || !originalValue ? {key: fieldKey as string, order: 'asc'} : {...originalValue}\n\n  /**\n   * @returns the updated value to emit for sorted\n   */\n  const handleMultiSort = (): BTableSortBy<Items> => {\n    sortByModel.value = sortByModel.value ?? []\n    const val = updatedValue\n    if (index === -1) {\n      sortByModel.value.push(val)\n    } else {\n      val.order = resolveOrder(val.order)\n      sortByModel.value.splice(index, 1, val)\n    }\n    return val\n  }\n\n  /**\n   * @returns the updated value to emit for sorted\n   */\n  const handleSingleSort = (): BTableSortBy<Items> => {\n    const val = {\n      ...updatedValue,\n      order: index === -1 ? updatedValue.order : resolveOrder(updatedValue.order),\n    }\n    const tmp = (sortByModel.value || []).map<BTableSortBy<Items>>((e) => ({\n      ...e,\n      order: undefined,\n    }))\n    if (index === -1) {\n      tmp.push(val)\n    } else {\n      tmp[index] = val\n    }\n    sortByModel.value = tmp\n    return val\n  }\n\n  // Then emit the returned updated value\n  emit('sorted', props.multisort === true ? handleMultiSort() : handleSingleSort())\n}\n\nconst onFieldHeadClick = (\n  fieldKey: string,\n  field: TableField<Items>,\n  event: Readonly<MouseEvent>,\n  isFooter = false\n) => {\n  emit('head-clicked', fieldKey, field, event, isFooter)\n  handleFieldSorting(field)\n}\n\nconst callItemsProvider = async () => {\n  if (!usesProvider.value || props.provider === undefined || busyModel.value) return\n  busyModel.value = true\n  const response = props.provider({\n    currentPage: currentPageNumber.value,\n    filter: props.filter,\n    sortBy: sortByModel.value,\n    perPage: perPageNumber.value,\n  })\n  try {\n    const items = response instanceof Promise ? await response : response\n\n    if (items === undefined) return\n    internalItems.value = items\n  } finally {\n    // Potential race condition could occur if the user explicitly sets the busy value to a different value while the response promise is executing\n    // which would have been the users choice.\n    // eslint-disable-next-line require-atomic-updates\n    busyModel.value = false\n  }\n}\n\nconst providerPropsWatch = async (prop: string, val: unknown, oldVal: unknown) => {\n  if (val === oldVal) return\n\n  //stop provide when paging\n  const inNoProvider = (key: NoProviderTypes) => props.noProvider?.includes(key) === true\n  const noProvideWhenPaging =\n    (prop === 'currentPage' || prop === 'perPage') &&\n    (inNoProvider('paging') || props.noProviderPaging === true)\n  const noProvideWhenFiltering =\n    prop === 'filter' && (inNoProvider('filtering') || props.noProviderFiltering === true)\n  const noProvideWhenSorting =\n    (prop === 'sortBy' || prop === 'sortDesc') &&\n    (inNoProvider('sorting') || props.noProviderSorting === true)\n\n  if (noProvideWhenPaging || noProvideWhenFiltering || noProvideWhenSorting) return\n\n  if (usesProvider.value === true) {\n    await callItemsProvider()\n  }\n\n  if (!(prop === 'currentPage' || prop === 'perPage')) {\n    emit('filtered', [...computedItems.value])\n  }\n}\n\nwatch(\n  () => props.filter,\n  (filter, oldFilter) => {\n    providerPropsWatch('filter', filter, oldFilter)\n\n    if (filter === oldFilter || usesProvider.value) return\n    if (!filter) {\n      emit('filtered', [...computedItems.value])\n    }\n  }\n)\nwatch(currentPageNumber, (val, oldVal) => {\n  providerPropsWatch('currentPage', val, oldVal)\n})\nwatch(perPageNumber, (val, oldVal) => {\n  providerPropsWatch('perPage', val, oldVal)\n})\nwatch(\n  sortByModel,\n  (val, oldVal) => {\n    providerPropsWatch('sortBy', val, oldVal)\n  },\n  {deep: true}\n)\n\nwatch(\n  () => props.provider,\n  (newValue) => {\n    // Reset the internal values if the provider stops getting used\n    if (newValue === undefined) {\n      internalItems.value = []\n      return\n    }\n    // Otherwise we should refresh the table on such a change\n    callItemsProvider()\n  }\n)\n\nonMounted(callItemsProvider)\n\nconst exposedSelectableUtilities = {\n  clearSelected: () => {\n    if (!props.selectable) return\n    selectedItemsSetUtilities.clear()\n  },\n  selectAllRows: () => {\n    if (!props.selectable || props.selectMode === 'single') return\n    selectedItemsToSet.value = new Set(computedItems.value)\n  },\n  selectRow: (index: number) => {\n    if (!props.selectable) return\n    const item = computedItems.value[index]\n    if (!item || selectedItemsSetUtilities.has(item)) return\n    if (props.selectMode === 'single') {\n      selectedItemsSetUtilities.set([item])\n    } else {\n      selectedItemsSetUtilities.add(item)\n    }\n  },\n  unselectRow: (index: number) => {\n    if (!props.selectable) return\n    const item = computedItems.value[index]\n    if (!item || !selectedItemsSetUtilities.has(item)) return\n    selectedItemsSetUtilities.delete(item)\n  },\n  isRowSelected: (index: number) => {\n    if (!props.selectable) return false\n    const item = computedItems.value[index]\n    return selectedItemsSetUtilities.has(item)\n  },\n} as const\n\nconst computedLiteProps = computed(() => ({\n  ...pick(props, [...btableLiteProps, ...btableSimpleProps]),\n  tableAttrs: {\n    ariaBusy: busyModel.value,\n  },\n  items: computedDisplayItems.value,\n  fields: computedFields.value as TableFieldRaw<Items>[],\n  tableClass: tableClasses.value,\n  tbodyTrClass: getRowClasses,\n  fieldColumnClass: getFieldColumnClasses,\n  id: computedId.value,\n}))\n\ndefineExpose({\n  // The row selection methods are really for compat. Users should probably use the v-model though\n  ...exposedSelectableUtilities,\n  items: computedItems,\n  refresh: callItemsProvider,\n})\n</script>\n"],"names":["formatItem","item","fieldKey","formatter","val","get","isTableItem","value","isTableField","_props","__props","props","useDefaults","computedClasses","computed","variant","stickyColumn","scope","colspan","rowspan","getTableFieldHeadLabel","field","titleCase","label","key","btableSimpleProps","Object","freeze","keys","bordered","borderless","borderVariant","captionTop","dark","fixed","hover","id","noBorderCollapse","outlined","responsive","small","stacked","stickyHeader","striped","stripedColumns","tableAttrs","tableClass","btableLiteProps","align","caption","detailsTdClass","fieldColumnClass","fields","footClone","footRowVariant","footVariant","headRowVariant","headVariant","items","labelStacked","modelValue","primaryKey","tbodyClass","tbodyTrAttrs","tbodyTrClass","tfootClass","tfootTrClass","theadClass","theadTrClass","getDataLabelAttr","TABLE_TAG_NAMES","eventFilter","join","filterEvent","event","target","el","disabled","indexOf","tagName","closest","labelFor","getAttribute","input","document","getElementById","querySelector","matches","emit","__emit","slots","_useSlots","computedId","useId","detailsMap","ref","WeakMap","vue","watch","forEach","set","_showDetails","generateDetailsItem","deep","immediate","computedTableClasses","computedFields","length","firstItem","Array","isArray","map","k","startCase","tdAttr","_noHeader","f","computedFieldsTotal","showComputedHeaders","every","footerProps","class","callThAttr","type","String","thAttr","headerClicked","isFooter","toggleRowDetails","tr","prevValue","getFieldColumnClasses","thClass","getFieldRowClasses","tdClass","_a","_cellVariants","_b","callTbodyTrAttrs","getRowClasses","computedSimpleProps","pick","primaryKeyValue","itemIndex","button","attr","dynamicCellSlots","filter","startsWith","dynamicFootSlots","sortByModel","_useModel","busyModel","selectedItemsModel","useModel","selectedItemsToSet","Set","newValue","oldValue","from","has","selectedItemsSetUtilities","add","clear","delete","pkey","v","i","selectedKey","itemKey","selected","internalItems","perPageNumber","useToNumber","perPage","method","currentPageNumber","currentPage","isFilterableTable","usesProvider","provider","isSelecting","size","isSortable","some","sortable","find","sb","sortValue","order","tableClasses","selectable","getBusyRowClasses","selectionVariant","getFormatter","sortByFormatted","computedItems","sortByItems","mappedItems","reduce","acc","includes","newItem","mapItem","noProviderFiltering","entries","filterable","filterFunction","filterField","filterByFormatted","JSON","stringify","values","toString","realVal","toLowerCase","_c","filterItem","push","noLocalSorting","noProviderSorting","sort","a","b","comparer","getStringValue","ob","sortField","comparison","localeCompare","numeric","emptySlotScope","emptyFilteredText","emptyText","computedDisplayItems","Number","isNaN","noProviderPaging","slice","POSITIVE_INFINITY","onRowClick","row","index","e","noSelectOnClick","shiftClicked","ctrlClicked","metaClicked","selectMode","lastSelectedItem","pop","lastSelectedIndex","findIndex","selectStartIndex","Math","min","selectEndIndex","max","handleRowSelection","shiftKey","ctrlKey","metaKey","onFieldHeadClick","fieldSortable","resolveOrder","mustSort","originalValue","updatedValue","multisort","splice","handleMultiSort","tmp","handleSingleSort","handleFieldSorting","callItemsProvider","async","response","sortBy","Promise","providerPropsWatch","prop","oldVal","inNoProvider","noProvider","noProvideWhenPaging","noProvideWhenFiltering","noProvideWhenSorting","oldFilter","onMounted","exposedSelectableUtilities","clearSelected","selectAllRows","selectRow","unselectRow","isRowSelected","computedLiteProps","ariaBusy","__expose","refresh"],"mappings":"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"}