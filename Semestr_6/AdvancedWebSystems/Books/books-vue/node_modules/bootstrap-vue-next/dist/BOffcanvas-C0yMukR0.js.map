{"version":3,"file":"BOffcanvas-C0yMukR0.js","sources":["../src/components/BOffcanvas/BOffcanvas.vue"],"sourcesContent":["<template>\n  <ConditionalTeleport\n    :to=\"props.teleportTo\"\n    :disabled=\"props.teleportDisabled || isOpenByBreakpoint\"\n  >\n    <Transition\n      v-if=\"renderRef || contentShowing || isOpenByBreakpoint\"\n      v-bind=\"transitionProps\"\n      :appear=\"modelValue || props.visible\"\n    >\n      <div\n        v-show=\"\n          (showRef && ((backdropReady && props.backdropFirst) || !props.backdropFirst)) ||\n          isOpenByBreakpoint\n        \"\n        :id=\"computedId\"\n        ref=\"_element\"\n        aria-modal=\"true\"\n        role=\"dialog\"\n        :class=\"computedClasses\"\n        :style=\"computedStyles\"\n        tabindex=\"-1\"\n        :aria-labelledby=\"`${computedId}-offcanvas-label`\"\n        data-bs-backdrop=\"false\"\n        v-bind=\"$attrs\"\n      >\n        <template v-if=\"contentShowing || isOpenByBreakpoint\">\n          <div v-if=\"!props.noHeader\" class=\"offcanvas-header\" :class=\"props.headerClass\">\n            <slot name=\"header\" v-bind=\"sharedSlots\">\n              <h5 :id=\"`${computedId}-offcanvas-label`\" class=\"offcanvas-title\">\n                <slot name=\"title\" v-bind=\"sharedSlots\">\n                  {{ props.title }}\n                </slot>\n              </h5>\n              <template v-if=\"!props.noHeaderClose\">\n                <BButton v-if=\"hasHeaderCloseSlot\" v-bind=\"headerCloseAttrs\" @click=\"hide('close')\">\n                  <slot name=\"header-close\" />\n                </BButton>\n                <BCloseButton\n                  v-else\n                  :aria-label=\"props.headerCloseLabel\"\n                  v-bind=\"headerCloseAttrs\"\n                  @click=\"hide('close')\"\n                />\n              </template>\n            </slot>\n          </div>\n          <div class=\"offcanvas-body\" :class=\"props.bodyClass\" v-bind=\"props.bodyAttrs\">\n            <slot v-bind=\"sharedSlots\" />\n          </div>\n          <div v-if=\"hasFooterSlot\" :class=\"props.footerClass\">\n            <slot name=\"footer\" v-bind=\"sharedSlots\" />\n          </div>\n        </template>\n        <div\n          v-if=\"needsFallback\"\n          ref=\"_fallbackFocusElement\"\n          :class=\"fallbackClassSelector\"\n          tabindex=\"0\"\n          style=\"width: 0; height: 0; overflow: hidden\"\n        />\n      </div>\n    </Transition>\n    <slot v-if=\"!props.noBackdrop\" name=\"backdrop\" v-bind=\"sharedSlots\">\n      <Transition v-if=\"renderBackdropRef\" v-bind=\"backdropTransitionProps\">\n        <div\n          v-show=\"showBackdrop\"\n          class=\"offcanvas-backdrop\"\n          :class=\"{\n            fade: !computedNoAnimation,\n            show: backdropVisible || computedNoAnimation,\n          }\"\n          @click=\"hide('backdrop')\"\n        />\n      </Transition>\n    </slot>\n  </ConditionalTeleport>\n</template>\n\n<script setup lang=\"ts\">\nimport {breakpointsBootstrapV5, onKeyStroke, useBreakpoints, useFocus} from '@vueuse/core'\nimport {useActivatedFocusTrap} from '../../composables/useActivatedFocusTrap'\nimport {computed, type EmitFn, nextTick, onMounted, ref, useTemplateRef, watch} from 'vue'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport type {BOffcanvasProps} from '../../types/ComponentProps'\nimport {BvTriggerableEvent} from '../../utils'\nimport BButton from '../BButton/BButton.vue'\nimport BCloseButton from '../BButton/BCloseButton.vue'\nimport ConditionalTeleport from '../ConditionalTeleport.vue'\nimport {useSafeScrollLock} from '../../composables/useSafeScrollLock'\nimport {isEmptySlot} from '../../utils/dom'\nimport {type showHideEmits, useShowHide} from '../../composables/useShowHide'\nimport type {Placement} from '../../types/Alignment'\n\n// TODO once the responsive stuff may be implemented correctly,\n// What needs to occur is a fixing of the \"body scrolling\".\n// If the offcanvas is on the screen on a large screen, body scrolling is not disabled\n// Even though the modelValue is true\n// When it's a small screen and close, it works, as normal,\n// But then when it opens up on a small screen, it must disable again\n// This is implemented on Layout.vue, but is not officially supported.\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst _props = withDefaults(defineProps<Omit<BOffcanvasProps, 'modelValue'>>(), {\n  backdropFirst: false,\n  bodyAttrs: undefined,\n  bodyClass: undefined,\n  bodyScrolling: false,\n  footerClass: undefined,\n  headerClass: undefined,\n  headerCloseClass: undefined,\n  headerCloseLabel: 'Close',\n  headerCloseVariant: 'secondary',\n  id: undefined,\n  initialAnimation: false,\n  lazy: false,\n  noAnimation: false,\n  noBackdrop: false,\n  noCloseOnBackdrop: false,\n  noCloseOnEsc: false,\n  noTrap: false,\n  noFocus: false,\n  noHeader: false,\n  noHeaderClose: false,\n  unmountLazy: false,\n  placement: 'start',\n  shadow: false,\n  teleportDisabled: false,\n  teleportTo: 'body',\n  title: undefined,\n  show: false,\n  width: undefined,\n  visible: false,\n})\nconst props = useDefaults(_props, 'BOffcanvas')\n\nconst emit = defineEmits<\n  {\n    close: [value: BvTriggerableEvent]\n    esc: [value: BvTriggerableEvent]\n    backdrop: [value: BvTriggerableEvent]\n    breakpoint: [value: BvTriggerableEvent, opened: boolean]\n  } & showHideEmits\n>()\n\ntype SharedSlotsData = {\n  visible: boolean\n  placement: Placement\n  hide: (trigger?: string) => void\n}\n\nconst slots = defineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'backdrop'?: (props: SharedSlotsData) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'default'?: (props: SharedSlotsData) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'footer'?: (props: SharedSlotsData) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'header'?: (props: SharedSlotsData) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'header-close'?: (props: Record<string, never>) => any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  'title'?: (props: SharedSlotsData) => any\n}>()\n\nconst modelValue = defineModel<Exclude<BOffcanvasProps['modelValue'], undefined>>({\n  default: false,\n})\n\nconst computedId = useId(() => props.id, 'offcanvas')\n\nconst element = useTemplateRef<HTMLElement>('_element')\nconst fallbackFocusElement = useTemplateRef<HTMLElement>('_fallbackFocusElement')\n\nconst onAfterEnter = () => {\n  nextTick(() => {\n    if (props.noFocus === false && !isOpenByBreakpoint.value) {\n      focused.value = true\n    }\n  })\n}\n\nconst {\n  showRef,\n  renderRef,\n  renderBackdropRef,\n  hide,\n  show,\n  toggle,\n  computedNoAnimation,\n  contentShowing,\n  transitionProps,\n  backdropReady,\n  backdropTransitionProps,\n  backdropVisible,\n  isVisible,\n  buildTriggerableEvent,\n  localNoAnimation,\n  isLeaving,\n  trapActive,\n} = useShowHide(modelValue, props, emit as EmitFn, element, computedId, {\n  transitionProps: {\n    onAfterEnter,\n    enterToClass: 'showing',\n    leaveToClass: 'hiding',\n    enterActiveClass: '',\n    leaveActiveClass: '',\n    enterFromClass: '',\n    leaveFromClass: '',\n  },\n})\n\nconst breakpoints = useBreakpoints(breakpointsBootstrapV5)\nconst smallerOrEqualToBreakpoint = breakpoints.smallerOrEqual(() => props.responsive ?? 'xs')\nconst isOpenByBreakpoint = ref(props.responsive !== undefined && !smallerOrEqualToBreakpoint.value)\nonMounted(() => {\n  if (props.responsive !== undefined)\n    emit('breakpoint', buildTriggerableEvent('breakpoint'), isOpenByBreakpoint.value)\n})\n\nuseSafeScrollLock(showRef, () => props.bodyScrolling || isOpenByBreakpoint.value)\n\nonKeyStroke(\n  'Escape',\n  () => {\n    hide('esc')\n  },\n  {target: element}\n)\n\nconst {focused} = useFocus(element, {\n  initialValue: modelValue.value && props.noFocus === false && !isOpenByBreakpoint.value,\n})\n\nconst fallbackClassSelector = 'offcanvas-fallback-focus'\n\nconst {needsFallback} = useActivatedFocusTrap({\n  element,\n  isActive: trapActive,\n  noTrap: () => props.noTrap || isOpenByBreakpoint.value,\n  fallbackFocus: {\n    classSelector: fallbackClassSelector,\n    ref: fallbackFocusElement,\n  },\n})\n\nconst showBackdrop = computed(\n  () =>\n    (props.responsive === undefined || !isOpenByBreakpoint.value) &&\n    props.noBackdrop === false &&\n    (showRef.value === true ||\n      (isLeaving.value && props.backdropFirst && !computedNoAnimation.value))\n)\n\nconst hasHeaderCloseSlot = computed(() => !isEmptySlot(slots['header-close']))\nconst headerCloseClasses = computed(() => [\n  {'text-reset': !hasHeaderCloseSlot.value},\n  props.headerCloseClass,\n])\nconst headerCloseAttrs = computed(() => ({\n  variant: hasHeaderCloseSlot.value ? props.headerCloseVariant : undefined,\n  class: headerCloseClasses.value,\n}))\n\nconst hasFooterSlot = computed(() => !isEmptySlot(slots.footer))\nconst computedClasses = computed(() => [\n  props.responsive === undefined ? 'offcanvas' : `offcanvas-${props.responsive}`,\n  `offcanvas-${props.placement}`,\n  {\n    'show': isVisible.value,\n    [`shadow-${props.shadow}`]: !!props.shadow,\n    'no-transition': computedNoAnimation.value,\n  },\n])\n\nconst computedStyles = computed(() => ({\n  width: props.width,\n}))\n\nconst sharedSlots = computed<SharedSlotsData>(() => ({\n  visible: showRef.value,\n  placement: props.placement,\n  hide,\n}))\n\nwatch(smallerOrEqualToBreakpoint, (newValue) => {\n  if (props.responsive === undefined) return\n  if (newValue === true) {\n    const opened = false\n    localNoAnimation.value = true\n    requestAnimationFrame(() => {\n      isOpenByBreakpoint.value = opened\n    })\n    emit('breakpoint', buildTriggerableEvent('breakpoint'), opened)\n    emit('hide', buildTriggerableEvent('hide'))\n  } else {\n    const opened = true\n    localNoAnimation.value = true\n    requestAnimationFrame(() => {\n      isOpenByBreakpoint.value = opened\n    })\n    emit('breakpoint', buildTriggerableEvent('breakpoint'), opened)\n    emit('show', buildTriggerableEvent('show'))\n  }\n})\n\ndefineExpose({\n  hide,\n  show,\n  toggle,\n  isOpenByBreakpoint,\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.no-transition {\n  transition: none !important;\n}\n</style>\n"],"names":["fallbackClassSelector","_props","__props","props","useDefaults","emit","__emit","slots","_useSlots","modelValue","_useModel","computedId","useId","id","element","useTemplateRef","fallbackFocusElement","showRef","renderRef","renderBackdropRef","hide","show","toggle","computedNoAnimation","contentShowing","transitionProps","backdropReady","backdropTransitionProps","backdropVisible","isVisible","buildTriggerableEvent","localNoAnimation","isLeaving","trapActive","useShowHide","onAfterEnter","nextTick","noFocus","isOpenByBreakpoint","value","focused","enterToClass","leaveToClass","enterActiveClass","leaveActiveClass","enterFromClass","leaveFromClass","smallerOrEqualToBreakpoint","useBreakpoints","breakpointsBootstrapV5","smallerOrEqual","responsive","ref","onMounted","useSafeScrollLock","bodyScrolling","index","onKeyStroke","target","useFocus","initialValue","needsFallback","useActivatedFocusTrap","isActive","noTrap","fallbackFocus","classSelector","showBackdrop","computed","noBackdrop","backdropFirst","hasHeaderCloseSlot","isEmptySlot","headerCloseClasses","headerCloseClass","headerCloseAttrs","variant","headerCloseVariant","class","hasFooterSlot","footer","computedClasses","placement","shadow","computedStyles","width","sharedSlots","visible","newValue","opened","requestAnimationFrame","__expose"],"mappings":"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"}