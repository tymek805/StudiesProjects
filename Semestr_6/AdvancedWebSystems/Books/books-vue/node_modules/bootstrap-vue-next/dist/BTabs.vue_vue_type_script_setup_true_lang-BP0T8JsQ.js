"use strict";const e=require("vue"),a=require("./useId-BOa4n5pr.js"),l=require("./useDefaults-_waRUo1X.js"),t=require("./keys-C2BcfuxJ.js"),i=require("./classes-CXBJXuVd.js"),n=require("./useAlignment-BTUJZ_9x.js"),o=require("./index-DSoA9-GW.js"),d=require("./dom-Dzr6gmPm.js"),u=e.defineComponent({inheritAttrs:!1,__name:"BTab",props:e.mergeModels({buttonId:{default:void 0},disabled:{type:Boolean,default:!1},id:{default:void 0},lazy:{type:Boolean,default:void 0},lazyOnce:{type:Boolean,default:void 0},noBody:{type:Boolean,default:!1},tag:{default:"div"},title:{default:void 0},titleItemClass:{default:void 0},titleLinkAttrs:{default:void 0},titleLinkClass:{default:void 0}},{active:{type:Boolean,default:!1},activeModifiers:{}}),emits:["update:active"],setup(i){const n=i,o=l.useDefaults(n,"BTab"),d=e.useSlots(),u=e.useModel(i,"active"),s=e.inject(t.tabsInjectionKey,null),v=a.useId((()=>o.id),"tabpane"),r=a.useId((()=>o.buttonId),"tab"),c=e.ref(!1),f=e.useTemplateRef("_el"),m=e.useAttrs(),p=e.computed((()=>{const{onClick:e,...a}=m;return{onClick:e,tabAttrs:a}})),b=e.computed((()=>({id:v.value,buttonId:r.value,disabled:o.disabled,title:o.title,titleComponent:d.title,titleItemClass:()=>o.titleItemClass,titleLinkAttrs:()=>o.titleLinkAttrs,titleLinkClass:()=>o.titleLinkClass,onClick:p.value.onClick,el:f.value})));e.onMounted((()=>{s&&(s.registerTab(b),u.value&&s.activateTab(v.value))})),e.onUnmounted((()=>{s&&s.unregisterTab(v.value)}));const y=e.computed((()=>(null==s?void 0:s.activeId.value)===v.value)),C=e.ref(y.value),h=e.computed((()=>!(!(null==s?void 0:s.lazy.value)&&!(o.lazyOnce??o.lazy)))),k=e.computed((()=>void 0!==o.lazyOnce)),B=e.computed((()=>y.value&&!o.disabled)),w=e.computed((()=>B.value||!h.value||h.value&&k.value&&c.value));e.watch(y,(e=>{if(e)return u.value=!0,void setTimeout((()=>{C.value=!0}),0);C.value=!1,u.value=!1})),e.watch(u,(e=>{s&&(e?s.activateTab(v.value):y.value&&s.activateTab(void 0))}));const g=e.computed((()=>[{active:y.value,show:C.value,"card-body":(null==s?void 0:s.card.value)&&!1===o.noBody,fade:!(null==s?void 0:s.noFade.value)},C.value?null==s?void 0:s.activeTabClass.value:null==s?void 0:s.inactiveTabClass.value,null==s?void 0:s.tabClass.value]));return e.watch(w,(e=>{e&&!c.value&&(c.value=!0)})),(a,l)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(o).tag),e.mergeProps({id:e.unref(v),ref:"_el",class:["tab-pane",g.value],role:"tabpanel","aria-labelledby":e.unref(r)},p.value.tabAttrs),{default:e.withCtx((()=>[w.value?e.renderSlot(a.$slots,"default",{key:0}):e.createCommentVNode("",!0)])),_:3},16,["id","class","aria-labelledby"]))}}),s=["aria-orientation"],v=["id","aria-controls","aria-selected","tabindex","onClick"],r=e.defineComponent({__name:"BTabs",props:e.mergeModels({activeNavItemClass:{default:void 0},activeTabClass:{default:void 0},align:{default:void 0},card:{type:Boolean,default:!1},contentClass:{default:void 0},end:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},id:{default:void 0},inactiveNavItemClass:{default:void 0},inactiveTabClass:{default:void 0},justified:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},navClass:{default:void 0},navItemClass:{default:void 0},navWrapperClass:{default:void 0},noFade:{type:Boolean,default:!1},noKeyNav:{type:Boolean,default:!1},noNavStyle:{type:Boolean,default:!1},pills:{type:Boolean,default:!1},small:{type:Boolean,default:!1},tag:{default:"div"},tabClass:{default:void 0},underline:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1}},{modelValue:{default:-1},modelModifiers:{},activeId:{default:void 0},activeIdModifiers:{}}),emits:e.mergeModels(["activate-tab","click"],["update:modelValue","update:activeId"]),setup(a,{emit:u}){const r=a,c=l.useDefaults(r,"BTabs"),f=u,m=e.useModel(a,"modelValue"),p=e.useModel(a,"activeId"),b=o.createReusableTemplate(),y=e.ref([]),C=e.computed((()=>y.value.map((a=>{const l=e.unref(a),t=l.id===p.value;return{...l,active:t,navItemClasses:[{active:t,disabled:l.disabled},t?c.activeNavItemClass:c.inactiveNavItemClass,c.navItemClass]}})))),h=e.computed((()=>!((null==C?void 0:C.value)&&C.value.length>0))),k=e.computed((()=>({"d-flex":c.vertical,"align-items-start":c.vertical}))),B=n.useAlignment((()=>c.align)),w=e.computed((()=>({"nav-pills":c.pills,"nav-underline":c.underline,"flex-column me-3":c.vertical,[B.value]:void 0!==c.align,"nav-fill":c.fill,"card-header-tabs":c.card&&!c.pills&&!c.underline,"card-header-pills":c.card&&c.pills,"nav-justified":c.justified,"nav-tabs":!c.noNavStyle&&!c.pills&&!c.underline,small:c.small}))),g=e=>{var a;if(void 0!==e){const l=null==(a=C.value[e])?void 0:a.id;if(e>-1&&e<C.value.length&&!C.value[e].disabled&&(m.value<0||p.value!==l||m.value!==e)){const a=new i.BvEvent("activate-tab",{cancelable:!0});f("activate-tab",e,m.value,a),a.defaultPrevented||(p.value!==l&&(p.value=l),m.value!==e&&(m.value=e))}}},I=(e,a)=>{var l,t;C.value.length<=0||c.noKeyNav||(e.preventDefault(),e.stopPropagation(),m.value=T(m.value+a,a),null==(t=document.getElementById(null==(l=C.value[m.value])?void 0:l.buttonId))||t.focus())},T=(e,a)=>{let l=e,t=-1,i=-1;for(let n=0;n<C.value.length;n++)C.value[n].disabled||(-1===t&&(t=n),i=n);for(;l>=t&&l<=i&&C.value[l].disabled;)l+=a;return l<t&&(l=t),l>i&&(l=i),l};e.watch(m,((a,l)=>{if(a===l)return;if(C.value.length<=0)return;const t=T(a,a>l?1:-1);e.nextTick((()=>{g(t)}))})),e.watch(p,((e,a)=>{const l=C.value.findIndex((a=>a.id===e));e!==a&&(C.value.length<=0||g(-1!==l?l:T(0,1)))}));e.watch(y,(()=>{x()}),{deep:!0});const x=()=>{var e;if(0===C.value.length)return m.value=-1,void(p.value=void 0);m.value>=0&&!p.value&&(p.value=null==(e=C.value[m.value])?void 0:e.id),C.value.find((e=>e.id===p.value))?g(C.value.findIndex((e=>e.id===p.value))):g(C.value.map((e=>!e.disabled)).indexOf(!0))};return e.provide(t.tabsInjectionKey,{lazy:e.toRef((()=>c.lazy)),card:e.toRef((()=>c.card)),noFade:e.toRef((()=>c.noFade)),activeTabClass:e.toRef((()=>c.activeTabClass)),inactiveTabClass:e.toRef((()=>c.inactiveTabClass)),tabClass:e.toRef((()=>c.tabClass)),registerTab:e=>{y.value.find((a=>a.value.id===e.value.id))?y.value[y.value.findIndex((a=>a.value.id===e.value.id))]=e:y.value.push(e),y.value.sort(((e,a)=>d.sortSlotElementsByPosition(e.value.el,a.value.el)))},unregisterTab:e=>{y.value=y.value.filter((a=>a.value.id!==e))},activeId:p,activateTab:e=>{const a=C.value.findIndex((a=>a.id===e));g(void 0!==e&&-1!==a?a:T(0,1))}}),(a,l)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(c).tag),{id:e.unref(c).id,class:e.normalizeClass(["tabs",k.value])},{default:e.withCtx((()=>[e.createVNode(e.unref(b).define,null,{default:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass(["tab-content",e.unref(c).contentClass])},[e.renderSlot(a.$slots,"default"),h.value?(e.openBlock(),e.createElementBlock("div",{key:"bv-empty-tab",class:e.normalizeClass(["tab-pane active",{"card-body":e.unref(c).card}])},[e.renderSlot(a.$slots,"empty")],2)):e.createCommentVNode("",!0)],2)])),_:3}),e.unref(c).end?(e.openBlock(),e.createBlock(e.unref(b).reuse,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([e.unref(c).navWrapperClass,{"card-header":e.unref(c).card,"ms-auto":a.vertical&&e.unref(c).end}])},[e.createElementVNode("ul",{class:e.normalizeClass(["nav",[w.value,e.unref(c).navClass]]),role:"tablist","aria-orientation":e.unref(c).vertical?"vertical":"horizontal"},[e.renderSlot(a.$slots,"tabs-start"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,((a,t)=>{var i,n,o;return e.openBlock(),e.createElementBlock("li",{key:a.id,class:e.normalizeClass(["nav-item",null==(i=a.titleItemClass)?void 0:i.call(a)]),role:"presentation"},[e.createElementVNode("button",e.mergeProps({id:a.buttonId,class:["nav-link",[a.navItemClasses,null==(n=a.titleLinkClass)?void 0:n.call(a)]],role:"tab","aria-controls":a.id,"aria-selected":a.active,tabindex:e.unref(c).noKeyNav||a.active?void 0:-1,ref_for:!0},null==(o=a.titleLinkAttrs)?void 0:o.call(a),{onKeydown:[l[0]||(l[0]=e.withKeys(e.withModifiers((a=>!e.unref(c).vertical&&I(a,-1)),["exact"]),["left"])),l[1]||(l[1]=e.withKeys(e.withModifiers((a=>!e.unref(c).vertical&&I(a,-999)),["shift"]),["left"])),l[2]||(l[2]=e.withKeys(e.withModifiers((a=>e.unref(c).vertical&&I(a,-1)),["exact"]),["up"])),l[3]||(l[3]=e.withKeys(e.withModifiers((a=>e.unref(c).vertical&&I(a,-999)),["shift"]),["up"])),l[4]||(l[4]=e.withKeys(e.withModifiers((a=>!e.unref(c).vertical&&I(a,1)),["exact"]),["right"])),l[5]||(l[5]=e.withKeys(e.withModifiers((a=>!e.unref(c).vertical&&I(a,999)),["shift"]),["right"])),l[6]||(l[6]=e.withKeys(e.withModifiers((a=>e.unref(c).vertical&&I(a,1)),["exact"]),["down"])),l[7]||(l[7]=e.withKeys(e.withModifiers((a=>e.unref(c).vertical&&I(a,999)),["shift"]),["down"])),l[8]||(l[8]=e.withKeys((e=>I(e,-999)),["page-up"])),l[9]||(l[9]=e.withKeys((e=>I(e,999)),["page-down"])),l[10]||(l[10]=e.withKeys((e=>I(e,-999)),["home"])),l[11]||(l[11]=e.withKeys((e=>I(e,999)),["end"]))],onClick:e.withModifiers((e=>((e,a)=>{var l,t,i;g(a),a>=0&&!C.value[a].disabled&&(null==(l=C.value[a])?void 0:l.onClick)&&"function"==typeof C.value[a].onClick&&(null==(i=(t=C.value[a]).onClick)||i.call(t,e))})(e,t)),["stop","prevent"])}),[a.titleComponent?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a.titleComponent),{key:0})):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(a.title),1)],64))],16,v)],2)})),128)),e.renderSlot(a.$slots,"tabs-end")],10,s)],2),e.unref(c).end?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(b).reuse,{key:1}))])),_:3},8,["id","class"]))}});exports._sfc_main=u,exports._sfc_main$1=r;
//# sourceMappingURL=BTabs.vue_vue_type_script_setup_true_lang-BP0T8JsQ.js.map
