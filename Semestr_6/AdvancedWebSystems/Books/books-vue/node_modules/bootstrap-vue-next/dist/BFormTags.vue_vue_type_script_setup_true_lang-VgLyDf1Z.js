"use strict";const e=require("vue"),a=require("./index-DSoA9-GW.js"),t=require("./useDefaults-_waRUo1X.js"),l=require("./stringUtils-BBcOJJJC.js"),o=require("./useId-BOa4n5pr.js"),u=require("./BCloseButton.vue_vue_type_script_setup_true_lang-DSvkONKu.js"),r=require("./useColorVariantClasses-CE658Sm0.js"),i=require("./useStateClass-BePLKIel.js"),n=require("./index-D8BEsrjv.js"),d=["id"],s=e.defineComponent({__name:"BFormTag",props:{disabled:{type:Boolean,default:!1},id:{default:void 0},noRemove:{type:Boolean,default:!1},pill:{type:Boolean,default:!1},removeLabel:{default:"Remove tag"},tag:{default:"span"},title:{default:void 0},variant:{default:"secondary"}},emits:["remove"],setup(a,{emit:l}){const i=a,n=t.useDefaults(i,"BFormTag"),s=l,v=e.useSlots(),c=o.useId((()=>n.id)),f=e.computed((()=>{var e;return(((null==(e=v.default)?void 0:e.call(v,{})[0].children)??"").toString()||n.title)??""})),m=e.computed((()=>`${c.value}taglabel__`)),p=r.useColorVariantClasses(n),g=e.computed((()=>[p.value,{"rounded-pill":n.pill,disabled:n.disabled}]));return(a,t)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(n).tag),{id:e.unref(c),title:f.value,class:e.normalizeClass(["badge b-form-tag d-inline-flex align-items-center mw-100",g.value]),"aria-labelledby":m.value},{default:e.withCtx((()=>[e.createElementVNode("span",{id:m.value,class:"b-form-tag-content flex-grow-1 text-truncate"},[e.renderSlot(a.$slots,"default",{},(()=>[e.createTextVNode(e.toDisplayString(f.value),1)]))],8,d),e.unref(n).disabled||e.unref(n).noRemove?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(u._sfc_main,{key:0,"aria-keyshortcuts":"Delete","aria-label":e.unref(n).removeLabel,class:"b-form-tag-remove","aria-describedby":m.value,"aria-controls":e.unref(n).id,onClick:t[0]||(t[0]=e=>s("remove",f.value))},null,8,["aria-label","aria-describedby","aria-controls"]))])),_:3},8,["id","title","class","aria-labelledby"]))}}),v=["id"],c=["id","for","aria-live"],f=["id","aria-live"],m=["id"],p=["aria-controls"],g={role:"group",class:"d-flex"},y=["id","disabled","value","type","placeholder","form","required","aria-required"],b=["disabled"],B={"aria-live":"polite","aria-atomic":"true"},T={key:0,class:"d-block invalid-feedback"},x={key:1,class:"form-text text-body-secondary"},k={key:2,class:"form-text text-body-secondary"},V=["name","value"],C=e.defineComponent({__name:"BFormTags",props:e.mergeModels({addButtonText:{default:"Add"},addButtonVariant:{default:"outline-secondary"},addOnChange:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},duplicateTagText:{default:"Duplicate tag(s)"},form:{default:void 0},inputAttrs:{default:void 0},inputClass:{default:void 0},inputId:{default:void 0},inputType:{default:"text"},invalidTagText:{default:"Invalid tag(s)"},limit:{default:void 0},limitTagsText:{default:"Tag limit reached"},name:{default:void 0},noAddOnEnter:{type:Boolean,default:!1},noOuterFocus:{type:Boolean,default:!1},noTagRemove:{type:Boolean,default:!1},placeholder:{default:"Add tag..."},removeOnDelete:{type:Boolean,default:!1},required:{type:Boolean,default:!1},separator:{default:void 0},size:{default:"md"},state:{type:[Boolean,null],default:null},tagClass:{default:void 0},tagPills:{type:Boolean,default:!1},tagRemoveLabel:{default:void 0},tagRemovedLabel:{default:"Tag removed"},tagValidator:{type:Function,default:()=>!0},tagVariant:{default:"secondary"}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:e.mergeModels(["blur","focus","focusin","focusout","tag-state"],["update:modelValue"]),setup(u,{expose:r,emit:d}){const C=u,_=t.useDefaults(C,"BFormTags"),h=d,S=e.useModel(u,"modelValue"),D=o.useId(),E=n.useToNumber((()=>_.limit??NaN)),N=i.useStateClass((()=>_.state)),q=e.useTemplateRef("_input"),{focused:R}=a.useFocus(q,{initialValue:_.autofocus}),$=e.computed((()=>_.inputId||`${D.value}input__`)),F=e.ref([...S.value]),w=e.ref(""),z=e.ref(S.value.length>0),A=e.ref(""),j=e.ref([]),L=e.ref([]),I=e.ref([]);n.syncRef(S,F,{direction:"ltr",transform:{ltr:e=>[...e]}});const O=e.computed((()=>[N.value,{[`form-control-${_.size}`]:"md"!==_.size,disabled:_.disabled,focus:R.value}])),P=e.computed((()=>F.value.includes(w.value))),M=e.computed((()=>""!==w.value&&!_.tagValidator(w.value))),H=e.computed((()=>F.value.length===E.value)),K=e.computed((()=>!M.value&&!P.value)),U=e.computed((()=>({addButtonText:_.addButtonText,addButtonVariant:_.addButtonVariant,addTag:ae,disableAddButton:K.value,disabled:_.disabled,duplicateTagText:_.duplicateTagText,duplicateTags:I.value,form:_.form,inputAttrs:{..._.inputAttrs,disabled:_.disabled,form:_.form,id:$.value,value:w.value},inputClass:_.inputClass,inputHandlers:{input:G,keydown:Q,change:J},inputId:$.value,inputType:_.inputType,invalidTagText:_.invalidTagText,invalidTags:L.value,isDuplicate:P.value,isInvalid:M.value,isLimitReached:H.value,limitTagsText:_.limitTagsText,limit:E.value,noTagRemove:_.noTagRemove,placeholder:_.placeholder,removeTag:te,required:_.required,separator:_.separator,size:_.size,state:_.state,tagClass:_.tagClass,tagPills:_.tagPills,tagRemoveLabel:_.tagRemoveLabel,tagVariant:_.tagVariant,tags:F.value}))),W=e=>{if(_.disabled){e.target.blur()}else h("focusin",e)},X=e=>{_.disabled||_.noOuterFocus||(R.value=!0,h("focus",e))},Z=e=>{R.value=!1,h("blur",e)},G=e=>{var a,t;const l="string"==typeof e?e:e.target.value;z.value=!1,(null==(a=_.separator)?void 0:a.includes(l.charAt(0)))&&l.length>0?q.value&&(q.value.value=""):(w.value=l,(null==(t=_.separator)?void 0:t.includes(l.charAt(l.length-1)))?ae(l.slice(0,l.length-1)):(j.value=_.tagValidator(l)&&!P.value?[l]:[],L.value=_.tagValidator(l)?[]:[l],I.value=P.value?[l]:[],h("tag-state",j.value,L.value,I.value)))},J=e=>{_.addOnChange&&(G(e),P.value||ae(w.value))},Q=e=>{"Enter"!==e.key||_.noAddOnEnter?("Backspace"===e.key||"Delete"===e.key)&&_.removeOnDelete&&""===w.value&&z.value&&F.value.length>0?te(F.value[F.value.length-1]):z.value=!0:ae(w.value)};a.onKeyStroke(Q,{target:q});const Y=e.computed((()=>{if(_.separator)return"string"==typeof _.separator?_.separator:_.separator.join("")})),ee=e.computed((()=>{if(Y.value)return new RegExp(`[${l.escapeRegExpChars(Y.value)}]+`)})),ae=e=>{e=(e??w.value).trim();const a=ee.value?e.split(ee.value).map((e=>e.trim())):[e],t=[];for(const o of a)if(""!==o&&!P.value&&_.tagValidator(o)){if(E.value&&H.value)break;t.push(o)}const l=[...S.value,...t];w.value="",z.value=!0,S.value=l,R.value=!0},te=e=>{const a=F.value.indexOf((null==e?void 0:e.toString())??"");-1!==a&&(A.value=F.value.splice(a,1).toString(),S.value=F.value)};return r({blur:()=>{R.value=!1},element:q,focus:()=>{R.value=!0},inputValue:w}),(a,t)=>(e.openBlock(),e.createElementBlock("div",{id:e.unref(D),class:e.normalizeClass(["b-form-tags form-control h-auto",O.value]),role:"group",tabindex:"-1",onFocusin:W,onFocusout:t[1]||(t[1]=e=>h("focusout",e))},[e.createElementVNode("output",{id:`${e.unref(D)}selected_tags__`,class:"visually-hidden",for:$.value,"aria-live":e.unref(R)?"polite":"off","aria-atomic":"true","aria-relevant":"additions text"},e.toDisplayString(F.value.join(", ")),9,c),e.createElementVNode("div",{id:`${e.unref(D)}removed_tags__`,role:"status","aria-live":e.unref(R)?"assertive":"off","aria-atomic":"true",class:"visually-hidden"}," ("+e.toDisplayString(e.unref(_).tagRemovedLabel)+") "+e.toDisplayString(A.value),9,f),e.renderSlot(a.$slots,"default",e.normalizeProps(e.guardReactiveProps(U.value)),(()=>[e.createElementVNode("ul",{id:`${e.unref(D)}tag_list__`,class:"b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(F.value,((t,l)=>e.renderSlot(a.$slots,"tag",{key:l,tag:t,tagClass:e.unref(_).tagClass,tagVariant:e.unref(_).tagVariant,tagPills:e.unref(_).tagPills,removeTag:te},(()=>[(e.openBlock(),e.createBlock(s,{key:t,class:e.normalizeClass(e.unref(_).tagClass),tag:"li",variant:e.unref(_).tagVariant,pill:e.unref(_).tagPills,onRemove:te},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t),1)])),_:2},1032,["class","variant","pill"]))])))),128)),e.createElementVNode("li",{role:"none","aria-live":"off",class:"b-from-tags-field flex-grow-1","aria-controls":`${e.unref(D)}tag_list__`},[e.createElementVNode("div",g,[e.createElementVNode("input",e.mergeProps({id:$.value,ref:"_input",disabled:e.unref(_).disabled,value:w.value,type:e.unref(_).inputType,placeholder:e.unref(_).placeholder,class:"b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0",style:{outline:"currentcolor none 0px","min-width":"5rem"}},e.unref(_).inputAttrs,{form:e.unref(_).form,required:e.unref(_).required||void 0,"aria-required":e.unref(_).required||void 0,onInput:G,onChange:J,onFocus:X,onBlur:Z}),null,16,y),K.value?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:e.normalizeClass(["btn b-form-tags-button py-0",[a.inputClass,{[`btn-${e.unref(_).addButtonVariant}`]:null!==e.unref(_).addButtonVariant,"disabled invisible":0===w.value.length}]]),style:{"font-size":"90%"},disabled:e.unref(_).disabled||0===w.value.length||H.value,onClick:t[0]||(t[0]=e=>ae(w.value))},[e.renderSlot(a.$slots,"add-button-text",{},(()=>[e.createTextVNode(e.toDisplayString(e.unref(_).addButtonText),1)]))],10,b)):e.createCommentVNode("",!0)])],8,p)],8,m),e.createElementVNode("div",B,[M.value?(e.openBlock(),e.createElementBlock("div",T,e.toDisplayString(e.unref(_).invalidTagText)+": "+e.toDisplayString(w.value),1)):e.createCommentVNode("",!0),P.value?(e.openBlock(),e.createElementBlock("small",x,e.toDisplayString(e.unref(_).duplicateTagText)+": "+e.toDisplayString(w.value),1)):e.createCommentVNode("",!0),F.value.length===e.unref(_).limit?(e.openBlock(),e.createElementBlock("small",k,e.toDisplayString(e.unref(_).limitTagsText),1)):e.createCommentVNode("",!0)])])),e.unref(_).name?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(F.value,((a,t)=>(e.openBlock(),e.createElementBlock("input",{key:t,type:"hidden",name:e.unref(_).name,value:a},null,8,V)))),128)):e.createCommentVNode("",!0)],42,v))}});exports._sfc_main=C,exports._sfc_main$1=s;
//# sourceMappingURL=BFormTags.vue_vue_type_script_setup_true_lang-VgLyDf1Z.js.map
