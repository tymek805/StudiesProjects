"use strict";const e=require("vue"),o=require("./useDefaults-_waRUo1X.js"),a=require("./useFormInput-ByUM6zh5.js"),t=require("./dom-Dzr6gmPm.js"),u=require("./index-D8BEsrjv.js"),l=["id","name","form","value","disabled","placeholder","required","autocomplete","readonly","aria-required","aria-invalid","rows","wrap"],r=e.defineComponent({__name:"BFormTextarea",props:e.mergeModels({noResize:{type:Boolean,default:!1},rows:{default:2},wrap:{default:"soft"},noAutoShrink:{type:Boolean,default:!1},maxRows:{default:void 0},ariaInvalid:{type:[Boolean,String],default:void 0},autocomplete:{default:void 0},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{default:void 0},formatter:{type:Function,default:void 0},id:{default:void 0},lazyFormatter:{type:Boolean,default:!1},list:{default:void 0},name:{default:void 0},placeholder:{default:void 0},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{default:void 0},state:{type:[Boolean,null],default:void 0},debounce:{default:0},debounceMaxWait:{default:NaN}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(r,{expose:n}){const d=r,i=o.useDefaults(d,"BFormTextarea"),[s,p]=e.useModel(r,"modelValue",{set:e=>a.normalizeInput(e,p)}),m=e.useTemplateRef("_input"),{computedId:f,forceUpdateKey:v,computedAriaInvalid:c,onInput:h,stateClass:y,onChange:x,onBlur:b,focus:w,blur:B}=a.useFormInput(i,m,s,p),g=e.computed((()=>[y.value,i.plaintext?"form-control-plaintext":"form-control",{[`form-control-${i.size}`]:!!i.size}])),{computedStyles:N,onInput:q,computedRows:F}=((o,a)=>{const l=e.ref(0),r=e.readonly(e.toRef(a)),n=u.useToNumber((()=>r.value.maxRows||NaN),{method:"parseInt",nanToZero:!0}),d=u.useToNumber((()=>r.value.rows||NaN),{method:"parseInt",nanToZero:!0}),i=e.computed((()=>Math.max(d.value||2,2))),s=e.computed((()=>Math.max(i.value,n.value||0))),p=e.computed((()=>i.value===s.value?i.value:null)),m=async()=>{if(!o.value||!t.isVisible(o.value))return void(l.value=null);const a=getComputedStyle(o.value),u=Number.parseFloat(a.lineHeight)||1,n=(Number.parseFloat(a.borderTopWidth)||0)+(Number.parseFloat(a.borderBottomWidth)||0),d=(Number.parseFloat(a.paddingTop)||0)+(Number.parseFloat(a.paddingBottom)||0),p=n+d,m=u*i.value+p,f=o.value.style.height||a.height;l.value="auto",await e.nextTick();const{scrollHeight:v}=o.value;l.value=f,await e.nextTick();const c=Math.max((v-d)/u,2),h=Math.min(Math.max(c,i.value),s.value),y=Math.max(Math.ceil(h*u+p),m);r.value.noAutoShrink&&(Number.parseFloat(f.toString())||0)>y?l.value=f:l.value=`${y}px`};return e.onMounted(m),{onInput:m,computedStyles:e.computed((()=>({resize:"none",height:"string"==typeof l.value?l.value:l.value?`${l.value}px`:void 0}))),computedRows:p}})(m,e.computed((()=>({maxRows:i.maxRows,rows:i.rows,noAutoShrink:i.noAutoShrink})))),I=e.computed((()=>({resize:i.noResize?"none":void 0,...i.maxRows||i.noAutoShrink?N.value:void 0})));return n({blur:B,element:m,focus:w}),(o,a)=>(e.openBlock(),e.createElementBlock("textarea",{id:e.unref(f),ref:"_input",key:e.unref(v),class:e.normalizeClass(g.value),name:e.unref(i).name||void 0,form:e.unref(i).form||void 0,value:e.unref(s)??void 0,disabled:e.unref(i).disabled,placeholder:e.unref(i).placeholder,required:e.unref(i).required||void 0,autocomplete:e.unref(i).autocomplete||void 0,readonly:e.unref(i).readonly||e.unref(i).plaintext,"aria-required":e.unref(i).required||void 0,"aria-invalid":e.unref(c),rows:e.unref(F)||2,style:e.normalizeStyle(I.value),wrap:e.unref(i).wrap||void 0,onInput:a[0]||(a[0]=o=>{e.unref(h)(o),e.unref(q)()}),onChange:a[1]||(a[1]=(...o)=>e.unref(x)&&e.unref(x)(...o)),onBlur:a[2]||(a[2]=(...o)=>e.unref(b)&&e.unref(b)(...o))},null,46,l))}});exports._sfc_main=r;
//# sourceMappingURL=BFormTextarea.vue_vue_type_script_setup_true_lang-Dg6Woynp.js.map
