"use strict";const e=require("vue"),o=require("./useDefaults-_waRUo1X.js"),a=require("./index-DSoA9-GW.js"),l=require("./useSafeScrollLock-BM86m9yU.js"),t=require("./BButton.vue_vue_type_script_setup_true_lang-B8RofmCM.js"),r=require("./BCloseButton.vue_vue_type_script_setup_true_lang-DSvkONKu.js"),n=require("./useId-BOa4n5pr.js"),d=require("./dom-Dzr6gmPm.js"),s=require("./useColorVariantClasses-CE658Sm0.js"),u=require("./useModalManager-WhhGC3UC.js"),i=require("./useShowHide-C91IoS21.js"),c=require("./ConditionalTeleport.vue_vue_type_script_lang-6a2bI705.js"),f=require("./_plugin-vue_export-helper-CC_fc8JW.js"),p=require("./src/composables/useModalController/index.umd.js"),m=["id","aria-labelledby","aria-describedby"],v=["id"],B="modal-fallback-focus",k=e.defineComponent({inheritAttrs:!1,__name:"BModal",props:e.mergeModels({autofocus:{type:Boolean,default:!0},autofocusButton:{default:void 0},backdropFirst:{type:Boolean,default:!1},body:{default:void 0},bodyAttrs:{default:void 0},bodyBgVariant:{default:null},bodyClass:{default:null},bodyScrolling:{type:Boolean,default:!1},bodyTextVariant:{default:null},bodyVariant:{default:null},busy:{type:Boolean,default:!1},buttonSize:{default:"md"},cancelDisabled:{type:Boolean,default:!1},cancelTitle:{default:"Cancel"},cancelVariant:{default:"secondary"},centered:{type:Boolean,default:!1},contentClass:{default:void 0},dialogClass:{default:void 0},footerBgVariant:{default:null},footerBorderVariant:{default:null},footerClass:{default:void 0},footerTextVariant:{default:null},footerVariant:{default:null},fullscreen:{type:[Boolean,String],default:!1},headerBgVariant:{default:null},headerBorderVariant:{default:null},headerClass:{default:void 0},headerCloseClass:{default:void 0},headerCloseLabel:{default:"Close"},headerCloseVariant:{default:"secondary"},headerTextVariant:{default:null},headerVariant:{default:null},noBackdrop:{type:Boolean,default:!1},noFooter:{type:Boolean,default:!1},noHeader:{type:Boolean,default:!1},noHeaderClose:{type:Boolean,default:!1},id:{default:void 0},modalClass:{default:void 0},noCloseOnBackdrop:{type:Boolean,default:!1},noCloseOnEsc:{type:Boolean,default:!1},noTrap:{type:Boolean,default:!1},noStacking:{type:Boolean},okDisabled:{type:Boolean,default:!1},okOnly:{type:Boolean,default:!1},okTitle:{default:"OK"},okVariant:{default:"primary"},scrollable:{type:Boolean,default:!1},size:{default:"md"},title:{default:void 0},titleClass:{default:void 0},titleVisuallyHidden:{type:Boolean,default:!1},titleTag:{default:"h5"},teleportDisabled:{type:Boolean,default:!1},teleportTo:{default:"body"},initialAnimation:{type:Boolean,default:!1},noAnimation:{type:Boolean},noFade:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1},show:{type:Boolean,default:!1},transProps:{default:void 0},visible:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:e.mergeModels(["backdrop","cancel","close","esc","ok","hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented"],["update:modelValue"]),setup(f,{expose:p,emit:k}){const y=f,b=o.useDefaults(y,"BModal"),V=k,C=e.useSlots(),g=n.useId((()=>b.id),"modal"),_=e.useModel(f,"modelValue"),h=e.useTemplateRef("_element"),S=e.useTemplateRef("_fallbackFocusElement"),x=e.useTemplateRef("_okButton"),T=e.useTemplateRef("_cancelButton"),z=e.useTemplateRef("_closeButton"),w=()=>{!1!==b.autofocus&&("ok"===b.autofocusButton?W.value=!0:"close"===b.autofocusButton?Z.value=!0:"cancel"===b.autofocusButton?X.value=!0:U.value=!0)},{showRef:P,renderRef:D,renderBackdropRef:N,hide:E,show:F,toggle:M,computedNoAnimation:$,transitionProps:R,backdropTransitionProps:j,isLeaving:q,isVisible:H,trapActive:A,contentShowing:L,backdropReady:O,backdropVisible:I}=i.useShowHide(_,b,V,h,g,{transitionProps:{onAfterEnter:w}}),{needsFallback:K}=l.useActivatedFocusTrap({element:h,isActive:A,noTrap:()=>b.noTrap,fallbackFocus:{ref:S,classSelector:B}});a.onKeyStroke("Escape",(()=>{E("esc")}),{target:h}),l.useSafeScrollLock(P,(()=>b.bodyScrolling));const{focused:U}=a.useFocus(h,{initialValue:_.value&&void 0===b.autofocusButton&&!0===b.autofocus}),{focused:W}=a.useFocus(x,{initialValue:_.value&&"ok"===b.autofocusButton&&!0===b.autofocus}),{focused:X}=a.useFocus(T,{initialValue:_.value&&"cancel"===b.autofocusButton&&!0===b.autofocus}),{focused:Z}=a.useFocus(z,{initialValue:_.value&&"close"===b.autofocusButton&&!0===b.autofocus}),G=e.computed((()=>!d.isEmptySlot(C["header-close"]))),J=e.computed((()=>[b.dialogClass,{"modal-fullscreen":!0===b.fullscreen,[`modal-fullscreen-${b.fullscreen}-down`]:"string"==typeof b.fullscreen,[`modal-${b.size}`]:"md"!==b.size,"modal-dialog-centered":b.centered,"modal-dialog-scrollable":b.scrollable}])),Q=s.useColorVariantClasses((()=>({bgVariant:b.bodyBgVariant,textVariant:b.bodyTextVariant,variant:b.bodyVariant}))),Y=e.computed((()=>[b.bodyClass,Q.value])),ee=s.useColorVariantClasses((()=>({bgVariant:b.headerBgVariant,textVariant:b.headerTextVariant,variant:b.headerVariant,borderVariant:b.headerBorderVariant}))),oe=e.computed((()=>[b.headerClass,ee.value])),ae=e.computed((()=>({variant:G.value?b.headerCloseVariant:void 0,class:b.headerCloseClass}))),le=s.useColorVariantClasses((()=>({bgVariant:b.footerBgVariant,textVariant:b.footerTextVariant,variant:b.footerVariant,borderVariant:b.footerBorderVariant}))),te=e.computed((()=>[b.footerClass,le.value])),re=e.computed((()=>[b.titleClass,{"visually-hidden":b.titleVisuallyHidden}])),ne=e.computed((()=>b.cancelDisabled||b.busy)),de=e.computed((()=>b.okDisabled||b.busy)),{activePosition:se,activeModalCount:ue,stackWithoutSelf:ie}=u.useModalManager(P,_.value);e.watch(ie,((e,o)=>{e.length>o.length&&!0===P.value&&!0===b.noStacking&&E()}));const ce=e.computed((()=>P.value||q.value?1056-(2*((null==ue?void 0:ue.value)??0)-2*((null==se?void 0:se.value)??0)):1056)),fe=e.computed((()=>({"z-index":ce.value}))),pe=e.computed((()=>({"z-index":ce.value-1}))),me=e.computed((()=>({cancel:()=>{E("cancel")},close:()=>{E("close")},hide:E,ok:()=>{E("ok")},active:P.value,visible:P.value})));return p({hide:E,id:g,show:F,toggle:M}),(o,a)=>(e.openBlock(),e.createBlock(c._sfc_main,{to:e.unref(b).teleportTo,disabled:e.unref(b).teleportDisabled},{default:e.withCtx((()=>[e.unref(D)||e.unref(L)?(e.openBlock(),e.createBlock(e.Transition,e.mergeProps({key:0},e.unref(R),{appear:_.value||e.unref(b).visible,onAfterEnter:w}),{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("div",e.mergeProps({id:e.unref(g),ref:"_element",class:["modal",[e.unref(b).modalClass,{fade:!e.unref($),show:e.unref(H)}]],role:"dialog","aria-labelledby":e.unref(b).noHeader?void 0:`${e.unref(g)}-label`,"aria-describedby":`${e.unref(g)}-body`,tabindex:"-1"},o.$attrs,{style:fe.value,onClick:a[4]||(a[4]=e.withModifiers((o=>e.unref(E)("backdrop")),["self"]))}),[e.createElementVNode("div",{class:e.normalizeClass(["modal-dialog",J.value])},[e.unref(L)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["modal-content",e.unref(b).contentClass])},[e.unref(b).noHeader?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["modal-header",oe.value])},[e.renderSlot(o.$slots,"header",e.normalizeProps(e.guardReactiveProps(me.value)),(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(b).titleTag),{id:`${e.unref(g)}-label`,class:e.normalizeClass(["modal-title",re.value])},{default:e.withCtx((()=>[e.renderSlot(o.$slots,"title",e.normalizeProps(e.guardReactiveProps(me.value)),(()=>[e.createTextVNode(e.toDisplayString(e.unref(b).title),1)]),!0)])),_:3},8,["id","class"])),e.unref(b).noHeaderClose?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[G.value?(e.openBlock(),e.createBlock(t._sfc_main,e.mergeProps({key:0},ae.value,{onClick:a[0]||(a[0]=o=>e.unref(E)("close"))}),{default:e.withCtx((()=>[e.renderSlot(o.$slots,"header-close",{},void 0,!0)])),_:3},16)):(e.openBlock(),e.createBlock(r._sfc_main,e.mergeProps({key:1,"aria-label":e.unref(b).headerCloseLabel},ae.value,{onClick:a[1]||(a[1]=o=>e.unref(E)("close"))}),null,16,["aria-label"]))],64))]),!0)],2)),e.createElementVNode("div",e.mergeProps({id:`${e.unref(g)}-body`,class:["modal-body",Y.value]},e.unref(b).bodyAttrs),[e.renderSlot(o.$slots,"default",e.normalizeProps(e.guardReactiveProps(me.value)),(()=>[e.createTextVNode(e.toDisplayString(e.unref(b).body),1)]),!0)],16,v),e.unref(b).noFooter?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["modal-footer",te.value])},[e.renderSlot(o.$slots,"footer",e.normalizeProps(e.guardReactiveProps(me.value)),(()=>[e.renderSlot(o.$slots,"cancel",e.normalizeProps(e.guardReactiveProps(me.value)),(()=>[e.unref(b).okOnly?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(t._sfc_main,{key:0,ref:"_cancelButton",disabled:ne.value,size:e.unref(b).buttonSize,variant:e.unref(b).cancelVariant,onClick:a[2]||(a[2]=o=>e.unref(E)("cancel"))},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(e.unref(b).cancelTitle),1)])),_:1},8,["disabled","size","variant"]))]),!0),e.renderSlot(o.$slots,"ok",e.normalizeProps(e.guardReactiveProps(me.value)),(()=>[e.createVNode(t._sfc_main,{ref:"_okButton",disabled:de.value,size:e.unref(b).buttonSize,variant:e.unref(b).okVariant,onClick:a[3]||(a[3]=o=>e.unref(E)("ok"))},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(e.unref(b).okTitle),1)])),_:1},8,["disabled","size","variant"])]),!0)]),!0)],2))],2)):e.createCommentVNode("",!0)],2),e.unref(K)?(e.openBlock(),e.createElementBlock("div",{key:0,ref:"_fallbackFocusElement",class:e.normalizeClass(B),tabindex:"0",style:{width:"0",height:"0",overflow:"hidden"}},null,512)):e.createCommentVNode("",!0)],16,m),[[e.vShow,e.unref(P)&&(e.unref(O)&&e.unref(b).backdropFirst||!e.unref(b).backdropFirst)]])])),_:3},16,["appear"])):e.createCommentVNode("",!0),e.unref(b).noBackdrop?e.createCommentVNode("",!0):e.renderSlot(o.$slots,"backdrop",e.normalizeProps(e.mergeProps({key:1},me.value)),(()=>[e.unref(N)?(e.openBlock(),e.createBlock(e.Transition,e.normalizeProps(e.mergeProps({key:0},e.unref(j))),{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["modal-backdrop",{fade:!e.unref($),show:e.unref(I)||e.unref($)}]),style:e.normalizeStyle(pe.value),onClick:a[5]||(a[5]=o=>e.unref(E)("backdrop"))},null,6),[[e.vShow,e.unref(P)||e.unref(q)&&e.unref(b).backdropFirst&&!e.unref($)]])])),_:1},16)):e.createCommentVNode("",!0)]),!0)])),_:3},8,["to","disabled"]))}}),y=f._export_sfc(k,[["__scopeId","data-v-93972863"]]),b=e.defineComponent({inheritAttrs:!1,__name:"BModalOrchestrator",props:{teleportDisabled:{type:Boolean,default:!1},teleportTo:{default:"body"}},setup(a,{expose:l}){const t=a,r=o.useDefaults(t,"BModalOrchestrator"),n=p.useModalController();return l({...n}),(o,a)=>(e.openBlock(),e.createBlock(c._sfc_main,{to:e.unref(r).teleportTo,disabled:e.unref(r).teleportDisabled},{default:e.withCtx((()=>{var a;return[e.createElementVNode("div",e.mergeProps({id:"__BVID__modal-container"},o.$attrs),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null==(a=e.unref(n).modals)?void 0:a.value,(([o,a])=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a.component??y),e.mergeProps({key:o,ref_for:!0},a.props,{modelValue:a.props._modelValue,"onUpdate:modelValue":[e=>a.props._modelValue=e,a=>{var l,t;return null==(t=(l=e.unref(n)).leave)?void 0:t.call(l,o)}],"initial-animation":"","teleport-disabled":!0,onHide:e=>{if(!0===a.props._isConfirm){if("ok"===e.trigger)return void a.props._promise.resolve(!0);if("cancel"===e.trigger)return void a.props._promise.resolve(!1);a.props._promise.resolve(null)}a.props._promise.resolve(!0)},onHidden:a=>{var l,t;return null==(t=(l=e.unref(n)).remove)?void 0:t.call(l,o)}}),null,16,["modelValue","onUpdate:modelValue","onHide","onHidden"])))),128))],16)]})),_:1},8,["to","disabled"]))}});exports.BModal=y,exports._sfc_main=b;
//# sourceMappingURL=BModalOrchestrator.vue_vue_type_script_setup_true_lang-BtuBpM8e.js.map
