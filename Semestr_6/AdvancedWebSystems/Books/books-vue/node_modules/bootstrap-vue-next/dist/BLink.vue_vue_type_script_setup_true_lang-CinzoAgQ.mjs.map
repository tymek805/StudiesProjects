{"version":3,"file":"BLink.vue_vue_type_script_setup_true_lang-CinzoAgQ.mjs","sources":["../src/utils/isLink.ts","../src/composables/useBLinkHelper.ts","../src/composables/useLinkClasses.ts","../src/components/BLink/BLink.vue"],"sourcesContent":["import type {RouteLocationRaw} from 'vue-router'\n\nexport const isLink = (props: Readonly<{href?: string; to?: RouteLocationRaw}>): boolean =>\n  !!(props.href || props.to)\n","import {\n  computed,\n  getCurrentInstance,\n  type MaybeRefOrGetter,\n  readonly,\n  resolveDynamicComponent,\n  toRef,\n} from 'vue'\nimport {isLink} from '../utils/isLink'\nimport {pick} from '../utils/object'\nimport type {RouteLocationRaw, RouterLink} from 'vue-router'\nimport {toPascalCase} from '../utils/stringUtils'\n\nexport const useBLinkHelper = <\n  T extends Record<string, unknown>,\n  const B extends ReadonlyArray<PropertyKey>,\n>(\n  props: MaybeRefOrGetter<T>,\n  pickProps?: MaybeRefOrGetter<B | (keyof T)[]>\n) => {\n  const pickPropsResolved = readonly(toRef(pickProps))\n  const resolvedProps = readonly(toRef(props))\n\n  const computedLink = computed(() => isLink(resolvedProps.value))\n  const computedLinkProps = computed(() =>\n    computedLink.value\n      ? pick(\n          resolvedProps.value,\n          pickPropsResolved.value ?? [\n            'active',\n            'activeClass',\n            'append',\n            'href',\n            'rel',\n            'replace',\n            'routerComponentName',\n            'target',\n            'to',\n            'variant',\n            'opacity',\n            'opacityHover',\n            'underlineVariant',\n            'underlineOffset',\n            'underlineOffsetHover',\n            'underlineOpacity',\n            'underlineOpacityHover',\n          ]\n        )\n      : {}\n  )\n\n  return {computedLink, computedLinkProps}\n}\n\nexport const useBLinkTagResolver = (\n  props: MaybeRefOrGetter<{\n    routerComponentName: string\n    disabled: boolean\n    to: RouteLocationRaw | undefined\n    href: string | undefined\n    replace: boolean\n  }>\n) => {\n  // Getting instance\n  const instance = getCurrentInstance()\n  const router = instance?.appContext.app.config.globalProperties.$router\n  const route = instance?.appContext.app.config.globalProperties.$route\n  const RouterLinkComponent = resolveDynamicComponent('RouterLink') as typeof RouterLink | string\n  const useLink = typeof RouterLinkComponent === 'string' ? null : RouterLinkComponent.useLink\n\n  // Resolving props\n  const resolvedProps = toRef(props)\n  const resolvedTo = toRef(() => resolvedProps.value.to || '')\n  const resolvedReplace = toRef(() => resolvedProps.value.replace)\n\n  const routerName = computed(() => toPascalCase(resolvedProps.value.routerComponentName))\n\n  const tag = computed(() => {\n    const hasRouter = instance?.appContext.app.component(routerName.value) !== undefined\n    if (!hasRouter || resolvedProps.value.disabled || !resolvedProps.value.to) {\n      return 'a'\n    }\n    return routerName.value\n  })\n\n  const isRouterLink = computed(() => tag.value === 'RouterLink')\n  const isNuxtLink = computed(\n    // @ts-expect-error we're doing an explicit check for Nuxt, so we can safely ignore this\n    () => isRouterLink.value && typeof instance?.appContext.app.$nuxt !== 'undefined'\n  )\n  const isNonStandardTag = computed(\n    () => tag.value !== 'a' && !isRouterLink.value && !isNuxtLink.value\n  )\n  const isOfRouterType = computed(() => isRouterLink.value || isNuxtLink.value)\n  const linkProps = computed(() => ({\n    to: resolvedTo.value,\n    replace: resolvedReplace.value,\n  }))\n\n  const _link = useLink?.({\n    to: resolvedTo,\n    replace: resolvedReplace,\n  })\n  const link = computed(() => (isOfRouterType.value ? _link : null))\n\n  const computedHref = computed(() => {\n    if (link.value?.href.value) return link.value.href.value\n\n    const toFallback = '#'\n    if (resolvedProps.value.href) return resolvedProps.value.href\n\n    if (typeof resolvedProps.value.to === 'string') return resolvedProps.value.to || toFallback\n\n    // Stabilize the `to` prop for the callback functions\n    const {to: stableTo} = resolvedProps.value\n\n    if (stableTo !== undefined && 'path' in stableTo) {\n      const path = stableTo.path || ''\n      const query = stableTo.query\n        ? `?${Object.keys(stableTo.query)\n            .map((e) => `${e}=${stableTo.query?.[e]}`)\n            .join('=')}`\n        : ''\n      const hash =\n        !stableTo.hash || stableTo.hash.charAt(0) === '#'\n          ? stableTo.hash || ''\n          : `#${stableTo.hash}`\n      return `${path}${query}${hash}` || toFallback\n    }\n    // There is no resolver for `RouteLocationNamedRaw`. Which, I'm not sure there can be one in this context.\n\n    return toFallback\n  })\n\n  return {\n    isNonStandardTag,\n    tag,\n    isRouterLink,\n    isNuxtLink,\n    computedHref,\n    routerName,\n    router,\n    route,\n    link,\n    linkProps,\n  }\n}\n","import {computed, type MaybeRefOrGetter, toValue} from 'vue'\nimport type {\n  LinkIconProps,\n  LinkOpacityProps,\n  LinkUnderlineProps,\n  LinkVariantProps,\n} from '../types/ComponentProps'\n\nexport const useLinkClasses = (\n  linkProps: MaybeRefOrGetter<\n    LinkUnderlineProps & LinkOpacityProps & LinkIconProps & LinkVariantProps\n  >\n) =>\n  computed(() => {\n    const props = toValue(linkProps)\n    return {\n      [`link-${props.variant}`]: props.variant !== null,\n      [`link-opacity-${props.opacity}`]: props.opacity !== undefined,\n      [`link-opacity-${props.opacityHover}-hover`]: props.opacityHover !== undefined,\n      [`link-underline-${props.underlineVariant}`]: props.underlineVariant !== null,\n      [`link-offset-${props.underlineOffset}`]: props.underlineOffset !== undefined,\n      [`link-offset-${props.underlineOffsetHover}-hover`]: props.underlineOffsetHover !== undefined,\n      ['link-underline']:\n        props.underlineVariant === null &&\n        (props.underlineOpacity !== undefined || props.underlineOpacityHover !== undefined),\n      [`link-underline-opacity-${props.underlineOpacity}`]: props.underlineOpacity !== undefined,\n      [`link-underline-opacity-${props.underlineOpacityHover}-hover`]:\n        props.underlineOpacityHover !== undefined,\n      'icon-link': props.icon === true,\n    }\n  })\n","<template>\n  <component\n    :is=\"tag\"\n    :class=\"computedClasses\"\n    :target=\"props.target\"\n    :href=\"computedHref\"\n    :rel=\"computedRel\"\n    :tabindex=\"computedTabIndex\"\n    :aria-disabled=\"props.disabled ? true : null\"\n    v-bind=\"computedSpecificProps\"\n    @click=\"\n      (e: MouseEvent) => {\n        clicked(e)\n        link?.navigate(e)\n      }\n    \"\n  >\n    <slot />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useLinkClasses} from '../../composables/useLinkClasses'\nimport type {BLinkProps} from '../../types/ComponentProps'\nimport {collapseInjectionKey, navbarInjectionKey} from '../../utils/keys'\nimport {computed, inject, useAttrs} from 'vue'\nimport {useBLinkTagResolver} from '../../composables/useBLinkHelper'\n\nconst defaultActiveClass = 'active'\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst _props = withDefaults(defineProps<BLinkProps>(), {\n  active: undefined,\n  activeClass: 'router-link-active',\n  disabled: false,\n  exactActiveClass: 'router-link-exact-active',\n  href: undefined,\n  icon: false,\n  opacity: undefined,\n  opacityHover: undefined,\n  noPrefetch: undefined,\n  prefetchOn: undefined,\n  noRel: false,\n  prefetchedClass: undefined,\n  prefetch: undefined,\n  rel: undefined,\n  replace: false,\n  routerComponentName: 'router-link',\n  routerTag: 'a',\n  stretched: false,\n  target: undefined,\n  to: undefined,\n  underlineOffset: undefined,\n  underlineOffsetHover: undefined,\n  underlineOpacity: undefined,\n  underlineOpacityHover: undefined,\n  underlineVariant: null,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BLink')\n\nconst emit = defineEmits<{\n  click: [value: MouseEvent]\n}>()\n\nconst attrs = useAttrs()\nconst {computedHref, tag, link, isNuxtLink, isRouterLink, linkProps, isNonStandardTag} =\n  useBLinkTagResolver(\n    computed(() => ({\n      routerComponentName: props.routerComponentName,\n      disabled: props.disabled,\n      to: props.to,\n      replace: props.replace,\n      href: props.href,\n    }))\n  )\n\nconst collapseData = inject(collapseInjectionKey, null)\nconst navbarData = inject(navbarInjectionKey, null)\n\n/**\n * Not to be confused with computedLinkClasses\n */\nconst linkValueClasses = useLinkClasses(props)\nconst computedClasses = computed(() => [\n  linkValueClasses.value,\n  attrs.class,\n  computedLinkClasses.value,\n  {\n    [defaultActiveClass]: props.active,\n    [props.activeClass]: link.value?.isActive.value || false,\n    [props.exactActiveClass]: link.value?.isExactActive.value || false,\n    'stretched-link': props.stretched === true,\n  },\n])\nconst computedLinkClasses = computed(() => ({\n  [defaultActiveClass]: props.active,\n  disabled: props.disabled,\n}))\n\nconst clicked = (e: Readonly<MouseEvent>): void => {\n  if (props.disabled) {\n    e.preventDefault()\n    e.stopImmediatePropagation()\n    return\n  }\n\n  if (\n    (collapseData?.isNav?.value === true && navbarData === null) ||\n    (navbarData !== null && navbarData.autoClose?.value === true)\n  ) {\n    collapseData?.hide?.()\n  }\n\n  emit('click', e)\n}\n\nconst computedRel = computed(() =>\n  props.target === '_blank' ? (!props.rel && props.noRel ? 'noopener' : props.rel) : undefined\n)\nconst computedTabIndex = computed(() =>\n  props.disabled ? '-1' : typeof attrs.tabindex === 'undefined' ? null : attrs.tabindex\n)\n\nconst nuxtSpecificProps = computed(() => ({\n  prefetch: props.prefetch,\n  noPrefetch: props.noPrefetch,\n  prefetchOn: props.prefetchOn,\n  prefetchedClass: props.prefetchedClass,\n  ...linkProps.value,\n}))\nconst computedSpecificProps = computed(() => ({\n  ...(isRouterLink.value ? linkProps.value : undefined),\n  // In addition to being Nuxt specific, we add these values if it's some non-standard tag. We don't know what it is,\n  // So we just add it anyways. It will be made as an attr if it's unused so it's fine\n  ...(isNuxtLink.value || isNonStandardTag.value ? nuxtSpecificProps.value : undefined),\n}))\n</script>\n"],"names":["_a"],"mappings":"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"}