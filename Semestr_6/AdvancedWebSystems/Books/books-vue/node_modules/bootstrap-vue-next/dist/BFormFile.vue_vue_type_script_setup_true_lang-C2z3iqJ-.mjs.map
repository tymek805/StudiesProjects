{"version":3,"file":"BFormFile.vue_vue_type_script_setup_true_lang-C2z3iqJ-.mjs","sources":["../src/components/BFormFile/BFormFile.vue"],"sourcesContent":["<template>\n  <label\n    v-if=\"hasLabelSlot || props.label\"\n    class=\"form-label\"\n    :class=\"props.labelClass\"\n    :for=\"computedId\"\n  >\n    <slot name=\"label\">\n      {{ props.label }}\n    </slot>\n  </label>\n\n  <input\n    :id=\"computedId\"\n    v-bind=\"$attrs\"\n    ref=\"_input\"\n    type=\"file\"\n    :class=\"computedClasses\"\n    :form=\"props.form\"\n    :name=\"props.name\"\n    :multiple=\"props.multiple\"\n    :disabled=\"props.disabled\"\n    :capture=\"props.capture\"\n    :accept=\"computedAccept || undefined\"\n    :required=\"props.required || undefined\"\n    :aria-label=\"props.ariaLabel\"\n    :aria-labelledby=\"props.ariaLabelledby\"\n    :aria-required=\"props.required || undefined\"\n    :directory=\"props.directory\"\n    :webkitdirectory=\"props.directory\"\n    @change=\"onChange\"\n    @drop=\"onDrop\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport {useFocus} from '@vueuse/core'\nimport {computed, useTemplateRef, watch} from 'vue'\nimport type {BFormFileProps} from '../../types/ComponentProps'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport {useStateClass} from '../../composables/useStateClass'\nimport {isEmptySlot} from '../../utils/dom'\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst slots = defineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  label?: (props: Record<string, never>) => any\n}>()\n\nconst _props = withDefaults(defineProps<Omit<BFormFileProps, 'modelValue'>>(), {\n  ariaLabel: undefined,\n  ariaLabelledby: undefined,\n  accept: '',\n  autofocus: false,\n  capture: undefined,\n  directory: false,\n  disabled: false,\n  form: undefined,\n  id: undefined,\n  label: '',\n  labelClass: undefined,\n  multiple: false,\n  name: undefined,\n  noButton: false,\n  noDrop: false,\n  noTraverse: false,\n  plain: false,\n  required: false,\n  size: undefined,\n  state: null,\n})\nconst props = useDefaults(_props, 'BFormFile')\n\nconst modelValue = defineModel<Exclude<BFormFileProps['modelValue'], undefined>>({\n  default: null,\n})\n\nconst computedId = useId(() => props.id)\n\n// TODO noTraverse is not implemented yet\n\nconst stateClass = useStateClass(() => props.state)\n\nconst input = useTemplateRef<HTMLInputElement>('_input')\n\nconst {focused} = useFocus(input, {initialValue: props.autofocus})\n\nconst hasLabelSlot = computed(() => !isEmptySlot(slots['label']))\n\nconst computedAccept = computed(() =>\n  typeof props.accept === 'string' ? props.accept : props.accept.join(',')\n)\n\nconst computedClasses = computed(() => [\n  stateClass.value,\n  {\n    [`form-control-${props.size}`]: props.size !== undefined,\n    'form-control': !props.plain,\n    'form-control-input-file-hide-button': props.noButton,\n  },\n])\n\nconst onChange = () => {\n  const value =\n    input.value?.files === null || input.value?.files === undefined ? null : [...input.value.files]\n  modelValue.value = value === null ? null : props.multiple === true ? value : value[0]\n}\n\nconst onDrop = (e: Readonly<Event>) => {\n  if (props.noDrop === true) {\n    e.preventDefault()\n  }\n}\n\n/**\n * Reset the form input\n */\nconst reset = () => {\n  modelValue.value = null\n}\n\nwatch(modelValue, (newValue) => {\n  if (newValue === null && input.value !== null) {\n    input.value.value = ''\n  }\n})\n\ndefineExpose({\n  blur: () => {\n    focused.value = false\n  },\n  element: input,\n  focus: () => {\n    focused.value = true\n  },\n  reset,\n})\n</script>\n"],"names":["_useSlots","_useModel"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,UAAM,QAAQA,SAAA;AAKd,UAAM,SAAS;AAsBT,UAAA,QAAQ,YAAY,QAAQ,WAAW;AAEvC,UAAA,aAAaC,SAElB,SAAA,YAAA;AAED,UAAM,aAAa,MAAM,MAAM,MAAM,EAAE;AAIvC,UAAM,aAAa,cAAc,MAAM,MAAM,KAAK;AAE5C,UAAA,QAAQ,eAAiC,QAAQ;AAEjD,UAAA,EAAC,QAAW,IAAA,SAAS,OAAO,EAAC,cAAc,MAAM,WAAU;AAE3D,UAAA,eAAe,SAAS,MAAM,CAAC,YAAY,MAAM,OAAO,CAAC,CAAC;AAEhE,UAAM,iBAAiB;AAAA,MAAS,MAC9B,OAAO,MAAM,WAAW,WAAW,MAAM,SAAS,MAAM,OAAO,KAAK,GAAG;AAAA,IACzE;AAEM,UAAA,kBAAkB,SAAS,MAAM;AAAA,MACrC,WAAW;AAAA,MACX;AAAA,QACE,CAAC,gBAAgB,MAAM,IAAI,EAAE,GAAG,MAAM,SAAS;AAAA,QAC/C,gBAAgB,CAAC,MAAM;AAAA,QACvB,uCAAuC,MAAM;AAAA,MAAA;AAAA,IAC/C,CACD;AAED,UAAM,WAAW,MAAM;;AACrB,YAAM,UACJ,WAAM,UAAN,mBAAa,WAAU,UAAQ,WAAM,UAAN,mBAAa,WAAU,SAAY,OAAO,CAAC,GAAG,MAAM,MAAM,KAAK;AACrF,iBAAA,QAAQ,UAAU,OAAO,OAAO,MAAM,aAAa,OAAO,QAAQ,MAAM,CAAC;AAAA,IACtF;AAEM,UAAA,SAAS,CAAC,MAAuB;AACjC,UAAA,MAAM,WAAW,MAAM;AACzB,UAAE,eAAe;AAAA,MAAA;AAAA,IAErB;AAKA,UAAM,QAAQ,MAAM;AAClB,iBAAW,QAAQ;AAAA,IACrB;AAEM,UAAA,YAAY,CAAC,aAAa;AAC9B,UAAI,aAAa,QAAQ,MAAM,UAAU,MAAM;AAC7C,cAAM,MAAM,QAAQ;AAAA,MAAA;AAAA,IACtB,CACD;AAEY,aAAA;AAAA,MACX,MAAM,MAAM;AACV,gBAAQ,QAAQ;AAAA,MAClB;AAAA,MACA,SAAS;AAAA,MACT,OAAO,MAAM;AACX,gBAAQ,QAAQ;AAAA,MAClB;AAAA,MACA;AAAA,IAAA,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}