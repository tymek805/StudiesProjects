{"version":3,"file":"BFormFile.vue_vue_type_script_setup_true_lang-Bm-hkWUZ.js","sources":["../src/components/BFormFile/BFormFile.vue"],"sourcesContent":["<template>\n  <label\n    v-if=\"hasLabelSlot || props.label\"\n    class=\"form-label\"\n    :class=\"props.labelClass\"\n    :for=\"computedId\"\n  >\n    <slot name=\"label\">\n      {{ props.label }}\n    </slot>\n  </label>\n\n  <input\n    :id=\"computedId\"\n    v-bind=\"$attrs\"\n    ref=\"_input\"\n    type=\"file\"\n    :class=\"computedClasses\"\n    :form=\"props.form\"\n    :name=\"props.name\"\n    :multiple=\"props.multiple\"\n    :disabled=\"props.disabled\"\n    :capture=\"props.capture\"\n    :accept=\"computedAccept || undefined\"\n    :required=\"props.required || undefined\"\n    :aria-label=\"props.ariaLabel\"\n    :aria-labelledby=\"props.ariaLabelledby\"\n    :aria-required=\"props.required || undefined\"\n    :directory=\"props.directory\"\n    :webkitdirectory=\"props.directory\"\n    @change=\"onChange\"\n    @drop=\"onDrop\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport {useFocus} from '@vueuse/core'\nimport {computed, useTemplateRef, watch} from 'vue'\nimport type {BFormFileProps} from '../../types/ComponentProps'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport {useStateClass} from '../../composables/useStateClass'\nimport {isEmptySlot} from '../../utils/dom'\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst slots = defineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  label?: (props: Record<string, never>) => any\n}>()\n\nconst _props = withDefaults(defineProps<Omit<BFormFileProps, 'modelValue'>>(), {\n  ariaLabel: undefined,\n  ariaLabelledby: undefined,\n  accept: '',\n  autofocus: false,\n  capture: undefined,\n  directory: false,\n  disabled: false,\n  form: undefined,\n  id: undefined,\n  label: '',\n  labelClass: undefined,\n  multiple: false,\n  name: undefined,\n  noButton: false,\n  noDrop: false,\n  noTraverse: false,\n  plain: false,\n  required: false,\n  size: undefined,\n  state: null,\n})\nconst props = useDefaults(_props, 'BFormFile')\n\nconst modelValue = defineModel<Exclude<BFormFileProps['modelValue'], undefined>>({\n  default: null,\n})\n\nconst computedId = useId(() => props.id)\n\n// TODO noTraverse is not implemented yet\n\nconst stateClass = useStateClass(() => props.state)\n\nconst input = useTemplateRef<HTMLInputElement>('_input')\n\nconst {focused} = useFocus(input, {initialValue: props.autofocus})\n\nconst hasLabelSlot = computed(() => !isEmptySlot(slots['label']))\n\nconst computedAccept = computed(() =>\n  typeof props.accept === 'string' ? props.accept : props.accept.join(',')\n)\n\nconst computedClasses = computed(() => [\n  stateClass.value,\n  {\n    [`form-control-${props.size}`]: props.size !== undefined,\n    'form-control': !props.plain,\n    'form-control-input-file-hide-button': props.noButton,\n  },\n])\n\nconst onChange = () => {\n  const value =\n    input.value?.files === null || input.value?.files === undefined ? null : [...input.value.files]\n  modelValue.value = value === null ? null : props.multiple === true ? value : value[0]\n}\n\nconst onDrop = (e: Readonly<Event>) => {\n  if (props.noDrop === true) {\n    e.preventDefault()\n  }\n}\n\n/**\n * Reset the form input\n */\nconst reset = () => {\n  modelValue.value = null\n}\n\nwatch(modelValue, (newValue) => {\n  if (newValue === null && input.value !== null) {\n    input.value.value = ''\n  }\n})\n\ndefineExpose({\n  blur: () => {\n    focused.value = false\n  },\n  element: input,\n  focus: () => {\n    focused.value = true\n  },\n  reset,\n})\n</script>\n"],"names":["slots","_useSlots","_props","__props","props","useDefaults","modelValue","_useModel","computedId","useId","id","stateClass","useStateClass","state","input","useTemplateRef","focused","useFocus","initialValue","autofocus","hasLabelSlot","computed","isEmptySlot","computedAccept","accept","join","computedClasses","value","size","plain","noButton","onChange","_a","files","_b","multiple","onDrop","e","noDrop","preventDefault","newValue","__expose","blur","element","focus","reset"],"mappings":"0oCA+CM,MAAAA,EAAQC,EAAAA,WAKRC,EAASC,EAsBTC,EAAQC,EAAAA,YAAYH,EAAQ,aAE5BI,EAAaC,EAAAA,SAElBJ,EAAA,cAEKK,EAAaC,EAAAA,OAAM,IAAML,EAAMM,KAI/BC,EAAaC,EAAAA,eAAc,IAAMR,EAAMS,QAEvCC,EAAQC,iBAAiC,WAEzCC,QAACA,GAAWC,WAASH,EAAO,CAACI,aAAcd,EAAMe,YAEjDC,EAAeC,EAAAA,UAAS,KAAOC,cAAYtB,EAAa,SAExDuB,EAAiBF,EAAAA,UAAS,IACN,iBAAjBjB,EAAMoB,OAAsBpB,EAAMoB,OAASpB,EAAMoB,OAAOC,KAAK,OAGhEC,EAAkBL,EAAAA,UAAS,IAAM,CACrCV,EAAWgB,MACX,CACE,CAAC,gBAAgBvB,EAAMwB,aAAwB,IAAfxB,EAAMwB,KACtC,gBAAiBxB,EAAMyB,MACvB,sCAAuCzB,EAAM0B,aAI3CC,EAAW,aACf,MAAMJ,EACmB,QAAvB,OAAAK,EAAMlB,EAAAa,YAAO,EAAAK,EAAAC,aAAyC,KAAvB,OAAAC,EAAMpB,EAAAa,YAAO,EAAAO,EAAAD,OAAsB,KAAO,IAAInB,EAAMa,MAAMM,OAChF3B,EAAAqB,MAAkB,OAAVA,EAAiB,MAA0B,IAAnBvB,EAAM+B,SAAoBR,EAAQA,EAAM,EAAC,EAGhFS,EAAUC,KACO,IAAjBjC,EAAMkC,QACRD,EAAEE,gBAAe,iBAWfjC,GAAakC,IACA,OAAbA,GAAqC,OAAhB1B,EAAMa,QAC7Bb,EAAMa,MAAMA,MAAQ,GAAA,IAIXc,EAAA,CACXC,KAAM,KACJ1B,EAAQW,OAAQ,CAAA,EAElBgB,QAAS7B,EACT8B,MAAO,KACL5B,EAAQW,OAAQ,CAAA,EAElBkB,MAlBY,KACZvC,EAAWqB,MAAQ,IAAA"}